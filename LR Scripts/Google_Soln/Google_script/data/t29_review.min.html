require(['jquery'],function($){'use strict';$(window).on('load',function(){var bvReviewLinkTime;function resetAnchorPosition(){var scrollTopPosition=$('header.page-header').length?$('header.page-header').outerHeight():0;if($('.inside-notice').length){scrollTopPosition+=$('.inside-notice').outerHeight();}
if($('#bv_reviews').length){$('html, body').animate({scrollTop:$('#bv_reviews').offset().top-scrollTopPosition},0);}}
function redirectToReviews(){var _this=$(this);var _href=_this.attr('href');var ratioCounter;_href=_href==='#'?'':_href;_this.on('click',function(e){e.preventDefault();_this.attr('href',_href+'#bv_reviews');$('#tab-label-bv_reviews-title').trigger('click');window.location.href=_href+'#bv_reviews';resetAnchorPosition();});ratioCounter=_this.parent('dd').next('dd');ratioCounter.removeClass('bv-rating-ratio-count');ratioCounter.on('click',function(){$('#tab-label-bv_reviews-title').trigger('click');window.location.href=_href+'#bv_reviews';resetAnchorPosition();});}
function setBvProductId(index,el){$('[data-bv-show="inline_rating"]').attr('data-bv-product-id',$(el).attr('data-bv-product-id'));}
function ajaxBvReview(event,xhr,settings){var ajaxUrl=settings.url;var ajaxBVReviewTime;if(xhr.readyState===4&&xhr.status===200&&ajaxUrl.indexOf(location.href)!==-1){ajaxBVReviewTime=setTimeout(function(){if($('.content.content-view-all').is(':visible')){clearTimeout(ajaxBVReviewTime);$('[data-bv-show="inline_rating"]').each(setBvProductId);}},500);}}
function triggerClick(){$("#tab-label-bv_reviews-title").trigger("click");}
if(window.location.href.split('#')[1]==='bv_reviews'){resetAnchorPosition();}
$('a.bv-rating-stars-container').each(redirectToReviews);$('.catalog-category-view').on('ajaxSuccess',ajaxBvReview);bvReviewLinkTime=setTimeout(function(){if($('.product.media > .bv_reviews').length===0){clearTimeout(bvReviewLinkTime);}
if($('.product.media > .bv_reviews').data('bv-ready')===true){clearTimeout(bvReviewLinkTime);$(".bv_main_container.bv_hover").attr("href","#bv_reviews");$(".bv_main_container.bv_hover").click(triggerClick);}},500);});});