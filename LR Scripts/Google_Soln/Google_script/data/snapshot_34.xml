<?xml version="1.0" encoding="utf-8"?>
<HTTPSnapshot xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" id="34">
  <HTTPTask id="1275" hostname="in-media.apjonlinecdn.com" path="/static/version1707169154/frontend/HPOLS/stellar/en_US/jquery.min.js" url="https://in-media.apjonlinecdn.com/static/version1707169154/frontend/HPOLS/stellar/en_US/jquery.min.js" ip="18.67.161.33" port="443" connectionId="57" origin="Primary" frame="1" startDateTime="2024-02-07T15:17:19.506+05:30" startTime="94061500" endTime="94061515">
    <HTTPRequest method="GET">
      <HTTPHeaders>
        <HTTPHeaderEntity name="Host" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aW4tbWVkaWEuYXBqb25saW5lY2RuLmNvbQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ik5vdCBBKEJyYW5kIjt2PSI5OSIsICJHb29nbGUgQ2hyb21lIjt2PSIxMjEiLCAiQ2hyb21pdW0iO3Y9IjEyMSI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-mobile" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>PzA=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="User-Agent" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="sec-ch-ua-platform" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>IldpbmRvd3Mi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Ki8q</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Site" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y3Jvc3Mtc2l0ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Mode" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bm8tY29ycw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Sec-Fetch-Dest" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>c2NyaXB0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Referer" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>aHR0cHM6Ly93d3cuaHAuY29tLw==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Encoding" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcCwgZGVmbGF0ZSwgYnI=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Accept-Language" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>ZW4tR0IsZW47cT0wLjk=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>R0VUIC9zdGF0aWMvdmVyc2lvbjE3MDcxNjkxNTQvZnJvbnRlbmQvSFBPTFMvc3RlbGxhci9lbl9VUy9qcXVlcnkubWluLmpzIEhUVFAvMS4xDQpIb3N0OiBpbi1tZWRpYS5hcGpvbmxpbmVjZG4uY29tDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpzZWMtY2gtdWE6ICJOb3QgQShCcmFuZCI7dj0iOTkiLCAiR29vZ2xlIENocm9tZSI7dj0iMTIxIiwgIkNocm9taXVtIjt2PSIxMjEiDQpzZWMtY2gtdWEtbW9iaWxlOiA/MA0KVXNlci1BZ2VudDogTW96aWxsYS81LjAgKFdpbmRvd3MgTlQgMTAuMDsgV2luNjQ7IHg2NCkgQXBwbGVXZWJLaXQvNTM3LjM2IChLSFRNTCwgbGlrZSBHZWNrbykgQ2hyb21lLzEyMS4wLjAuMCBTYWZhcmkvNTM3LjM2DQpzZWMtY2gtdWEtcGxhdGZvcm06ICJXaW5kb3dzIg0KQWNjZXB0OiAqLyoNClNlYy1GZXRjaC1TaXRlOiBjcm9zcy1zaXRlDQpTZWMtRmV0Y2gtTW9kZTogbm8tY29ycw0KU2VjLUZldGNoLURlc3Q6IHNjcmlwdA0KUmVmZXJlcjogaHR0cHM6Ly93d3cuaHAuY29tLw0KQWNjZXB0LUVuY29kaW5nOiBnemlwLCBkZWZsYXRlLCBicg0KQWNjZXB0LUxhbmd1YWdlOiBlbi1HQixlbjtxPTAuOQ0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
    </HTTPRequest>
    <HTTPResponse>
      <contentLenght>0</contentLenght>
      <HTTPHeaders>
        <HTTPHeaderEntity name="Content-Type" index="0">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>YXBwbGljYXRpb24vamF2YXNjcmlwdA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Transfer-Encoding" index="1">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Y2h1bmtlZA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Connection" index="2">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>a2VlcC1hbGl2ZQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Date" index="3">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAwNSBGZWIgMjAyNCAyMzoxMjozNyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Last-Modified" index="4">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TW9uLCAwNSBGZWIgMjAyNCAyMTo0MjoxMyBHTVQ=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="ETag" index="5">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Vy8iZDczZTRlZjM0ZTMwM2Q5ZTA5NmY1YjIxMTQxMDQ1ODQi</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="x-amz-server-side-encryption" index="6">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QUVTMjU2</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Cache-Control" index="7">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>bWF4LWFnZT0zMTUzNjAwMA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Server" index="8">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QW1hem9uUzM=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Content-Encoding" index="9">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>Z3ppcA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Vary" index="10">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>QWNjZXB0LUVuY29kaW5n</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Cache" index="11">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SGl0IGZyb20gY2xvdWRmcm9udA==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Via" index="12">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MS4xIGJhNWIzZTVmMDUxNDZmZGFkNzQxY2VjMmYyNjg1MDFlLmNsb3VkZnJvbnQubmV0IChDbG91ZEZyb250KQ==</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Amz-Cf-Pop" index="13">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TUFBNTEtUDE=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="X-Amz-Cf-Id" index="14">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>TXB1QnVmLTNQVEExblItMlRPSjN4OFNlUE1BZnhSMS1TTmRZUWhBWHVVVm45YlB2RHJncnJRPT0=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPHeaderEntity name="Age" index="15">
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>MTI1MTI0</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPHeaderEntity>
        <HTTPAllHeaders>
          <HTTPDataSet>
            <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
              <ActualData>SFRUUC8xLjEgMjAwIE9LDQpDb250ZW50LVR5cGU6IGFwcGxpY2F0aW9uL2phdmFzY3JpcHQNClRyYW5zZmVyLUVuY29kaW5nOiBjaHVua2VkDQpDb25uZWN0aW9uOiBrZWVwLWFsaXZlDQpEYXRlOiBNb24sIDA1IEZlYiAyMDI0IDIzOjEyOjM3IEdNVA0KTGFzdC1Nb2RpZmllZDogTW9uLCAwNSBGZWIgMjAyNCAyMTo0MjoxMyBHTVQNCkVUYWc6IFcvImQ3M2U0ZWYzNGUzMDNkOWUwOTZmNWIyMTE0MTA0NTg0Ig0KeC1hbXotc2VydmVyLXNpZGUtZW5jcnlwdGlvbjogQUVTMjU2DQpDYWNoZS1Db250cm9sOiBtYXgtYWdlPTMxNTM2MDAwDQpTZXJ2ZXI6IEFtYXpvblMzDQpDb250ZW50LUVuY29kaW5nOiBnemlwDQpWYXJ5OiBBY2NlcHQtRW5jb2RpbmcNClgtQ2FjaGU6IEhpdCBmcm9tIGNsb3VkZnJvbnQNClZpYTogMS4xIGJhNWIzZTVmMDUxNDZmZGFkNzQxY2VjMmYyNjg1MDFlLmNsb3VkZnJvbnQubmV0IChDbG91ZEZyb250KQ0KWC1BbXotQ2YtUG9wOiBNQUE1MS1QMQ0KWC1BbXotQ2YtSWQ6IE1wdUJ1Zi0zUFRBMW5SLTJUT0ozeDhTZVBNQWZ4UjEtU05kWVFoQVh1VVZuOWJQdkRyZ3JyUT09DQpBZ2U6IDEyNTEyNA0KDQo=</ActualData>
            </HTTPData>
          </HTTPDataSet>
          <IsExternalData>false</IsExternalData>
        </HTTPAllHeaders>
      </HTTPHeaders>
      <HTTPBody>
        <HTTPDataSet>
          <HTTPData dataFilePath="" dfeDataType="Raw" sectionDataType="1">
            <ActualData>LyohCiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjMuNi4wCiAqIGh0dHBzOi8vanF1ZXJ5LmNvbS8KICoKICogSW5jbHVkZXMgU2l6emxlLmpzCiAqIGh0dHBzOi8vc2l6emxlanMuY29tLwogKgogKiBDb3B5cmlnaHQgT3BlbkpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9ycwogKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UKICogaHR0cHM6Ly9qcXVlcnkub3JnL2xpY2Vuc2UKICoKICogRGF0ZTogMjAyMS0wMy0wMlQxNzowOFoKICovCihmdW5jdGlvbihnbG9iYWwsZmFjdG9yeSl7InVzZSBzdHJpY3QiO2lmKHR5cGVvZiBtb2R1bGU9PT0ib2JqZWN0IiYmdHlwZW9mIG1vZHVsZS5leHBvcnRzPT09Im9iamVjdCIpe21vZHVsZS5leHBvcnRzPWdsb2JhbC5kb2N1bWVudD9mYWN0b3J5KGdsb2JhbCx0cnVlKTpmdW5jdGlvbih3KXtpZighdy5kb2N1bWVudCl7dGhyb3cgbmV3IEVycm9yKCJqUXVlcnkgcmVxdWlyZXMgYSB3aW5kb3cgd2l0aCBhIGRvY3VtZW50Iik7fQpyZXR1cm4gZmFjdG9yeSh3KTt9O31lbHNle2ZhY3RvcnkoZ2xvYmFsKTt9fSkodHlwZW9mIHdpbmRvdyE9PSJ1bmRlZmluZWQiP3dpbmRvdzp0aGlzLGZ1bmN0aW9uKHdpbmRvdyxub0dsb2JhbCl7InVzZSBzdHJpY3QiO3ZhciBhcnI9W107dmFyIGdldFByb3RvPU9iamVjdC5nZXRQcm90b3R5cGVPZjt2YXIgc2xpY2U9YXJyLnNsaWNlO3ZhciBmbGF0PWFyci5mbGF0P2Z1bmN0aW9uKGFycmF5KXtyZXR1cm4gYXJyLmZsYXQuY2FsbChhcnJheSk7fTpmdW5jdGlvbihhcnJheSl7cmV0dXJuIGFyci5jb25jYXQuYXBwbHkoW10sYXJyYXkpO307dmFyIHB1c2g9YXJyLnB1c2g7dmFyIGluZGV4T2Y9YXJyLmluZGV4T2Y7dmFyIGNsYXNzMnR5cGU9e307dmFyIHRvU3RyaW5nPWNsYXNzMnR5cGUudG9TdHJpbmc7dmFyIGhhc093bj1jbGFzczJ0eXBlLmhhc093blByb3BlcnR5O3ZhciBmblRvU3RyaW5nPWhhc093bi50b1N0cmluZzt2YXIgT2JqZWN0RnVuY3Rpb25TdHJpbmc9Zm5Ub1N0cmluZy5jYWxsKE9iamVjdCk7dmFyIHN1cHBvcnQ9e307dmFyIGlzRnVuY3Rpb249ZnVuY3Rpb24gaXNGdW5jdGlvbihvYmope3JldHVybiB0eXBlb2Ygb2JqPT09ImZ1bmN0aW9uIiYmdHlwZW9mIG9iai5ub2RlVHlwZSE9PSJudW1iZXIiJiZ0eXBlb2Ygb2JqLml0ZW0hPT0iZnVuY3Rpb24iO307dmFyIGlzV2luZG93PWZ1bmN0aW9uIGlzV2luZG93KG9iail7cmV0dXJuIG9iaiE9bnVsbCYmb2JqPT09b2JqLndpbmRvdzt9O3ZhciBkb2N1bWVudD13aW5kb3cuZG9jdW1lbnQ7dmFyIHByZXNlcnZlZFNjcmlwdEF0dHJpYnV0ZXM9e3R5cGU6dHJ1ZSxzcmM6dHJ1ZSxub25jZTp0cnVlLG5vTW9kdWxlOnRydWV9O2Z1bmN0aW9uIERPTUV2YWwoY29kZSxub2RlLGRvYyl7ZG9jPWRvY3x8ZG9jdW1lbnQ7dmFyIGksdmFsLHNjcmlwdD1kb2MuY3JlYXRlRWxlbWVudCgic2NyaXB0Iik7c2NyaXB0LnRleHQ9Y29kZTtpZihub2RlKXtmb3IoaSBpbiBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzKXt2YWw9bm9kZVtpXXx8bm9kZS5nZXRBdHRyaWJ1dGUmJm5vZGUuZ2V0QXR0cmlidXRlKGkpO2lmKHZhbCl7c2NyaXB0LnNldEF0dHJpYnV0ZShpLHZhbCk7fX19CmRvYy5oZWFkLmFwcGVuZENoaWxkKHNjcmlwdCkucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChzY3JpcHQpO30KZnVuY3Rpb24gdG9UeXBlKG9iail7aWYob2JqPT1udWxsKXtyZXR1cm4gb2JqKyIiO30KcmV0dXJuIHR5cGVvZiBvYmo9PT0ib2JqZWN0Inx8dHlwZW9mIG9iaj09PSJmdW5jdGlvbiI/Y2xhc3MydHlwZVt0b1N0cmluZy5jYWxsKG9iaildfHwib2JqZWN0Ijp0eXBlb2Ygb2JqO30KdmFyCnZlcnNpb249IjMuNi4wIixqUXVlcnk9ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdChzZWxlY3Rvcixjb250ZXh0KTt9O2pRdWVyeS5mbj1qUXVlcnkucHJvdG90eXBlPXtqcXVlcnk6dmVyc2lvbixjb25zdHJ1Y3RvcjpqUXVlcnksbGVuZ3RoOjAsdG9BcnJheTpmdW5jdGlvbigpe3JldHVybiBzbGljZS5jYWxsKHRoaXMpO30sZ2V0OmZ1bmN0aW9uKG51bSl7aWYobnVtPT1udWxsKXtyZXR1cm4gc2xpY2UuY2FsbCh0aGlzKTt9CnJldHVybiBudW08MD90aGlzW251bSt0aGlzLmxlbmd0aF06dGhpc1tudW1dO30scHVzaFN0YWNrOmZ1bmN0aW9uKGVsZW1zKXt2YXIgcmV0PWpRdWVyeS5tZXJnZSh0aGlzLmNvbnN0cnVjdG9yKCksZWxlbXMpO3JldC5wcmV2T2JqZWN0PXRoaXM7cmV0dXJuIHJldDt9LGVhY2g6ZnVuY3Rpb24oY2FsbGJhY2spe3JldHVybiBqUXVlcnkuZWFjaCh0aGlzLGNhbGxiYWNrKTt9LG1hcDpmdW5jdGlvbihjYWxsYmFjayl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeS5tYXAodGhpcyxmdW5jdGlvbihlbGVtLGkpe3JldHVybiBjYWxsYmFjay5jYWxsKGVsZW0saSxlbGVtKTt9KSk7fSxzbGljZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLnB1c2hTdGFjayhzbGljZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpO30sZmlyc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgwKTt9LGxhc3Q6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lcSgtMSk7fSxldmVuOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeS5ncmVwKHRoaXMsZnVuY3Rpb24oX2VsZW0saSl7cmV0dXJuKGkrMSklMjt9KSk7fSxvZGQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wdXNoU3RhY2soalF1ZXJ5LmdyZXAodGhpcyxmdW5jdGlvbihfZWxlbSxpKXtyZXR1cm4gaSUyO30pKTt9LGVxOmZ1bmN0aW9uKGkpe3ZhciBsZW49dGhpcy5sZW5ndGgsaj0raSsoaTwwP2xlbjowKTtyZXR1cm4gdGhpcy5wdXNoU3RhY2soaj49MCYmajxsZW4/W3RoaXNbal1dOltdKTt9LGVuZDpmdW5jdGlvbigpe3JldHVybiB0aGlzLnByZXZPYmplY3R8fHRoaXMuY29uc3RydWN0b3IoKTt9LHB1c2g6cHVzaCxzb3J0OmFyci5zb3J0LHNwbGljZTphcnIuc3BsaWNlfTtqUXVlcnkuZXh0ZW5kPWpRdWVyeS5mbi5leHRlbmQ9ZnVuY3Rpb24oKXt2YXIgb3B0aW9ucyxuYW1lLHNyYyxjb3B5LGNvcHlJc0FycmF5LGNsb25lLHRhcmdldD1hcmd1bWVudHNbMF18fHt9LGk9MSxsZW5ndGg9YXJndW1lbnRzLmxlbmd0aCxkZWVwPWZhbHNlO2lmKHR5cGVvZiB0YXJnZXQ9PT0iYm9vbGVhbiIpe2RlZXA9dGFyZ2V0O3RhcmdldD1hcmd1bWVudHNbaV18fHt9O2krKzt9CmlmKHR5cGVvZiB0YXJnZXQhPT0ib2JqZWN0IiYmIWlzRnVuY3Rpb24odGFyZ2V0KSl7dGFyZ2V0PXt9O30KaWYoaT09PWxlbmd0aCl7dGFyZ2V0PXRoaXM7aS0tO30KZm9yKDtpPGxlbmd0aDtpKyspe2lmKChvcHRpb25zPWFyZ3VtZW50c1tpXSkhPW51bGwpe2ZvcihuYW1lIGluIG9wdGlvbnMpe2NvcHk9b3B0aW9uc1tuYW1lXTtpZihuYW1lPT09Il9fcHJvdG9fXyJ8fHRhcmdldD09PWNvcHkpe2NvbnRpbnVlO30KaWYoZGVlcCYmY29weSYmKGpRdWVyeS5pc1BsYWluT2JqZWN0KGNvcHkpfHwoY29weUlzQXJyYXk9QXJyYXkuaXNBcnJheShjb3B5KSkpKXtzcmM9dGFyZ2V0W25hbWVdO2lmKGNvcHlJc0FycmF5JiYhQXJyYXkuaXNBcnJheShzcmMpKXtjbG9uZT1bXTt9ZWxzZSBpZighY29weUlzQXJyYXkmJiFqUXVlcnkuaXNQbGFpbk9iamVjdChzcmMpKXtjbG9uZT17fTt9ZWxzZXtjbG9uZT1zcmM7fQpjb3B5SXNBcnJheT1mYWxzZTt0YXJnZXRbbmFtZV09alF1ZXJ5LmV4dGVuZChkZWVwLGNsb25lLGNvcHkpO31lbHNlIGlmKGNvcHkhPT11bmRlZmluZWQpe3RhcmdldFtuYW1lXT1jb3B5O319fX0KcmV0dXJuIHRhcmdldDt9O2pRdWVyeS5leHRlbmQoe2V4cGFuZG86ImpRdWVyeSIrKHZlcnNpb24rTWF0aC5yYW5kb20oKSkucmVwbGFjZSgvXEQvZywiIiksaXNSZWFkeTp0cnVlLGVycm9yOmZ1bmN0aW9uKG1zZyl7dGhyb3cgbmV3IEVycm9yKG1zZyk7fSxub29wOmZ1bmN0aW9uKCl7fSxpc1BsYWluT2JqZWN0OmZ1bmN0aW9uKG9iail7dmFyIHByb3RvLEN0b3I7aWYoIW9ianx8dG9TdHJpbmcuY2FsbChvYmopIT09IltvYmplY3QgT2JqZWN0XSIpe3JldHVybiBmYWxzZTt9CnByb3RvPWdldFByb3RvKG9iaik7aWYoIXByb3RvKXtyZXR1cm4gdHJ1ZTt9CkN0b3I9aGFzT3duLmNhbGwocHJvdG8sImNvbnN0cnVjdG9yIikmJnByb3RvLmNvbnN0cnVjdG9yO3JldHVybiB0eXBlb2YgQ3Rvcj09PSJmdW5jdGlvbiImJmZuVG9TdHJpbmcuY2FsbChDdG9yKT09PU9iamVjdEZ1bmN0aW9uU3RyaW5nO30saXNFbXB0eU9iamVjdDpmdW5jdGlvbihvYmope3ZhciBuYW1lO2ZvcihuYW1lIGluIG9iail7cmV0dXJuIGZhbHNlO30KcmV0dXJuIHRydWU7fSxnbG9iYWxFdmFsOmZ1bmN0aW9uKGNvZGUsb3B0aW9ucyxkb2Mpe0RPTUV2YWwoY29kZSx7bm9uY2U6b3B0aW9ucyYmb3B0aW9ucy5ub25jZX0sZG9jKTt9LGVhY2g6ZnVuY3Rpb24ob2JqLGNhbGxiYWNrKXt2YXIgbGVuZ3RoLGk9MDtpZihpc0FycmF5TGlrZShvYmopKXtsZW5ndGg9b2JqLmxlbmd0aDtmb3IoO2k8bGVuZ3RoO2krKyl7aWYoY2FsbGJhY2suY2FsbChvYmpbaV0saSxvYmpbaV0pPT09ZmFsc2Upe2JyZWFrO319fWVsc2V7Zm9yKGkgaW4gb2JqKXtpZihjYWxsYmFjay5jYWxsKG9ialtpXSxpLG9ialtpXSk9PT1mYWxzZSl7YnJlYWs7fX19CnJldHVybiBvYmo7fSxtYWtlQXJyYXk6ZnVuY3Rpb24oYXJyLHJlc3VsdHMpe3ZhciByZXQ9cmVzdWx0c3x8W107aWYoYXJyIT1udWxsKXtpZihpc0FycmF5TGlrZShPYmplY3QoYXJyKSkpe2pRdWVyeS5tZXJnZShyZXQsdHlwZW9mIGFycj09PSJzdHJpbmciP1thcnJdOmFycik7fWVsc2V7cHVzaC5jYWxsKHJldCxhcnIpO319CnJldHVybiByZXQ7fSxpbkFycmF5OmZ1bmN0aW9uKGVsZW0sYXJyLGkpe3JldHVybiBhcnI9PW51bGw/LTE6aW5kZXhPZi5jYWxsKGFycixlbGVtLGkpO30sbWVyZ2U6ZnVuY3Rpb24oZmlyc3Qsc2Vjb25kKXt2YXIgbGVuPStzZWNvbmQubGVuZ3RoLGo9MCxpPWZpcnN0Lmxlbmd0aDtmb3IoO2o8bGVuO2orKyl7Zmlyc3RbaSsrXT1zZWNvbmRbal07fQpmaXJzdC5sZW5ndGg9aTtyZXR1cm4gZmlyc3Q7fSxncmVwOmZ1bmN0aW9uKGVsZW1zLGNhbGxiYWNrLGludmVydCl7dmFyIGNhbGxiYWNrSW52ZXJzZSxtYXRjaGVzPVtdLGk9MCxsZW5ndGg9ZWxlbXMubGVuZ3RoLGNhbGxiYWNrRXhwZWN0PSFpbnZlcnQ7Zm9yKDtpPGxlbmd0aDtpKyspe2NhbGxiYWNrSW52ZXJzZT0hY2FsbGJhY2soZWxlbXNbaV0saSk7aWYoY2FsbGJhY2tJbnZlcnNlIT09Y2FsbGJhY2tFeHBlY3Qpe21hdGNoZXMucHVzaChlbGVtc1tpXSk7fX0KcmV0dXJuIG1hdGNoZXM7fSxtYXA6ZnVuY3Rpb24oZWxlbXMsY2FsbGJhY2ssYXJnKXt2YXIgbGVuZ3RoLHZhbHVlLGk9MCxyZXQ9W107aWYoaXNBcnJheUxpa2UoZWxlbXMpKXtsZW5ndGg9ZWxlbXMubGVuZ3RoO2Zvcig7aTxsZW5ndGg7aSsrKXt2YWx1ZT1jYWxsYmFjayhlbGVtc1tpXSxpLGFyZyk7aWYodmFsdWUhPW51bGwpe3JldC5wdXNoKHZhbHVlKTt9fX1lbHNle2ZvcihpIGluIGVsZW1zKXt2YWx1ZT1jYWxsYmFjayhlbGVtc1tpXSxpLGFyZyk7aWYodmFsdWUhPW51bGwpe3JldC5wdXNoKHZhbHVlKTt9fX0KcmV0dXJuIGZsYXQocmV0KTt9LGd1aWQ6MSxzdXBwb3J0OnN1cHBvcnR9KTtpZih0eXBlb2YgU3ltYm9sPT09ImZ1bmN0aW9uIil7alF1ZXJ5LmZuW1N5bWJvbC5pdGVyYXRvcl09YXJyW1N5bWJvbC5pdGVyYXRvcl07fQpqUXVlcnkuZWFjaCgiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2wiLnNwbGl0KCIgIiksZnVuY3Rpb24oX2ksbmFtZSl7Y2xhc3MydHlwZVsiW29iamVjdCAiK25hbWUrIl0iXT1uYW1lLnRvTG93ZXJDYXNlKCk7fSk7ZnVuY3Rpb24gaXNBcnJheUxpa2Uob2JqKXt2YXIgbGVuZ3RoPSEhb2JqJiYibGVuZ3RoImluIG9iaiYmb2JqLmxlbmd0aCx0eXBlPXRvVHlwZShvYmopO2lmKGlzRnVuY3Rpb24ob2JqKXx8aXNXaW5kb3cob2JqKSl7cmV0dXJuIGZhbHNlO30KcmV0dXJuIHR5cGU9PT0iYXJyYXkifHxsZW5ndGg9PT0wfHx0eXBlb2YgbGVuZ3RoPT09Im51bWJlciImJmxlbmd0aD4wJiYobGVuZ3RoLTEpaW4gb2JqO30KdmFyIFNpenpsZT0vKiEKICogU2l6emxlIENTUyBTZWxlY3RvciBFbmdpbmUgdjIuMy42CiAqIGh0dHBzOi8vc2l6emxlanMuY29tLwogKgogKiBDb3B5cmlnaHQgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzCiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZQogKiBodHRwczovL2pzLmZvdW5kYXRpb24vCiAqCiAqIERhdGU6IDIwMjEtMDItMTYKICovCihmdW5jdGlvbih3aW5kb3cpe3ZhciBpLHN1cHBvcnQsRXhwcixnZXRUZXh0LGlzWE1MLHRva2VuaXplLGNvbXBpbGUsc2VsZWN0LG91dGVybW9zdENvbnRleHQsc29ydElucHV0LGhhc0R1cGxpY2F0ZSxzZXREb2N1bWVudCxkb2N1bWVudCxkb2NFbGVtLGRvY3VtZW50SXNIVE1MLHJidWdneVFTQSxyYnVnZ3lNYXRjaGVzLG1hdGNoZXMsY29udGFpbnMsZXhwYW5kbz0ic2l6emxlIisxKm5ldyBEYXRlKCkscHJlZmVycmVkRG9jPXdpbmRvdy5kb2N1bWVudCxkaXJydW5zPTAsZG9uZT0wLGNsYXNzQ2FjaGU9Y3JlYXRlQ2FjaGUoKSx0b2tlbkNhY2hlPWNyZWF0ZUNhY2hlKCksY29tcGlsZXJDYWNoZT1jcmVhdGVDYWNoZSgpLG5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGU9Y3JlYXRlQ2FjaGUoKSxzb3J0T3JkZXI9ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPXRydWU7fQpyZXR1cm4gMDt9LGhhc093bj0oe30pLmhhc093blByb3BlcnR5LGFycj1bXSxwb3A9YXJyLnBvcCxwdXNoTmF0aXZlPWFyci5wdXNoLHB1c2g9YXJyLnB1c2gsc2xpY2U9YXJyLnNsaWNlLGluZGV4T2Y9ZnVuY3Rpb24obGlzdCxlbGVtKXt2YXIgaT0wLGxlbj1saXN0Lmxlbmd0aDtmb3IoO2k8bGVuO2krKyl7aWYobGlzdFtpXT09PWVsZW0pe3JldHVybiBpO319CnJldHVybi0xO30sYm9vbGVhbnM9ImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnwiKyJpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkIix3aGl0ZXNwYWNlPSJbXFx4MjBcXHRcXHJcXG5cXGZdIixpZGVudGlmaWVyPSIoPzpcXFxcW1xcZGEtZkEtRl17MSw2fSIrd2hpdGVzcGFjZSsiP3xcXFxcW15cXHJcXG5cXGZdfFtcXHctXXxbXlwwLVxceDdmXSkrIixhdHRyaWJ1dGVzPSJcXFsiK3doaXRlc3BhY2UrIiooIitpZGVudGlmaWVyKyIpKD86Iit3aGl0ZXNwYWNlKyIqKFsqXiR8IX5dPz0pIit3aGl0ZXNwYWNlKyIqKD86JygoPzpcXFxcLnxbXlxcXFwnXSkqKSd8XCIoKD86XFxcXC58W15cXFxcXCJdKSopXCJ8KCIraWRlbnRpZmllcisiKSl8KSIrCndoaXRlc3BhY2UrIipcXF0iLHBzZXVkb3M9IjooIitpZGVudGlmaWVyKyIpKD86XFwoKCIrIignKCg/OlxcXFwufFteXFxcXCddKSopJ3xcIigoPzpcXFxcLnxbXlxcXFxcIl0pKilcIil8IisiKCg/OlxcXFwufFteXFxcXCgpW1xcXV18IithdHRyaWJ1dGVzKyIpKil8IisiLioiKyIpXFwpfCkiLHJ3aGl0ZXNwYWNlPW5ldyBSZWdFeHAod2hpdGVzcGFjZSsiKyIsImciKSxydHJpbT1uZXcgUmVnRXhwKCJeIit3aGl0ZXNwYWNlKyIrfCgoPzpefFteXFxcXF0pKD86XFxcXC4pKikiKwp3aGl0ZXNwYWNlKyIrJCIsImciKSxyY29tbWE9bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKiwiK3doaXRlc3BhY2UrIioiKSxyY29tYmluYXRvcnM9bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKihbPit+XXwiK3doaXRlc3BhY2UrIikiK3doaXRlc3BhY2UrIioiKSxyZGVzY2VuZD1uZXcgUmVnRXhwKHdoaXRlc3BhY2UrInw+IikscnBzZXVkbz1uZXcgUmVnRXhwKHBzZXVkb3MpLHJpZGVudGlmaWVyPW5ldyBSZWdFeHAoIl4iK2lkZW50aWZpZXIrIiQiKSxtYXRjaEV4cHI9eyJJRCI6bmV3IFJlZ0V4cCgiXiMoIitpZGVudGlmaWVyKyIpIiksIkNMQVNTIjpuZXcgUmVnRXhwKCJeXFwuKCIraWRlbnRpZmllcisiKSIpLCJUQUciOm5ldyBSZWdFeHAoIl4oIitpZGVudGlmaWVyKyJ8WypdKSIpLCJBVFRSIjpuZXcgUmVnRXhwKCJeIithdHRyaWJ1dGVzKSwiUFNFVURPIjpuZXcgUmVnRXhwKCJeIitwc2V1ZG9zKSwiQ0hJTEQiOm5ldyBSZWdFeHAoIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcKCIrCndoaXRlc3BhY2UrIiooZXZlbnxvZGR8KChbKy1dfCkoXFxkKilufCkiK3doaXRlc3BhY2UrIiooPzooWystXXwpIisKd2hpdGVzcGFjZSsiKihcXGQrKXwpKSIrd2hpdGVzcGFjZSsiKlxcKXwpIiwiaSIpLCJib29sIjpuZXcgUmVnRXhwKCJeKD86Iitib29sZWFucysiKSQiLCJpIiksIm5lZWRzQ29udGV4dCI6bmV3IFJlZ0V4cCgiXiIrd2hpdGVzcGFjZSsiKls+K35dfDooZXZlbnxvZGR8ZXF8Z3R8bHR8bnRofGZpcnN0fGxhc3QpKD86XFwoIit3aGl0ZXNwYWNlKyIqKCg/Oi1cXGQpP1xcZCopIit3aGl0ZXNwYWNlKyIqXFwpfCkoPz1bXi1dfCQpIiwiaSIpfSxyaHRtbD0vSFRNTCQvaSxyaW5wdXRzPS9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2kscmhlYWRlcj0vXmhcZCQvaSxybmF0aXZlPS9eW157XStce1xzKlxbbmF0aXZlIFx3LyxycXVpY2tFeHByPS9eKD86IyhbXHctXSspfChcdyspfFwuKFtcdy1dKykpJC8scnNpYmxpbmc9L1srfl0vLHJ1bmVzY2FwZT1uZXcgUmVnRXhwKCJcXFxcW1xcZGEtZkEtRl17MSw2fSIrd2hpdGVzcGFjZSsiP3xcXFxcKFteXFxyXFxuXFxmXSkiLCJnIiksZnVuZXNjYXBlPWZ1bmN0aW9uKGVzY2FwZSxub25IZXgpe3ZhciBoaWdoPSIweCIrZXNjYXBlLnNsaWNlKDEpLTB4MTAwMDA7cmV0dXJuIG5vbkhleD9ub25IZXg6aGlnaDwwP1N0cmluZy5mcm9tQ2hhckNvZGUoaGlnaCsweDEwMDAwKTpTdHJpbmcuZnJvbUNoYXJDb2RlKGhpZ2g+PjEwfDB4RDgwMCxoaWdoJjB4M0ZGfDB4REMwMCk7fSxyY3NzZXNjYXBlPS8oW1wwLVx4MWZceDdmXXxeLT9cZCl8Xi0kfFteXDAtXHgxZlx4N2YtXHVGRkZGXHctXS9nLGZjc3Nlc2NhcGU9ZnVuY3Rpb24oY2gsYXNDb2RlUG9pbnQpe2lmKGFzQ29kZVBvaW50KXtpZihjaD09PSJcMCIpe3JldHVybiJcdUZGRkQiO30KcmV0dXJuIGNoLnNsaWNlKDAsLTEpKyJcXCIrCmNoLmNoYXJDb2RlQXQoY2gubGVuZ3RoLTEpLnRvU3RyaW5nKDE2KSsiICI7fQpyZXR1cm4iXFwiK2NoO30sdW5sb2FkSGFuZGxlcj1mdW5jdGlvbigpe3NldERvY3VtZW50KCk7fSxpbkRpc2FibGVkRmllbGRzZXQ9YWRkQ29tYmluYXRvcihmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5kaXNhYmxlZD09PXRydWUmJmVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PSJmaWVsZHNldCI7fSx7ZGlyOiJwYXJlbnROb2RlIixuZXh0OiJsZWdlbmQifSk7dHJ5e3B1c2guYXBwbHkoKGFycj1zbGljZS5jYWxsKHByZWZlcnJlZERvYy5jaGlsZE5vZGVzKSkscHJlZmVycmVkRG9jLmNoaWxkTm9kZXMpO2FycltwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGhdLm5vZGVUeXBlO31jYXRjaChlKXtwdXNoPXthcHBseTphcnIubGVuZ3RoP2Z1bmN0aW9uKHRhcmdldCxlbHMpe3B1c2hOYXRpdmUuYXBwbHkodGFyZ2V0LHNsaWNlLmNhbGwoZWxzKSk7fTpmdW5jdGlvbih0YXJnZXQsZWxzKXt2YXIgaj10YXJnZXQubGVuZ3RoLGk9MDt3aGlsZSgodGFyZ2V0W2orK109ZWxzW2krK10pKXt9CnRhcmdldC5sZW5ndGg9ai0xO319O30KZnVuY3Rpb24gU2l6emxlKHNlbGVjdG9yLGNvbnRleHQscmVzdWx0cyxzZWVkKXt2YXIgbSxpLGVsZW0sbmlkLG1hdGNoLGdyb3VwcyxuZXdTZWxlY3RvcixuZXdDb250ZXh0PWNvbnRleHQmJmNvbnRleHQub3duZXJEb2N1bWVudCxub2RlVHlwZT1jb250ZXh0P2NvbnRleHQubm9kZVR5cGU6OTtyZXN1bHRzPXJlc3VsdHN8fFtdO2lmKHR5cGVvZiBzZWxlY3RvciE9PSJzdHJpbmcifHwhc2VsZWN0b3J8fG5vZGVUeXBlIT09MSYmbm9kZVR5cGUhPT05JiZub2RlVHlwZSE9PTExKXtyZXR1cm4gcmVzdWx0czt9CmlmKCFzZWVkKXtzZXREb2N1bWVudChjb250ZXh0KTtjb250ZXh0PWNvbnRleHR8fGRvY3VtZW50O2lmKGRvY3VtZW50SXNIVE1MKXtpZihub2RlVHlwZSE9PTExJiYobWF0Y2g9cnF1aWNrRXhwci5leGVjKHNlbGVjdG9yKSkpe2lmKChtPW1hdGNoWzFdKSl7aWYobm9kZVR5cGU9PT05KXtpZigoZWxlbT1jb250ZXh0LmdldEVsZW1lbnRCeUlkKG0pKSl7aWYoZWxlbS5pZD09PW0pe3Jlc3VsdHMucHVzaChlbGVtKTtyZXR1cm4gcmVzdWx0czt9fWVsc2V7cmV0dXJuIHJlc3VsdHM7fX1lbHNle2lmKG5ld0NvbnRleHQmJihlbGVtPW5ld0NvbnRleHQuZ2V0RWxlbWVudEJ5SWQobSkpJiZjb250YWlucyhjb250ZXh0LGVsZW0pJiZlbGVtLmlkPT09bSl7cmVzdWx0cy5wdXNoKGVsZW0pO3JldHVybiByZXN1bHRzO319fWVsc2UgaWYobWF0Y2hbMl0pe3B1c2guYXBwbHkocmVzdWx0cyxjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHNlbGVjdG9yKSk7cmV0dXJuIHJlc3VsdHM7fWVsc2UgaWYoKG09bWF0Y2hbM10pJiZzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUmJmNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSl7cHVzaC5hcHBseShyZXN1bHRzLGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShtKSk7cmV0dXJuIHJlc3VsdHM7fX0KaWYoc3VwcG9ydC5xc2EmJiFub25uYXRpdmVTZWxlY3RvckNhY2hlW3NlbGVjdG9yKyIgIl0mJighcmJ1Z2d5UVNBfHwhcmJ1Z2d5UVNBLnRlc3Qoc2VsZWN0b3IpKSYmKG5vZGVUeXBlIT09MXx8Y29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIT09Im9iamVjdCIpKXtuZXdTZWxlY3Rvcj1zZWxlY3RvcjtuZXdDb250ZXh0PWNvbnRleHQ7aWYobm9kZVR5cGU9PT0xJiYocmRlc2NlbmQudGVzdChzZWxlY3Rvcil8fHJjb21iaW5hdG9ycy50ZXN0KHNlbGVjdG9yKSkpe25ld0NvbnRleHQ9cnNpYmxpbmcudGVzdChzZWxlY3RvcikmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQ7aWYobmV3Q29udGV4dCE9PWNvbnRleHR8fCFzdXBwb3J0LnNjb3BlKXtpZigobmlkPWNvbnRleHQuZ2V0QXR0cmlidXRlKCJpZCIpKSl7bmlkPW5pZC5yZXBsYWNlKHJjc3Nlc2NhcGUsZmNzc2VzY2FwZSk7fWVsc2V7Y29udGV4dC5zZXRBdHRyaWJ1dGUoImlkIiwobmlkPWV4cGFuZG8pKTt9fQpncm91cHM9dG9rZW5pemUoc2VsZWN0b3IpO2k9Z3JvdXBzLmxlbmd0aDt3aGlsZShpLS0pe2dyb3Vwc1tpXT0obmlkPyIjIituaWQ6IjpzY29wZSIpKyIgIisKdG9TZWxlY3Rvcihncm91cHNbaV0pO30KbmV3U2VsZWN0b3I9Z3JvdXBzLmpvaW4oIiwiKTt9CnRyeXtwdXNoLmFwcGx5KHJlc3VsdHMsbmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKG5ld1NlbGVjdG9yKSk7cmV0dXJuIHJlc3VsdHM7fWNhdGNoKHFzYUVycm9yKXtub25uYXRpdmVTZWxlY3RvckNhY2hlKHNlbGVjdG9yLHRydWUpO31maW5hbGx5e2lmKG5pZD09PWV4cGFuZG8pe2NvbnRleHQucmVtb3ZlQXR0cmlidXRlKCJpZCIpO319fX19CnJldHVybiBzZWxlY3Qoc2VsZWN0b3IucmVwbGFjZShydHJpbSwiJDEiKSxjb250ZXh0LHJlc3VsdHMsc2VlZCk7fQpmdW5jdGlvbiBjcmVhdGVDYWNoZSgpe3ZhciBrZXlzPVtdO2Z1bmN0aW9uIGNhY2hlKGtleSx2YWx1ZSl7aWYoa2V5cy5wdXNoKGtleSsiICIpPkV4cHIuY2FjaGVMZW5ndGgpe2RlbGV0ZSBjYWNoZVtrZXlzLnNoaWZ0KCldO30KcmV0dXJuKGNhY2hlW2tleSsiICJdPXZhbHVlKTt9CnJldHVybiBjYWNoZTt9CmZ1bmN0aW9uIG1hcmtGdW5jdGlvbihmbil7Zm5bZXhwYW5kb109dHJ1ZTtyZXR1cm4gZm47fQpmdW5jdGlvbiBhc3NlcnQoZm4pe3ZhciBlbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJmaWVsZHNldCIpO3RyeXtyZXR1cm4hIWZuKGVsKTt9Y2F0Y2goZSl7cmV0dXJuIGZhbHNlO31maW5hbGx5e2lmKGVsLnBhcmVudE5vZGUpe2VsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZWwpO30KZWw9bnVsbDt9fQpmdW5jdGlvbiBhZGRIYW5kbGUoYXR0cnMsaGFuZGxlcil7dmFyIGFycj1hdHRycy5zcGxpdCgifCIpLGk9YXJyLmxlbmd0aDt3aGlsZShpLS0pe0V4cHIuYXR0ckhhbmRsZVthcnJbaV1dPWhhbmRsZXI7fX0KZnVuY3Rpb24gc2libGluZ0NoZWNrKGEsYil7dmFyIGN1cj1iJiZhLGRpZmY9Y3VyJiZhLm5vZGVUeXBlPT09MSYmYi5ub2RlVHlwZT09PTEmJmEuc291cmNlSW5kZXgtYi5zb3VyY2VJbmRleDtpZihkaWZmKXtyZXR1cm4gZGlmZjt9CmlmKGN1cil7d2hpbGUoKGN1cj1jdXIubmV4dFNpYmxpbmcpKXtpZihjdXI9PT1iKXtyZXR1cm4tMTt9fX0KcmV0dXJuIGE/MTotMTt9CmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKHR5cGUpe3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgbmFtZT1lbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG5hbWU9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT10eXBlO307fQpmdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8odHlwZSl7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBuYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4obmFtZT09PSJpbnB1dCJ8fG5hbWU9PT0iYnV0dG9uIikmJmVsZW0udHlwZT09PXR5cGU7fTt9CmZ1bmN0aW9uIGNyZWF0ZURpc2FibGVkUHNldWRvKGRpc2FibGVkKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7aWYoImZvcm0iaW4gZWxlbSl7aWYoZWxlbS5wYXJlbnROb2RlJiZlbGVtLmRpc2FibGVkPT09ZmFsc2Upe2lmKCJsYWJlbCJpbiBlbGVtKXtpZigibGFiZWwiaW4gZWxlbS5wYXJlbnROb2RlKXtyZXR1cm4gZWxlbS5wYXJlbnROb2RlLmRpc2FibGVkPT09ZGlzYWJsZWQ7fWVsc2V7cmV0dXJuIGVsZW0uZGlzYWJsZWQ9PT1kaXNhYmxlZDt9fQpyZXR1cm4gZWxlbS5pc0Rpc2FibGVkPT09ZGlzYWJsZWR8fGVsZW0uaXNEaXNhYmxlZCE9PSFkaXNhYmxlZCYmaW5EaXNhYmxlZEZpZWxkc2V0KGVsZW0pPT09ZGlzYWJsZWQ7fQpyZXR1cm4gZWxlbS5kaXNhYmxlZD09PWRpc2FibGVkO31lbHNlIGlmKCJsYWJlbCJpbiBlbGVtKXtyZXR1cm4gZWxlbS5kaXNhYmxlZD09PWRpc2FibGVkO30KcmV0dXJuIGZhbHNlO307fQpmdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZuKXtyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKGFyZ3VtZW50KXthcmd1bWVudD0rYXJndW1lbnQ7cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMpe3ZhciBqLG1hdGNoSW5kZXhlcz1mbihbXSxzZWVkLmxlbmd0aCxhcmd1bWVudCksaT1tYXRjaEluZGV4ZXMubGVuZ3RoO3doaWxlKGktLSl7aWYoc2VlZFsoaj1tYXRjaEluZGV4ZXNbaV0pXSl7c2VlZFtqXT0hKG1hdGNoZXNbal09c2VlZFtqXSk7fX19KTt9KTt9CmZ1bmN0aW9uIHRlc3RDb250ZXh0KGNvbnRleHQpe3JldHVybiBjb250ZXh0JiZ0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PSJ1bmRlZmluZWQiJiZjb250ZXh0O30Kc3VwcG9ydD1TaXp6bGUuc3VwcG9ydD17fTtpc1hNTD1TaXp6bGUuaXNYTUw9ZnVuY3Rpb24oZWxlbSl7dmFyIG5hbWVzcGFjZT1lbGVtJiZlbGVtLm5hbWVzcGFjZVVSSSxkb2NFbGVtPWVsZW0mJihlbGVtLm93bmVyRG9jdW1lbnR8fGVsZW0pLmRvY3VtZW50RWxlbWVudDtyZXR1cm4hcmh0bWwudGVzdChuYW1lc3BhY2V8fGRvY0VsZW0mJmRvY0VsZW0ubm9kZU5hbWV8fCJIVE1MIik7fTtzZXREb2N1bWVudD1TaXp6bGUuc2V0RG9jdW1lbnQ9ZnVuY3Rpb24obm9kZSl7dmFyIGhhc0NvbXBhcmUsc3ViV2luZG93LGRvYz1ub2RlP25vZGUub3duZXJEb2N1bWVudHx8bm9kZTpwcmVmZXJyZWREb2M7aWYoZG9jPT1kb2N1bWVudHx8ZG9jLm5vZGVUeXBlIT09OXx8IWRvYy5kb2N1bWVudEVsZW1lbnQpe3JldHVybiBkb2N1bWVudDt9CmRvY3VtZW50PWRvYztkb2NFbGVtPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtkb2N1bWVudElzSFRNTD0haXNYTUwoZG9jdW1lbnQpO2lmKHByZWZlcnJlZERvYyE9ZG9jdW1lbnQmJihzdWJXaW5kb3c9ZG9jdW1lbnQuZGVmYXVsdFZpZXcpJiZzdWJXaW5kb3cudG9wIT09c3ViV2luZG93KXtpZihzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lcil7c3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInVubG9hZCIsdW5sb2FkSGFuZGxlcixmYWxzZSk7fWVsc2UgaWYoc3ViV2luZG93LmF0dGFjaEV2ZW50KXtzdWJXaW5kb3cuYXR0YWNoRXZlbnQoIm9udW5sb2FkIix1bmxvYWRIYW5kbGVyKTt9fQpzdXBwb3J0LnNjb3BlPWFzc2VydChmdW5jdGlvbihlbCl7ZG9jRWxlbS5hcHBlbmRDaGlsZChlbCkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZGl2IikpO3JldHVybiB0eXBlb2YgZWwucXVlcnlTZWxlY3RvckFsbCE9PSJ1bmRlZmluZWQiJiYhZWwucXVlcnlTZWxlY3RvckFsbCgiOnNjb3BlIGZpZWxkc2V0IGRpdiIpLmxlbmd0aDt9KTtzdXBwb3J0LmF0dHJpYnV0ZXM9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5jbGFzc05hbWU9ImkiO3JldHVybiFlbC5nZXRBdHRyaWJ1dGUoImNsYXNzTmFtZSIpO30pO3N1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWU9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5hcHBlbmRDaGlsZChkb2N1bWVudC5jcmVhdGVDb21tZW50KCIiKSk7cmV0dXJuIWVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKCIqIikubGVuZ3RoO30pO3N1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZT1ybmF0aXZlLnRlc3QoZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSk7c3VwcG9ydC5nZXRCeUlkPWFzc2VydChmdW5jdGlvbihlbCl7ZG9jRWxlbS5hcHBlbmRDaGlsZChlbCkuaWQ9ZXhwYW5kbztyZXR1cm4hZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWV8fCFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZShleHBhbmRvKS5sZW5ndGg7fSk7aWYoc3VwcG9ydC5nZXRCeUlkKXtFeHByLmZpbHRlclsiSUQiXT1mdW5jdGlvbihpZCl7dmFyIGF0dHJJZD1pZC5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoImlkIik9PT1hdHRySWQ7fTt9O0V4cHIuZmluZFsiSUQiXT1mdW5jdGlvbihpZCxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCE9PSJ1bmRlZmluZWQiJiZkb2N1bWVudElzSFRNTCl7dmFyIGVsZW09Y29udGV4dC5nZXRFbGVtZW50QnlJZChpZCk7cmV0dXJuIGVsZW0/W2VsZW1dOltdO319O31lbHNle0V4cHIuZmlsdGVyWyJJRCJdPWZ1bmN0aW9uKGlkKXt2YXIgYXR0cklkPWlkLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSk7cmV0dXJuIGZ1bmN0aW9uKGVsZW0pe3ZhciBub2RlPXR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZU5vZGUhPT0idW5kZWZpbmVkIiYmZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCJpZCIpO3JldHVybiBub2RlJiZub2RlLnZhbHVlPT09YXR0cklkO307fTtFeHByLmZpbmRbIklEIl09ZnVuY3Rpb24oaWQsY29udGV4dCl7aWYodHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3ZhciBub2RlLGksZWxlbXMsZWxlbT1jb250ZXh0LmdldEVsZW1lbnRCeUlkKGlkKTtpZihlbGVtKXtub2RlPWVsZW0uZ2V0QXR0cmlidXRlTm9kZSgiaWQiKTtpZihub2RlJiZub2RlLnZhbHVlPT09aWQpe3JldHVybltlbGVtXTt9CmVsZW1zPWNvbnRleHQuZ2V0RWxlbWVudHNCeU5hbWUoaWQpO2k9MDt3aGlsZSgoZWxlbT1lbGVtc1tpKytdKSl7bm9kZT1lbGVtLmdldEF0dHJpYnV0ZU5vZGUoImlkIik7aWYobm9kZSYmbm9kZS52YWx1ZT09PWlkKXtyZXR1cm5bZWxlbV07fX19CnJldHVybltdO319O30KRXhwci5maW5kWyJUQUciXT1zdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lP2Z1bmN0aW9uKHRhZyxjb250ZXh0KXtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PSJ1bmRlZmluZWQiKXtyZXR1cm4gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWcpO31lbHNlIGlmKHN1cHBvcnQucXNhKXtyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHRhZyk7fX06ZnVuY3Rpb24odGFnLGNvbnRleHQpe3ZhciBlbGVtLHRtcD1bXSxpPTAscmVzdWx0cz1jb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHRhZyk7aWYodGFnPT09IioiKXt3aGlsZSgoZWxlbT1yZXN1bHRzW2krK10pKXtpZihlbGVtLm5vZGVUeXBlPT09MSl7dG1wLnB1c2goZWxlbSk7fX0KcmV0dXJuIHRtcDt9CnJldHVybiByZXN1bHRzO307RXhwci5maW5kWyJDTEFTUyJdPXN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSYmZnVuY3Rpb24oY2xhc3NOYW1lLGNvbnRleHQpe2lmKHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUhPT0idW5kZWZpbmVkIiYmZG9jdW1lbnRJc0hUTUwpe3JldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoY2xhc3NOYW1lKTt9fTtyYnVnZ3lNYXRjaGVzPVtdO3JidWdneVFTQT1bXTtpZigoc3VwcG9ydC5xc2E9cm5hdGl2ZS50ZXN0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwpKSl7YXNzZXJ0KGZ1bmN0aW9uKGVsKXt2YXIgaW5wdXQ7ZG9jRWxlbS5hcHBlbmRDaGlsZChlbCkuaW5uZXJIVE1MPSI8YSBpZD0nIitleHBhbmRvKyInPjwvYT4iKyI8c2VsZWN0IGlkPSciK2V4cGFuZG8rIi1cclxcJyBtc2FsbG93Y2FwdHVyZT0nJz4iKyI8b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PiI7aWYoZWwucXVlcnlTZWxlY3RvckFsbCgiW21zYWxsb3djYXB0dXJlXj0nJ10iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJbKl4kXT0iK3doaXRlc3BhY2UrIiooPzonJ3xcIlwiKSIpO30KaWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIltzZWxlY3RlZF0iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJcXFsiK3doaXRlc3BhY2UrIiooPzp2YWx1ZXwiK2Jvb2xlYW5zKyIpIik7fQppZighZWwucXVlcnlTZWxlY3RvckFsbCgiW2lkfj0iK2V4cGFuZG8rIi1dIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgifj0iKTt9CmlucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iik7aW5wdXQuc2V0QXR0cmlidXRlKCJuYW1lIiwiIik7ZWwuYXBwZW5kQ2hpbGQoaW5wdXQpO2lmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJbbmFtZT0nJ10iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJcXFsiK3doaXRlc3BhY2UrIipuYW1lIit3aGl0ZXNwYWNlKyIqPSIrCndoaXRlc3BhY2UrIiooPzonJ3xcIlwiKSIpO30KaWYoIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIjpjaGVja2VkIikubGVuZ3RoKXtyYnVnZ3lRU0EucHVzaCgiOmNoZWNrZWQiKTt9CmlmKCFlbC5xdWVyeVNlbGVjdG9yQWxsKCJhIyIrZXhwYW5kbysiKyoiKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCIuIy4rWyt+XSIpO30KZWwucXVlcnlTZWxlY3RvckFsbCgiXFxcZiIpO3JidWdneVFTQS5wdXNoKCJbXFxyXFxuXFxmXSIpO30pO2Fzc2VydChmdW5jdGlvbihlbCl7ZWwuaW5uZXJIVE1MPSI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPiIrIjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD4iO3ZhciBpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsImhpZGRlbiIpO2VsLmFwcGVuZENoaWxkKGlucHV0KS5zZXRBdHRyaWJ1dGUoIm5hbWUiLCJEIik7aWYoZWwucXVlcnlTZWxlY3RvckFsbCgiW25hbWU9ZF0iKS5sZW5ndGgpe3JidWdneVFTQS5wdXNoKCJuYW1lIit3aGl0ZXNwYWNlKyIqWypeJHwhfl0/PSIpO30KaWYoZWwucXVlcnlTZWxlY3RvckFsbCgiOmVuYWJsZWQiKS5sZW5ndGghPT0yKXtyYnVnZ3lRU0EucHVzaCgiOmVuYWJsZWQiLCI6ZGlzYWJsZWQiKTt9CmRvY0VsZW0uYXBwZW5kQ2hpbGQoZWwpLmRpc2FibGVkPXRydWU7aWYoZWwucXVlcnlTZWxlY3RvckFsbCgiOmRpc2FibGVkIikubGVuZ3RoIT09Mil7cmJ1Z2d5UVNBLnB1c2goIjplbmFibGVkIiwiOmRpc2FibGVkIik7fQplbC5xdWVyeVNlbGVjdG9yQWxsKCIqLDp4Iik7cmJ1Z2d5UVNBLnB1c2goIiwuKjoiKTt9KTt9CmlmKChzdXBwb3J0Lm1hdGNoZXNTZWxlY3Rvcj1ybmF0aXZlLnRlc3QoKG1hdGNoZXM9ZG9jRWxlbS5tYXRjaGVzfHxkb2NFbGVtLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8ZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3J8fGRvY0VsZW0ub01hdGNoZXNTZWxlY3Rvcnx8ZG9jRWxlbS5tc01hdGNoZXNTZWxlY3RvcikpKSl7YXNzZXJ0KGZ1bmN0aW9uKGVsKXtzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoPW1hdGNoZXMuY2FsbChlbCwiKiIpO21hdGNoZXMuY2FsbChlbCwiW3MhPScnXTp4Iik7cmJ1Z2d5TWF0Y2hlcy5wdXNoKCIhPSIscHNldWRvcyk7fSk7fQpyYnVnZ3lRU0E9cmJ1Z2d5UVNBLmxlbmd0aCYmbmV3IFJlZ0V4cChyYnVnZ3lRU0Euam9pbigifCIpKTtyYnVnZ3lNYXRjaGVzPXJidWdneU1hdGNoZXMubGVuZ3RoJiZuZXcgUmVnRXhwKHJidWdneU1hdGNoZXMuam9pbigifCIpKTtoYXNDb21wYXJlPXJuYXRpdmUudGVzdChkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKTtjb250YWlucz1oYXNDb21wYXJlfHxybmF0aXZlLnRlc3QoZG9jRWxlbS5jb250YWlucyk/ZnVuY3Rpb24oYSxiKXt2YXIgYWRvd249YS5ub2RlVHlwZT09PTk/YS5kb2N1bWVudEVsZW1lbnQ6YSxidXA9YiYmYi5wYXJlbnROb2RlO3JldHVybiBhPT09YnVwfHwhIShidXAmJmJ1cC5ub2RlVHlwZT09PTEmJihhZG93bi5jb250YWlucz9hZG93bi5jb250YWlucyhidXApOmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24mJmEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oYnVwKSYxNikpO306ZnVuY3Rpb24oYSxiKXtpZihiKXt3aGlsZSgoYj1iLnBhcmVudE5vZGUpKXtpZihiPT09YSl7cmV0dXJuIHRydWU7fX19CnJldHVybiBmYWxzZTt9O3NvcnRPcmRlcj1oYXNDb21wYXJlP2Z1bmN0aW9uKGEsYil7aWYoYT09PWIpe2hhc0R1cGxpY2F0ZT10cnVlO3JldHVybiAwO30KdmFyIGNvbXBhcmU9IWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24tIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247aWYoY29tcGFyZSl7cmV0dXJuIGNvbXBhcmU7fQpjb21wYXJlPShhLm93bmVyRG9jdW1lbnR8fGEpPT0oYi5vd25lckRvY3VtZW50fHxiKT9hLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGIpOjE7aWYoY29tcGFyZSYxfHwoIXN1cHBvcnQuc29ydERldGFjaGVkJiZiLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKGEpPT09Y29tcGFyZSkpe2lmKGE9PWRvY3VtZW50fHxhLm93bmVyRG9jdW1lbnQ9PXByZWZlcnJlZERvYyYmY29udGFpbnMocHJlZmVycmVkRG9jLGEpKXtyZXR1cm4tMTt9CmlmKGI9PWRvY3VtZW50fHxiLm93bmVyRG9jdW1lbnQ9PXByZWZlcnJlZERvYyYmY29udGFpbnMocHJlZmVycmVkRG9jLGIpKXtyZXR1cm4gMTt9CnJldHVybiBzb3J0SW5wdXQ/KGluZGV4T2Yoc29ydElucHV0LGEpLWluZGV4T2Yoc29ydElucHV0LGIpKTowO30KcmV0dXJuIGNvbXBhcmUmND8tMToxO306ZnVuY3Rpb24oYSxiKXtpZihhPT09Yil7aGFzRHVwbGljYXRlPXRydWU7cmV0dXJuIDA7fQp2YXIgY3VyLGk9MCxhdXA9YS5wYXJlbnROb2RlLGJ1cD1iLnBhcmVudE5vZGUsYXA9W2FdLGJwPVtiXTtpZighYXVwfHwhYnVwKXtyZXR1cm4gYT09ZG9jdW1lbnQ/LTE6Yj09ZG9jdW1lbnQ/MTphdXA/LTE6YnVwPzE6c29ydElucHV0PyhpbmRleE9mKHNvcnRJbnB1dCxhKS1pbmRleE9mKHNvcnRJbnB1dCxiKSk6MDt9ZWxzZSBpZihhdXA9PT1idXApe3JldHVybiBzaWJsaW5nQ2hlY2soYSxiKTt9CmN1cj1hO3doaWxlKChjdXI9Y3VyLnBhcmVudE5vZGUpKXthcC51bnNoaWZ0KGN1cik7fQpjdXI9Yjt3aGlsZSgoY3VyPWN1ci5wYXJlbnROb2RlKSl7YnAudW5zaGlmdChjdXIpO30Kd2hpbGUoYXBbaV09PT1icFtpXSl7aSsrO30KcmV0dXJuIGk/c2libGluZ0NoZWNrKGFwW2ldLGJwW2ldKTphcFtpXT09cHJlZmVycmVkRG9jPy0xOmJwW2ldPT1wcmVmZXJyZWREb2M/MTowO307cmV0dXJuIGRvY3VtZW50O307U2l6emxlLm1hdGNoZXM9ZnVuY3Rpb24oZXhwcixlbGVtZW50cyl7cmV0dXJuIFNpenpsZShleHByLG51bGwsbnVsbCxlbGVtZW50cyk7fTtTaXp6bGUubWF0Y2hlc1NlbGVjdG9yPWZ1bmN0aW9uKGVsZW0sZXhwcil7c2V0RG9jdW1lbnQoZWxlbSk7aWYoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3ImJmRvY3VtZW50SXNIVE1MJiYhbm9ubmF0aXZlU2VsZWN0b3JDYWNoZVtleHByKyIgIl0mJighcmJ1Z2d5TWF0Y2hlc3x8IXJidWdneU1hdGNoZXMudGVzdChleHByKSkmJighcmJ1Z2d5UVNBfHwhcmJ1Z2d5UVNBLnRlc3QoZXhwcikpKXt0cnl7dmFyIHJldD1tYXRjaGVzLmNhbGwoZWxlbSxleHByKTtpZihyZXR8fHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2h8fGVsZW0uZG9jdW1lbnQmJmVsZW0uZG9jdW1lbnQubm9kZVR5cGUhPT0xMSl7cmV0dXJuIHJldDt9fWNhdGNoKGUpe25vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUoZXhwcix0cnVlKTt9fQpyZXR1cm4gU2l6emxlKGV4cHIsZG9jdW1lbnQsbnVsbCxbZWxlbV0pLmxlbmd0aD4wO307U2l6emxlLmNvbnRhaW5zPWZ1bmN0aW9uKGNvbnRleHQsZWxlbSl7aWYoKGNvbnRleHQub3duZXJEb2N1bWVudHx8Y29udGV4dCkhPWRvY3VtZW50KXtzZXREb2N1bWVudChjb250ZXh0KTt9CnJldHVybiBjb250YWlucyhjb250ZXh0LGVsZW0pO307U2l6emxlLmF0dHI9ZnVuY3Rpb24oZWxlbSxuYW1lKXtpZigoZWxlbS5vd25lckRvY3VtZW50fHxlbGVtKSE9ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO30KdmFyIGZuPUV4cHIuYXR0ckhhbmRsZVtuYW1lLnRvTG93ZXJDYXNlKCldLHZhbD1mbiYmaGFzT3duLmNhbGwoRXhwci5hdHRySGFuZGxlLG5hbWUudG9Mb3dlckNhc2UoKSk/Zm4oZWxlbSxuYW1lLCFkb2N1bWVudElzSFRNTCk6dW5kZWZpbmVkO3JldHVybiB2YWwhPT11bmRlZmluZWQ/dmFsOnN1cHBvcnQuYXR0cmlidXRlc3x8IWRvY3VtZW50SXNIVE1MP2VsZW0uZ2V0QXR0cmlidXRlKG5hbWUpOih2YWw9ZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKG5hbWUpKSYmdmFsLnNwZWNpZmllZD92YWwudmFsdWU6bnVsbDt9O1NpenpsZS5lc2NhcGU9ZnVuY3Rpb24oc2VsKXtyZXR1cm4oc2VsKyIiKS5yZXBsYWNlKHJjc3Nlc2NhcGUsZmNzc2VzY2FwZSk7fTtTaXp6bGUuZXJyb3I9ZnVuY3Rpb24obXNnKXt0aHJvdyBuZXcgRXJyb3IoIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246ICIrbXNnKTt9O1NpenpsZS51bmlxdWVTb3J0PWZ1bmN0aW9uKHJlc3VsdHMpe3ZhciBlbGVtLGR1cGxpY2F0ZXM9W10saj0wLGk9MDtoYXNEdXBsaWNhdGU9IXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztzb3J0SW5wdXQ9IXN1cHBvcnQuc29ydFN0YWJsZSYmcmVzdWx0cy5zbGljZSgwKTtyZXN1bHRzLnNvcnQoc29ydE9yZGVyKTtpZihoYXNEdXBsaWNhdGUpe3doaWxlKChlbGVtPXJlc3VsdHNbaSsrXSkpe2lmKGVsZW09PT1yZXN1bHRzW2ldKXtqPWR1cGxpY2F0ZXMucHVzaChpKTt9fQp3aGlsZShqLS0pe3Jlc3VsdHMuc3BsaWNlKGR1cGxpY2F0ZXNbal0sMSk7fX0Kc29ydElucHV0PW51bGw7cmV0dXJuIHJlc3VsdHM7fTtnZXRUZXh0PVNpenpsZS5nZXRUZXh0PWZ1bmN0aW9uKGVsZW0pe3ZhciBub2RlLHJldD0iIixpPTAsbm9kZVR5cGU9ZWxlbS5ub2RlVHlwZTtpZighbm9kZVR5cGUpe3doaWxlKChub2RlPWVsZW1baSsrXSkpe3JldCs9Z2V0VGV4dChub2RlKTt9fWVsc2UgaWYobm9kZVR5cGU9PT0xfHxub2RlVHlwZT09PTl8fG5vZGVUeXBlPT09MTEpe2lmKHR5cGVvZiBlbGVtLnRleHRDb250ZW50PT09InN0cmluZyIpe3JldHVybiBlbGVtLnRleHRDb250ZW50O31lbHNle2ZvcihlbGVtPWVsZW0uZmlyc3RDaGlsZDtlbGVtO2VsZW09ZWxlbS5uZXh0U2libGluZyl7cmV0Kz1nZXRUZXh0KGVsZW0pO319fWVsc2UgaWYobm9kZVR5cGU9PT0zfHxub2RlVHlwZT09PTQpe3JldHVybiBlbGVtLm5vZGVWYWx1ZTt9CnJldHVybiByZXQ7fTtFeHByPVNpenpsZS5zZWxlY3RvcnM9e2NhY2hlTGVuZ3RoOjUwLGNyZWF0ZVBzZXVkbzptYXJrRnVuY3Rpb24sbWF0Y2g6bWF0Y2hFeHByLGF0dHJIYW5kbGU6e30sZmluZDp7fSxyZWxhdGl2ZTp7Ij4iOntkaXI6InBhcmVudE5vZGUiLGZpcnN0OnRydWV9LCIgIjp7ZGlyOiJwYXJlbnROb2RlIn0sIisiOntkaXI6InByZXZpb3VzU2libGluZyIsZmlyc3Q6dHJ1ZX0sIn4iOntkaXI6InByZXZpb3VzU2libGluZyJ9fSxwcmVGaWx0ZXI6eyJBVFRSIjpmdW5jdGlvbihtYXRjaCl7bWF0Y2hbMV09bWF0Y2hbMV0ucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKTttYXRjaFszXT0obWF0Y2hbM118fG1hdGNoWzRdfHxtYXRjaFs1XXx8IiIpLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSk7aWYobWF0Y2hbMl09PT0ifj0iKXttYXRjaFszXT0iICIrbWF0Y2hbM10rIiAiO30KcmV0dXJuIG1hdGNoLnNsaWNlKDAsNCk7fSwiQ0hJTEQiOmZ1bmN0aW9uKG1hdGNoKXttYXRjaFsxXT1tYXRjaFsxXS50b0xvd2VyQ2FzZSgpO2lmKG1hdGNoWzFdLnNsaWNlKDAsMyk9PT0ibnRoIil7aWYoIW1hdGNoWzNdKXtTaXp6bGUuZXJyb3IobWF0Y2hbMF0pO30KbWF0Y2hbNF09KyhtYXRjaFs0XT9tYXRjaFs1XSsobWF0Y2hbNl18fDEpOjIqKG1hdGNoWzNdPT09ImV2ZW4ifHxtYXRjaFszXT09PSJvZGQiKSk7bWF0Y2hbNV09KygobWF0Y2hbN10rbWF0Y2hbOF0pfHxtYXRjaFszXT09PSJvZGQiKTt9ZWxzZSBpZihtYXRjaFszXSl7U2l6emxlLmVycm9yKG1hdGNoWzBdKTt9CnJldHVybiBtYXRjaDt9LCJQU0VVRE8iOmZ1bmN0aW9uKG1hdGNoKXt2YXIgZXhjZXNzLHVucXVvdGVkPSFtYXRjaFs2XSYmbWF0Y2hbMl07aWYobWF0Y2hFeHByWyJDSElMRCJdLnRlc3QobWF0Y2hbMF0pKXtyZXR1cm4gbnVsbDt9CmlmKG1hdGNoWzNdKXttYXRjaFsyXT1tYXRjaFs0XXx8bWF0Y2hbNV18fCIiO31lbHNlIGlmKHVucXVvdGVkJiZycHNldWRvLnRlc3QodW5xdW90ZWQpJiYoZXhjZXNzPXRva2VuaXplKHVucXVvdGVkLHRydWUpKSYmKGV4Y2Vzcz11bnF1b3RlZC5pbmRleE9mKCIpIix1bnF1b3RlZC5sZW5ndGgtZXhjZXNzKS11bnF1b3RlZC5sZW5ndGgpKXttYXRjaFswXT1tYXRjaFswXS5zbGljZSgwLGV4Y2Vzcyk7bWF0Y2hbMl09dW5xdW90ZWQuc2xpY2UoMCxleGNlc3MpO30KcmV0dXJuIG1hdGNoLnNsaWNlKDAsMyk7fX0sZmlsdGVyOnsiVEFHIjpmdW5jdGlvbihub2RlTmFtZVNlbGVjdG9yKXt2YXIgbm9kZU5hbWU9bm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG5vZGVOYW1lU2VsZWN0b3I9PT0iKiI/ZnVuY3Rpb24oKXtyZXR1cm4gdHJ1ZTt9OmZ1bmN0aW9uKGVsZW0pe3JldHVybiBlbGVtLm5vZGVOYW1lJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1ub2RlTmFtZTt9O30sIkNMQVNTIjpmdW5jdGlvbihjbGFzc05hbWUpe3ZhciBwYXR0ZXJuPWNsYXNzQ2FjaGVbY2xhc3NOYW1lKyIgIl07cmV0dXJuIHBhdHRlcm58fChwYXR0ZXJuPW5ldyBSZWdFeHAoIihefCIrd2hpdGVzcGFjZSsiKSIrY2xhc3NOYW1lKyIoIit3aGl0ZXNwYWNlKyJ8JCkiKSkmJmNsYXNzQ2FjaGUoY2xhc3NOYW1lLGZ1bmN0aW9uKGVsZW0pe3JldHVybiBwYXR0ZXJuLnRlc3QodHlwZW9mIGVsZW0uY2xhc3NOYW1lPT09InN0cmluZyImJmVsZW0uY2xhc3NOYW1lfHx0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUhPT0idW5kZWZpbmVkIiYmZWxlbS5nZXRBdHRyaWJ1dGUoImNsYXNzIil8fCIiKTt9KTt9LCJBVFRSIjpmdW5jdGlvbihuYW1lLG9wZXJhdG9yLGNoZWNrKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7dmFyIHJlc3VsdD1TaXp6bGUuYXR0cihlbGVtLG5hbWUpO2lmKHJlc3VsdD09bnVsbCl7cmV0dXJuIG9wZXJhdG9yPT09IiE9Ijt9CmlmKCFvcGVyYXRvcil7cmV0dXJuIHRydWU7fQpyZXN1bHQrPSIiO3JldHVybiBvcGVyYXRvcj09PSI9Ij9yZXN1bHQ9PT1jaGVjazpvcGVyYXRvcj09PSIhPSI/cmVzdWx0IT09Y2hlY2s6b3BlcmF0b3I9PT0iXj0iP2NoZWNrJiZyZXN1bHQuaW5kZXhPZihjaGVjayk9PT0wOm9wZXJhdG9yPT09Iio9Ij9jaGVjayYmcmVzdWx0LmluZGV4T2YoY2hlY2spPi0xOm9wZXJhdG9yPT09IiQ9Ij9jaGVjayYmcmVzdWx0LnNsaWNlKC1jaGVjay5sZW5ndGgpPT09Y2hlY2s6b3BlcmF0b3I9PT0ifj0iPygiICIrcmVzdWx0LnJlcGxhY2UocndoaXRlc3BhY2UsIiAiKSsiICIpLmluZGV4T2YoY2hlY2spPi0xOm9wZXJhdG9yPT09Inw9Ij9yZXN1bHQ9PT1jaGVja3x8cmVzdWx0LnNsaWNlKDAsY2hlY2subGVuZ3RoKzEpPT09Y2hlY2srIi0iOmZhbHNlO307fSwiQ0hJTEQiOmZ1bmN0aW9uKHR5cGUsd2hhdCxfYXJndW1lbnQsZmlyc3QsbGFzdCl7dmFyIHNpbXBsZT10eXBlLnNsaWNlKDAsMykhPT0ibnRoIixmb3J3YXJkPXR5cGUuc2xpY2UoLTQpIT09Imxhc3QiLG9mVHlwZT13aGF0PT09Im9mLXR5cGUiO3JldHVybiBmaXJzdD09PTEmJmxhc3Q9PT0wP2Z1bmN0aW9uKGVsZW0pe3JldHVybiEhZWxlbS5wYXJlbnROb2RlO306ZnVuY3Rpb24oZWxlbSxfY29udGV4dCx4bWwpe3ZhciBjYWNoZSx1bmlxdWVDYWNoZSxvdXRlckNhY2hlLG5vZGUsbm9kZUluZGV4LHN0YXJ0LGRpcj1zaW1wbGUhPT1mb3J3YXJkPyJuZXh0U2libGluZyI6InByZXZpb3VzU2libGluZyIscGFyZW50PWVsZW0ucGFyZW50Tm9kZSxuYW1lPW9mVHlwZSYmZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLHVzZUNhY2hlPSF4bWwmJiFvZlR5cGUsZGlmZj1mYWxzZTtpZihwYXJlbnQpe2lmKHNpbXBsZSl7d2hpbGUoZGlyKXtub2RlPWVsZW07d2hpbGUoKG5vZGU9bm9kZVtkaXJdKSl7aWYob2ZUeXBlP25vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW5hbWU6bm9kZS5ub2RlVHlwZT09PTEpe3JldHVybiBmYWxzZTt9fQpzdGFydD1kaXI9dHlwZT09PSJvbmx5IiYmIXN0YXJ0JiYibmV4dFNpYmxpbmciO30KcmV0dXJuIHRydWU7fQpzdGFydD1bZm9yd2FyZD9wYXJlbnQuZmlyc3RDaGlsZDpwYXJlbnQubGFzdENoaWxkXTtpZihmb3J3YXJkJiZ1c2VDYWNoZSl7bm9kZT1wYXJlbnQ7b3V0ZXJDYWNoZT1ub2RlW2V4cGFuZG9dfHwobm9kZVtleHBhbmRvXT17fSk7dW5pcXVlQ2FjaGU9b3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXXx8KG91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF09e30pO2NhY2hlPXVuaXF1ZUNhY2hlW3R5cGVdfHxbXTtub2RlSW5kZXg9Y2FjaGVbMF09PT1kaXJydW5zJiZjYWNoZVsxXTtkaWZmPW5vZGVJbmRleCYmY2FjaGVbMl07bm9kZT1ub2RlSW5kZXgmJnBhcmVudC5jaGlsZE5vZGVzW25vZGVJbmRleF07d2hpbGUoKG5vZGU9Kytub2RlSW5kZXgmJm5vZGUmJm5vZGVbZGlyXXx8KGRpZmY9bm9kZUluZGV4PTApfHxzdGFydC5wb3AoKSkpe2lmKG5vZGUubm9kZVR5cGU9PT0xJiYrK2RpZmYmJm5vZGU9PT1lbGVtKXt1bmlxdWVDYWNoZVt0eXBlXT1bZGlycnVucyxub2RlSW5kZXgsZGlmZl07YnJlYWs7fX19ZWxzZXtpZih1c2VDYWNoZSl7bm9kZT1lbGVtO291dGVyQ2FjaGU9bm9kZVtleHBhbmRvXXx8KG5vZGVbZXhwYW5kb109e30pO3VuaXF1ZUNhY2hlPW91dGVyQ2FjaGVbbm9kZS51bmlxdWVJRF18fChvdXRlckNhY2hlW25vZGUudW5pcXVlSURdPXt9KTtjYWNoZT11bmlxdWVDYWNoZVt0eXBlXXx8W107bm9kZUluZGV4PWNhY2hlWzBdPT09ZGlycnVucyYmY2FjaGVbMV07ZGlmZj1ub2RlSW5kZXg7fQppZihkaWZmPT09ZmFsc2Upe3doaWxlKChub2RlPSsrbm9kZUluZGV4JiZub2RlJiZub2RlW2Rpcl18fChkaWZmPW5vZGVJbmRleD0wKXx8c3RhcnQucG9wKCkpKXtpZigob2ZUeXBlP25vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKT09PW5hbWU6bm9kZS5ub2RlVHlwZT09PTEpJiYrK2RpZmYpe2lmKHVzZUNhY2hlKXtvdXRlckNhY2hlPW5vZGVbZXhwYW5kb118fChub2RlW2V4cGFuZG9dPXt9KTt1bmlxdWVDYWNoZT1vdXRlckNhY2hlW25vZGUudW5pcXVlSURdfHwob3V0ZXJDYWNoZVtub2RlLnVuaXF1ZUlEXT17fSk7dW5pcXVlQ2FjaGVbdHlwZV09W2RpcnJ1bnMsZGlmZl07fQppZihub2RlPT09ZWxlbSl7YnJlYWs7fX19fX0KZGlmZi09bGFzdDtyZXR1cm4gZGlmZj09PWZpcnN0fHwoZGlmZiVmaXJzdD09PTAmJmRpZmYgLyBmaXJzdD49MCk7fX07fSwiUFNFVURPIjpmdW5jdGlvbihwc2V1ZG8sYXJndW1lbnQpe3ZhciBhcmdzLGZuPUV4cHIucHNldWRvc1twc2V1ZG9dfHxFeHByLnNldEZpbHRlcnNbcHNldWRvLnRvTG93ZXJDYXNlKCldfHxTaXp6bGUuZXJyb3IoInVuc3VwcG9ydGVkIHBzZXVkbzogIitwc2V1ZG8pO2lmKGZuW2V4cGFuZG9dKXtyZXR1cm4gZm4oYXJndW1lbnQpO30KaWYoZm4ubGVuZ3RoPjEpe2FyZ3M9W3BzZXVkbyxwc2V1ZG8sIiIsYXJndW1lbnRdO3JldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkocHNldWRvLnRvTG93ZXJDYXNlKCkpP21hcmtGdW5jdGlvbihmdW5jdGlvbihzZWVkLG1hdGNoZXMpe3ZhciBpZHgsbWF0Y2hlZD1mbihzZWVkLGFyZ3VtZW50KSxpPW1hdGNoZWQubGVuZ3RoO3doaWxlKGktLSl7aWR4PWluZGV4T2Yoc2VlZCxtYXRjaGVkW2ldKTtzZWVkW2lkeF09IShtYXRjaGVzW2lkeF09bWF0Y2hlZFtpXSk7fX0pOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBmbihlbGVtLDAsYXJncyk7fTt9CnJldHVybiBmbjt9fSxwc2V1ZG9zOnsibm90IjptYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBpbnB1dD1bXSxyZXN1bHRzPVtdLG1hdGNoZXI9Y29tcGlsZShzZWxlY3Rvci5yZXBsYWNlKHJ0cmltLCIkMSIpKTtyZXR1cm4gbWF0Y2hlcltleHBhbmRvXT9tYXJrRnVuY3Rpb24oZnVuY3Rpb24oc2VlZCxtYXRjaGVzLF9jb250ZXh0LHhtbCl7dmFyIGVsZW0sdW5tYXRjaGVkPW1hdGNoZXIoc2VlZCxudWxsLHhtbCxbXSksaT1zZWVkLmxlbmd0aDt3aGlsZShpLS0pe2lmKChlbGVtPXVubWF0Y2hlZFtpXSkpe3NlZWRbaV09IShtYXRjaGVzW2ldPWVsZW0pO319fSk6ZnVuY3Rpb24oZWxlbSxfY29udGV4dCx4bWwpe2lucHV0WzBdPWVsZW07bWF0Y2hlcihpbnB1dCxudWxsLHhtbCxyZXN1bHRzKTtpbnB1dFswXT1udWxsO3JldHVybiFyZXN1bHRzLnBvcCgpO307fSksImhhcyI6bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHNlbGVjdG9yKXtyZXR1cm4gZnVuY3Rpb24oZWxlbSl7cmV0dXJuIFNpenpsZShzZWxlY3RvcixlbGVtKS5sZW5ndGg+MDt9O30pLCJjb250YWlucyI6bWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHRleHQpe3RleHQ9dGV4dC5yZXBsYWNlKHJ1bmVzY2FwZSxmdW5lc2NhcGUpO3JldHVybiBmdW5jdGlvbihlbGVtKXtyZXR1cm4oZWxlbS50ZXh0Q29udGVudHx8Z2V0VGV4dChlbGVtKSkuaW5kZXhPZih0ZXh0KT4tMTt9O30pLCJsYW5nIjptYXJrRnVuY3Rpb24oZnVuY3Rpb24obGFuZyl7aWYoIXJpZGVudGlmaWVyLnRlc3QobGFuZ3x8IiIpKXtTaXp6bGUuZXJyb3IoInVuc3VwcG9ydGVkIGxhbmc6ICIrbGFuZyk7fQpsYW5nPWxhbmcucmVwbGFjZShydW5lc2NhcGUsZnVuZXNjYXBlKS50b0xvd2VyQ2FzZSgpO3JldHVybiBmdW5jdGlvbihlbGVtKXt2YXIgZWxlbUxhbmc7ZG97aWYoKGVsZW1MYW5nPWRvY3VtZW50SXNIVE1MP2VsZW0ubGFuZzplbGVtLmdldEF0dHJpYnV0ZSgieG1sOmxhbmciKXx8ZWxlbS5nZXRBdHRyaWJ1dGUoImxhbmciKSkpe2VsZW1MYW5nPWVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7cmV0dXJuIGVsZW1MYW5nPT09bGFuZ3x8ZWxlbUxhbmcuaW5kZXhPZihsYW5nKyItIik9PT0wO319d2hpbGUoKGVsZW09ZWxlbS5wYXJlbnROb2RlKSYmZWxlbS5ub2RlVHlwZT09PTEpO3JldHVybiBmYWxzZTt9O30pLCJ0YXJnZXQiOmZ1bmN0aW9uKGVsZW0pe3ZhciBoYXNoPXdpbmRvdy5sb2NhdGlvbiYmd2luZG93LmxvY2F0aW9uLmhhc2g7cmV0dXJuIGhhc2gmJmhhc2guc2xpY2UoMSk9PT1lbGVtLmlkO30sInJvb3QiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBlbGVtPT09ZG9jRWxlbTt9LCJmb2N1cyI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGVsZW09PT1kb2N1bWVudC5hY3RpdmVFbGVtZW50JiYoIWRvY3VtZW50Lmhhc0ZvY3VzfHxkb2N1bWVudC5oYXNGb2N1cygpKSYmISEoZWxlbS50eXBlfHxlbGVtLmhyZWZ8fH5lbGVtLnRhYkluZGV4KTt9LCJlbmFibGVkIjpjcmVhdGVEaXNhYmxlZFBzZXVkbyhmYWxzZSksImRpc2FibGVkIjpjcmVhdGVEaXNhYmxlZFBzZXVkbyh0cnVlKSwiY2hlY2tlZCI6ZnVuY3Rpb24oZWxlbSl7dmFyIG5vZGVOYW1lPWVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtyZXR1cm4obm9kZU5hbWU9PT0iaW5wdXQiJiYhIWVsZW0uY2hlY2tlZCl8fChub2RlTmFtZT09PSJvcHRpb24iJiYhIWVsZW0uc2VsZWN0ZWQpO30sInNlbGVjdGVkIjpmdW5jdGlvbihlbGVtKXtpZihlbGVtLnBhcmVudE5vZGUpe2VsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O30KcmV0dXJuIGVsZW0uc2VsZWN0ZWQ9PT10cnVlO30sImVtcHR5IjpmdW5jdGlvbihlbGVtKXtmb3IoZWxlbT1lbGVtLmZpcnN0Q2hpbGQ7ZWxlbTtlbGVtPWVsZW0ubmV4dFNpYmxpbmcpe2lmKGVsZW0ubm9kZVR5cGU8Nil7cmV0dXJuIGZhbHNlO319CnJldHVybiB0cnVlO30sInBhcmVudCI6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIUV4cHIucHNldWRvc1siZW1wdHkiXShlbGVtKTt9LCJoZWFkZXIiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiByaGVhZGVyLnRlc3QoZWxlbS5ub2RlTmFtZSk7fSwiaW5wdXQiOmZ1bmN0aW9uKGVsZW0pe3JldHVybiByaW5wdXRzLnRlc3QoZWxlbS5ub2RlTmFtZSk7fSwiYnV0dG9uIjpmdW5jdGlvbihlbGVtKXt2YXIgbmFtZT1lbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7cmV0dXJuIG5hbWU9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT0iYnV0dG9uInx8bmFtZT09PSJidXR0b24iO30sInRleHQiOmZ1bmN0aW9uKGVsZW0pe3ZhciBhdHRyO3JldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiJiZlbGVtLnR5cGU9PT0idGV4dCImJigoYXR0cj1lbGVtLmdldEF0dHJpYnV0ZSgidHlwZSIpKT09bnVsbHx8YXR0ci50b0xvd2VyQ2FzZSgpPT09InRleHQiKTt9LCJmaXJzdCI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpe3JldHVyblswXTt9KSwibGFzdCI6Y3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbihfbWF0Y2hJbmRleGVzLGxlbmd0aCl7cmV0dXJuW2xlbmd0aC0xXTt9KSwiZXEiOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oX21hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3JldHVyblthcmd1bWVudDwwP2FyZ3VtZW50K2xlbmd0aDphcmd1bWVudF07fSksImV2ZW4iOmNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24obWF0Y2hJbmRleGVzLGxlbmd0aCl7dmFyIGk9MDtmb3IoO2k8bGVuZ3RoO2krPTIpe21hdGNoSW5kZXhlcy5wdXNoKGkpO30KcmV0dXJuIG1hdGNoSW5kZXhlczt9KSwib2RkIjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgpe3ZhciBpPTE7Zm9yKDtpPGxlbmd0aDtpKz0yKXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSksImx0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3ZhciBpPWFyZ3VtZW50PDA/YXJndW1lbnQrbGVuZ3RoOmFyZ3VtZW50Pmxlbmd0aD9sZW5ndGg6YXJndW1lbnQ7Zm9yKDstLWk+PTA7KXttYXRjaEluZGV4ZXMucHVzaChpKTt9CnJldHVybiBtYXRjaEluZGV4ZXM7fSksImd0IjpjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKG1hdGNoSW5kZXhlcyxsZW5ndGgsYXJndW1lbnQpe3ZhciBpPWFyZ3VtZW50PDA/YXJndW1lbnQrbGVuZ3RoOmFyZ3VtZW50O2Zvcig7KytpPGxlbmd0aDspe21hdGNoSW5kZXhlcy5wdXNoKGkpO30KcmV0dXJuIG1hdGNoSW5kZXhlczt9KX19O0V4cHIucHNldWRvc1sibnRoIl09RXhwci5wc2V1ZG9zWyJlcSJdO2ZvcihpIGlue3JhZGlvOnRydWUsY2hlY2tib3g6dHJ1ZSxmaWxlOnRydWUscGFzc3dvcmQ6dHJ1ZSxpbWFnZTp0cnVlfSl7RXhwci5wc2V1ZG9zW2ldPWNyZWF0ZUlucHV0UHNldWRvKGkpO30KZm9yKGkgaW57c3VibWl0OnRydWUscmVzZXQ6dHJ1ZX0pe0V4cHIucHNldWRvc1tpXT1jcmVhdGVCdXR0b25Qc2V1ZG8oaSk7fQpmdW5jdGlvbiBzZXRGaWx0ZXJzKCl7fQpzZXRGaWx0ZXJzLnByb3RvdHlwZT1FeHByLmZpbHRlcnM9RXhwci5wc2V1ZG9zO0V4cHIuc2V0RmlsdGVycz1uZXcgc2V0RmlsdGVycygpO3Rva2VuaXplPVNpenpsZS50b2tlbml6ZT1mdW5jdGlvbihzZWxlY3RvcixwYXJzZU9ubHkpe3ZhciBtYXRjaGVkLG1hdGNoLHRva2Vucyx0eXBlLHNvRmFyLGdyb3VwcyxwcmVGaWx0ZXJzLGNhY2hlZD10b2tlbkNhY2hlW3NlbGVjdG9yKyIgIl07aWYoY2FjaGVkKXtyZXR1cm4gcGFyc2VPbmx5PzA6Y2FjaGVkLnNsaWNlKDApO30Kc29GYXI9c2VsZWN0b3I7Z3JvdXBzPVtdO3ByZUZpbHRlcnM9RXhwci5wcmVGaWx0ZXI7d2hpbGUoc29GYXIpe2lmKCFtYXRjaGVkfHwobWF0Y2g9cmNvbW1hLmV4ZWMoc29GYXIpKSl7aWYobWF0Y2gpe3NvRmFyPXNvRmFyLnNsaWNlKG1hdGNoWzBdLmxlbmd0aCl8fHNvRmFyO30KZ3JvdXBzLnB1c2goKHRva2Vucz1bXSkpO30KbWF0Y2hlZD1mYWxzZTtpZigobWF0Y2g9cmNvbWJpbmF0b3JzLmV4ZWMoc29GYXIpKSl7bWF0Y2hlZD1tYXRjaC5zaGlmdCgpO3Rva2Vucy5wdXNoKHt2YWx1ZTptYXRjaGVkLHR5cGU6bWF0Y2hbMF0ucmVwbGFjZShydHJpbSwiICIpfSk7c29GYXI9c29GYXIuc2xpY2UobWF0Y2hlZC5sZW5ndGgpO30KZm9yKHR5cGUgaW4gRXhwci5maWx0ZXIpe2lmKChtYXRjaD1tYXRjaEV4cHJbdHlwZV0uZXhlYyhzb0ZhcikpJiYoIXByZUZpbHRlcnNbdHlwZV18fChtYXRjaD1wcmVGaWx0ZXJzW3R5cGVdKG1hdGNoKSkpKXttYXRjaGVkPW1hdGNoLnNoaWZ0KCk7dG9rZW5zLnB1c2goe3ZhbHVlOm1hdGNoZWQsdHlwZTp0eXBlLG1hdGNoZXM6bWF0Y2h9KTtzb0Zhcj1zb0Zhci5zbGljZShtYXRjaGVkLmxlbmd0aCk7fX0KaWYoIW1hdGNoZWQpe2JyZWFrO319CnJldHVybiBwYXJzZU9ubHk/c29GYXIubGVuZ3RoOnNvRmFyP1NpenpsZS5lcnJvcihzZWxlY3Rvcik6dG9rZW5DYWNoZShzZWxlY3Rvcixncm91cHMpLnNsaWNlKDApO307ZnVuY3Rpb24gdG9TZWxlY3Rvcih0b2tlbnMpe3ZhciBpPTAsbGVuPXRva2Vucy5sZW5ndGgsc2VsZWN0b3I9IiI7Zm9yKDtpPGxlbjtpKyspe3NlbGVjdG9yKz10b2tlbnNbaV0udmFsdWU7fQpyZXR1cm4gc2VsZWN0b3I7fQpmdW5jdGlvbiBhZGRDb21iaW5hdG9yKG1hdGNoZXIsY29tYmluYXRvcixiYXNlKXt2YXIgZGlyPWNvbWJpbmF0b3IuZGlyLHNraXA9Y29tYmluYXRvci5uZXh0LGtleT1za2lwfHxkaXIsY2hlY2tOb25FbGVtZW50cz1iYXNlJiZrZXk9PT0icGFyZW50Tm9kZSIsZG9uZU5hbWU9ZG9uZSsrO3JldHVybiBjb21iaW5hdG9yLmZpcnN0P2Z1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3doaWxlKChlbGVtPWVsZW1bZGlyXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xfHxjaGVja05vbkVsZW1lbnRzKXtyZXR1cm4gbWF0Y2hlcihlbGVtLGNvbnRleHQseG1sKTt9fQpyZXR1cm4gZmFsc2U7fTpmdW5jdGlvbihlbGVtLGNvbnRleHQseG1sKXt2YXIgb2xkQ2FjaGUsdW5pcXVlQ2FjaGUsb3V0ZXJDYWNoZSxuZXdDYWNoZT1bZGlycnVucyxkb25lTmFtZV07aWYoeG1sKXt3aGlsZSgoZWxlbT1lbGVtW2Rpcl0pKXtpZihlbGVtLm5vZGVUeXBlPT09MXx8Y2hlY2tOb25FbGVtZW50cyl7aWYobWF0Y2hlcihlbGVtLGNvbnRleHQseG1sKSl7cmV0dXJuIHRydWU7fX19fWVsc2V7d2hpbGUoKGVsZW09ZWxlbVtkaXJdKSl7aWYoZWxlbS5ub2RlVHlwZT09PTF8fGNoZWNrTm9uRWxlbWVudHMpe291dGVyQ2FjaGU9ZWxlbVtleHBhbmRvXXx8KGVsZW1bZXhwYW5kb109e30pO3VuaXF1ZUNhY2hlPW91dGVyQ2FjaGVbZWxlbS51bmlxdWVJRF18fChvdXRlckNhY2hlW2VsZW0udW5pcXVlSURdPXt9KTtpZihza2lwJiZza2lwPT09ZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpKXtlbGVtPWVsZW1bZGlyXXx8ZWxlbTt9ZWxzZSBpZigob2xkQ2FjaGU9dW5pcXVlQ2FjaGVba2V5XSkmJm9sZENhY2hlWzBdPT09ZGlycnVucyYmb2xkQ2FjaGVbMV09PT1kb25lTmFtZSl7cmV0dXJuKG5ld0NhY2hlWzJdPW9sZENhY2hlWzJdKTt9ZWxzZXt1bmlxdWVDYWNoZVtrZXldPW5ld0NhY2hlO2lmKChuZXdDYWNoZVsyXT1tYXRjaGVyKGVsZW0sY29udGV4dCx4bWwpKSl7cmV0dXJuIHRydWU7fX19fX0KcmV0dXJuIGZhbHNlO307fQpmdW5jdGlvbiBlbGVtZW50TWF0Y2hlcihtYXRjaGVycyl7cmV0dXJuIG1hdGNoZXJzLmxlbmd0aD4xP2Z1bmN0aW9uKGVsZW0sY29udGV4dCx4bWwpe3ZhciBpPW1hdGNoZXJzLmxlbmd0aDt3aGlsZShpLS0pe2lmKCFtYXRjaGVyc1tpXShlbGVtLGNvbnRleHQseG1sKSl7cmV0dXJuIGZhbHNlO319CnJldHVybiB0cnVlO306bWF0Y2hlcnNbMF07fQpmdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKHNlbGVjdG9yLGNvbnRleHRzLHJlc3VsdHMpe3ZhciBpPTAsbGVuPWNvbnRleHRzLmxlbmd0aDtmb3IoO2k8bGVuO2krKyl7U2l6emxlKHNlbGVjdG9yLGNvbnRleHRzW2ldLHJlc3VsdHMpO30KcmV0dXJuIHJlc3VsdHM7fQpmdW5jdGlvbiBjb25kZW5zZSh1bm1hdGNoZWQsbWFwLGZpbHRlcixjb250ZXh0LHhtbCl7dmFyIGVsZW0sbmV3VW5tYXRjaGVkPVtdLGk9MCxsZW49dW5tYXRjaGVkLmxlbmd0aCxtYXBwZWQ9bWFwIT1udWxsO2Zvcig7aTxsZW47aSsrKXtpZigoZWxlbT11bm1hdGNoZWRbaV0pKXtpZighZmlsdGVyfHxmaWx0ZXIoZWxlbSxjb250ZXh0LHhtbCkpe25ld1VubWF0Y2hlZC5wdXNoKGVsZW0pO2lmKG1hcHBlZCl7bWFwLnB1c2goaSk7fX19fQpyZXR1cm4gbmV3VW5tYXRjaGVkO30KZnVuY3Rpb24gc2V0TWF0Y2hlcihwcmVGaWx0ZXIsc2VsZWN0b3IsbWF0Y2hlcixwb3N0RmlsdGVyLHBvc3RGaW5kZXIscG9zdFNlbGVjdG9yKXtpZihwb3N0RmlsdGVyJiYhcG9zdEZpbHRlcltleHBhbmRvXSl7cG9zdEZpbHRlcj1zZXRNYXRjaGVyKHBvc3RGaWx0ZXIpO30KaWYocG9zdEZpbmRlciYmIXBvc3RGaW5kZXJbZXhwYW5kb10pe3Bvc3RGaW5kZXI9c2V0TWF0Y2hlcihwb3N0RmluZGVyLHBvc3RTZWxlY3Rvcik7fQpyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKHNlZWQscmVzdWx0cyxjb250ZXh0LHhtbCl7dmFyIHRlbXAsaSxlbGVtLHByZU1hcD1bXSxwb3N0TWFwPVtdLHByZWV4aXN0aW5nPXJlc3VsdHMubGVuZ3RoLGVsZW1zPXNlZWR8fG11bHRpcGxlQ29udGV4dHMoc2VsZWN0b3J8fCIqIixjb250ZXh0Lm5vZGVUeXBlP1tjb250ZXh0XTpjb250ZXh0LFtdKSxtYXRjaGVySW49cHJlRmlsdGVyJiYoc2VlZHx8IXNlbGVjdG9yKT9jb25kZW5zZShlbGVtcyxwcmVNYXAscHJlRmlsdGVyLGNvbnRleHQseG1sKTplbGVtcyxtYXRjaGVyT3V0PW1hdGNoZXI/cG9zdEZpbmRlcnx8KHNlZWQ/cHJlRmlsdGVyOnByZWV4aXN0aW5nfHxwb3N0RmlsdGVyKT9bXTpyZXN1bHRzOm1hdGNoZXJJbjtpZihtYXRjaGVyKXttYXRjaGVyKG1hdGNoZXJJbixtYXRjaGVyT3V0LGNvbnRleHQseG1sKTt9CmlmKHBvc3RGaWx0ZXIpe3RlbXA9Y29uZGVuc2UobWF0Y2hlck91dCxwb3N0TWFwKTtwb3N0RmlsdGVyKHRlbXAsW10sY29udGV4dCx4bWwpO2k9dGVtcC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoZWxlbT10ZW1wW2ldKSl7bWF0Y2hlck91dFtwb3N0TWFwW2ldXT0hKG1hdGNoZXJJbltwb3N0TWFwW2ldXT1lbGVtKTt9fX0KaWYoc2VlZCl7aWYocG9zdEZpbmRlcnx8cHJlRmlsdGVyKXtpZihwb3N0RmluZGVyKXt0ZW1wPVtdO2k9bWF0Y2hlck91dC5sZW5ndGg7d2hpbGUoaS0tKXtpZigoZWxlbT1tYXRjaGVyT3V0W2ldKSl7dGVtcC5wdXNoKChtYXRjaGVySW5baV09ZWxlbSkpO319CnBvc3RGaW5kZXIobnVsbCwobWF0Y2hlck91dD1bXSksdGVtcCx4bWwpO30KaT1tYXRjaGVyT3V0Lmxlbmd0aDt3aGlsZShpLS0pe2lmKChlbGVtPW1hdGNoZXJPdXRbaV0pJiYodGVtcD1wb3N0RmluZGVyP2luZGV4T2Yoc2VlZCxlbGVtKTpwcmVNYXBbaV0pPi0xKXtzZWVkW3RlbXBdPSEocmVzdWx0c1t0ZW1wXT1lbGVtKTt9fX19ZWxzZXttYXRjaGVyT3V0PWNvbmRlbnNlKG1hdGNoZXJPdXQ9PT1yZXN1bHRzP21hdGNoZXJPdXQuc3BsaWNlKHByZWV4aXN0aW5nLG1hdGNoZXJPdXQubGVuZ3RoKTptYXRjaGVyT3V0KTtpZihwb3N0RmluZGVyKXtwb3N0RmluZGVyKG51bGwscmVzdWx0cyxtYXRjaGVyT3V0LHhtbCk7fWVsc2V7cHVzaC5hcHBseShyZXN1bHRzLG1hdGNoZXJPdXQpO319fSk7fQpmdW5jdGlvbiBtYXRjaGVyRnJvbVRva2Vucyh0b2tlbnMpe3ZhciBjaGVja0NvbnRleHQsbWF0Y2hlcixqLGxlbj10b2tlbnMubGVuZ3RoLGxlYWRpbmdSZWxhdGl2ZT1FeHByLnJlbGF0aXZlW3Rva2Vuc1swXS50eXBlXSxpbXBsaWNpdFJlbGF0aXZlPWxlYWRpbmdSZWxhdGl2ZXx8RXhwci5yZWxhdGl2ZVsiICJdLGk9bGVhZGluZ1JlbGF0aXZlPzE6MCxtYXRjaENvbnRleHQ9YWRkQ29tYmluYXRvcihmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbT09PWNoZWNrQ29udGV4dDt9LGltcGxpY2l0UmVsYXRpdmUsdHJ1ZSksbWF0Y2hBbnlDb250ZXh0PWFkZENvbWJpbmF0b3IoZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGluZGV4T2YoY2hlY2tDb250ZXh0LGVsZW0pPi0xO30saW1wbGljaXRSZWxhdGl2ZSx0cnVlKSxtYXRjaGVycz1bZnVuY3Rpb24oZWxlbSxjb250ZXh0LHhtbCl7dmFyIHJldD0oIWxlYWRpbmdSZWxhdGl2ZSYmKHhtbHx8Y29udGV4dCE9PW91dGVybW9zdENvbnRleHQpKXx8KChjaGVja0NvbnRleHQ9Y29udGV4dCkubm9kZVR5cGU/bWF0Y2hDb250ZXh0KGVsZW0sY29udGV4dCx4bWwpOm1hdGNoQW55Q29udGV4dChlbGVtLGNvbnRleHQseG1sKSk7Y2hlY2tDb250ZXh0PW51bGw7cmV0dXJuIHJldDt9XTtmb3IoO2k8bGVuO2krKyl7aWYoKG1hdGNoZXI9RXhwci5yZWxhdGl2ZVt0b2tlbnNbaV0udHlwZV0pKXttYXRjaGVycz1bYWRkQ29tYmluYXRvcihlbGVtZW50TWF0Y2hlcihtYXRjaGVycyksbWF0Y2hlcildO31lbHNle21hdGNoZXI9RXhwci5maWx0ZXJbdG9rZW5zW2ldLnR5cGVdLmFwcGx5KG51bGwsdG9rZW5zW2ldLm1hdGNoZXMpO2lmKG1hdGNoZXJbZXhwYW5kb10pe2o9KytpO2Zvcig7ajxsZW47aisrKXtpZihFeHByLnJlbGF0aXZlW3Rva2Vuc1tqXS50eXBlXSl7YnJlYWs7fX0KcmV0dXJuIHNldE1hdGNoZXIoaT4xJiZlbGVtZW50TWF0Y2hlcihtYXRjaGVycyksaT4xJiZ0b1NlbGVjdG9yKHRva2Vucy5zbGljZSgwLGktMSkuY29uY2F0KHt2YWx1ZTp0b2tlbnNbaS0yXS50eXBlPT09IiAiPyIqIjoiIn0pKS5yZXBsYWNlKHJ0cmltLCIkMSIpLG1hdGNoZXIsaTxqJiZtYXRjaGVyRnJvbVRva2Vucyh0b2tlbnMuc2xpY2UoaSxqKSksajxsZW4mJm1hdGNoZXJGcm9tVG9rZW5zKCh0b2tlbnM9dG9rZW5zLnNsaWNlKGopKSksajxsZW4mJnRvU2VsZWN0b3IodG9rZW5zKSk7fQptYXRjaGVycy5wdXNoKG1hdGNoZXIpO319CnJldHVybiBlbGVtZW50TWF0Y2hlcihtYXRjaGVycyk7fQpmdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoZWxlbWVudE1hdGNoZXJzLHNldE1hdGNoZXJzKXt2YXIgYnlTZXQ9c2V0TWF0Y2hlcnMubGVuZ3RoPjAsYnlFbGVtZW50PWVsZW1lbnRNYXRjaGVycy5sZW5ndGg+MCxzdXBlck1hdGNoZXI9ZnVuY3Rpb24oc2VlZCxjb250ZXh0LHhtbCxyZXN1bHRzLG91dGVybW9zdCl7dmFyIGVsZW0saixtYXRjaGVyLG1hdGNoZWRDb3VudD0wLGk9IjAiLHVubWF0Y2hlZD1zZWVkJiZbXSxzZXRNYXRjaGVkPVtdLGNvbnRleHRCYWNrdXA9b3V0ZXJtb3N0Q29udGV4dCxlbGVtcz1zZWVkfHxieUVsZW1lbnQmJkV4cHIuZmluZFsiVEFHIl0oIioiLG91dGVybW9zdCksZGlycnVuc1VuaXF1ZT0oZGlycnVucys9Y29udGV4dEJhY2t1cD09bnVsbD8xOk1hdGgucmFuZG9tKCl8fDAuMSksbGVuPWVsZW1zLmxlbmd0aDtpZihvdXRlcm1vc3Qpe291dGVybW9zdENvbnRleHQ9Y29udGV4dD09ZG9jdW1lbnR8fGNvbnRleHR8fG91dGVybW9zdDt9CmZvcig7aSE9PWxlbiYmKGVsZW09ZWxlbXNbaV0pIT1udWxsO2krKyl7aWYoYnlFbGVtZW50JiZlbGVtKXtqPTA7aWYoIWNvbnRleHQmJmVsZW0ub3duZXJEb2N1bWVudCE9ZG9jdW1lbnQpe3NldERvY3VtZW50KGVsZW0pO3htbD0hZG9jdW1lbnRJc0hUTUw7fQp3aGlsZSgobWF0Y2hlcj1lbGVtZW50TWF0Y2hlcnNbaisrXSkpe2lmKG1hdGNoZXIoZWxlbSxjb250ZXh0fHxkb2N1bWVudCx4bWwpKXtyZXN1bHRzLnB1c2goZWxlbSk7YnJlYWs7fX0KaWYob3V0ZXJtb3N0KXtkaXJydW5zPWRpcnJ1bnNVbmlxdWU7fX0KaWYoYnlTZXQpe2lmKChlbGVtPSFtYXRjaGVyJiZlbGVtKSl7bWF0Y2hlZENvdW50LS07fQppZihzZWVkKXt1bm1hdGNoZWQucHVzaChlbGVtKTt9fX0KbWF0Y2hlZENvdW50Kz1pO2lmKGJ5U2V0JiZpIT09bWF0Y2hlZENvdW50KXtqPTA7d2hpbGUoKG1hdGNoZXI9c2V0TWF0Y2hlcnNbaisrXSkpe21hdGNoZXIodW5tYXRjaGVkLHNldE1hdGNoZWQsY29udGV4dCx4bWwpO30KaWYoc2VlZCl7aWYobWF0Y2hlZENvdW50PjApe3doaWxlKGktLSl7aWYoISh1bm1hdGNoZWRbaV18fHNldE1hdGNoZWRbaV0pKXtzZXRNYXRjaGVkW2ldPXBvcC5jYWxsKHJlc3VsdHMpO319fQpzZXRNYXRjaGVkPWNvbmRlbnNlKHNldE1hdGNoZWQpO30KcHVzaC5hcHBseShyZXN1bHRzLHNldE1hdGNoZWQpO2lmKG91dGVybW9zdCYmIXNlZWQmJnNldE1hdGNoZWQubGVuZ3RoPjAmJihtYXRjaGVkQ291bnQrc2V0TWF0Y2hlcnMubGVuZ3RoKT4xKXtTaXp6bGUudW5pcXVlU29ydChyZXN1bHRzKTt9fQppZihvdXRlcm1vc3Qpe2RpcnJ1bnM9ZGlycnVuc1VuaXF1ZTtvdXRlcm1vc3RDb250ZXh0PWNvbnRleHRCYWNrdXA7fQpyZXR1cm4gdW5tYXRjaGVkO307cmV0dXJuIGJ5U2V0P21hcmtGdW5jdGlvbihzdXBlck1hdGNoZXIpOnN1cGVyTWF0Y2hlcjt9CmNvbXBpbGU9U2l6emxlLmNvbXBpbGU9ZnVuY3Rpb24oc2VsZWN0b3IsbWF0Y2gpe3ZhciBpLHNldE1hdGNoZXJzPVtdLGVsZW1lbnRNYXRjaGVycz1bXSxjYWNoZWQ9Y29tcGlsZXJDYWNoZVtzZWxlY3RvcisiICJdO2lmKCFjYWNoZWQpe2lmKCFtYXRjaCl7bWF0Y2g9dG9rZW5pemUoc2VsZWN0b3IpO30KaT1tYXRjaC5sZW5ndGg7d2hpbGUoaS0tKXtjYWNoZWQ9bWF0Y2hlckZyb21Ub2tlbnMobWF0Y2hbaV0pO2lmKGNhY2hlZFtleHBhbmRvXSl7c2V0TWF0Y2hlcnMucHVzaChjYWNoZWQpO31lbHNle2VsZW1lbnRNYXRjaGVycy5wdXNoKGNhY2hlZCk7fX0KY2FjaGVkPWNvbXBpbGVyQ2FjaGUoc2VsZWN0b3IsbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKGVsZW1lbnRNYXRjaGVycyxzZXRNYXRjaGVycykpO2NhY2hlZC5zZWxlY3Rvcj1zZWxlY3Rvcjt9CnJldHVybiBjYWNoZWQ7fTtzZWxlY3Q9U2l6emxlLnNlbGVjdD1mdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0LHJlc3VsdHMsc2VlZCl7dmFyIGksdG9rZW5zLHRva2VuLHR5cGUsZmluZCxjb21waWxlZD10eXBlb2Ygc2VsZWN0b3I9PT0iZnVuY3Rpb24iJiZzZWxlY3RvcixtYXRjaD0hc2VlZCYmdG9rZW5pemUoKHNlbGVjdG9yPWNvbXBpbGVkLnNlbGVjdG9yfHxzZWxlY3RvcikpO3Jlc3VsdHM9cmVzdWx0c3x8W107aWYobWF0Y2gubGVuZ3RoPT09MSl7dG9rZW5zPW1hdGNoWzBdPW1hdGNoWzBdLnNsaWNlKDApO2lmKHRva2Vucy5sZW5ndGg+MiYmKHRva2VuPXRva2Vuc1swXSkudHlwZT09PSJJRCImJmNvbnRleHQubm9kZVR5cGU9PT05JiZkb2N1bWVudElzSFRNTCYmRXhwci5yZWxhdGl2ZVt0b2tlbnNbMV0udHlwZV0pe2NvbnRleHQ9KEV4cHIuZmluZFsiSUQiXSh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSksY29udGV4dCl8fFtdKVswXTtpZighY29udGV4dCl7cmV0dXJuIHJlc3VsdHM7fWVsc2UgaWYoY29tcGlsZWQpe2NvbnRleHQ9Y29udGV4dC5wYXJlbnROb2RlO30Kc2VsZWN0b3I9c2VsZWN0b3Iuc2xpY2UodG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoKTt9Cmk9bWF0Y2hFeHByWyJuZWVkc0NvbnRleHQiXS50ZXN0KHNlbGVjdG9yKT8wOnRva2Vucy5sZW5ndGg7d2hpbGUoaS0tKXt0b2tlbj10b2tlbnNbaV07aWYoRXhwci5yZWxhdGl2ZVsodHlwZT10b2tlbi50eXBlKV0pe2JyZWFrO30KaWYoKGZpbmQ9RXhwci5maW5kW3R5cGVdKSl7aWYoKHNlZWQ9ZmluZCh0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLGZ1bmVzY2FwZSkscnNpYmxpbmcudGVzdCh0b2tlbnNbMF0udHlwZSkmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpKSl7dG9rZW5zLnNwbGljZShpLDEpO3NlbGVjdG9yPXNlZWQubGVuZ3RoJiZ0b1NlbGVjdG9yKHRva2Vucyk7aWYoIXNlbGVjdG9yKXtwdXNoLmFwcGx5KHJlc3VsdHMsc2VlZCk7cmV0dXJuIHJlc3VsdHM7fQpicmVhazt9fX19Cihjb21waWxlZHx8Y29tcGlsZShzZWxlY3RvcixtYXRjaCkpKHNlZWQsY29udGV4dCwhZG9jdW1lbnRJc0hUTUwscmVzdWx0cywhY29udGV4dHx8cnNpYmxpbmcudGVzdChzZWxlY3RvcikmJnRlc3RDb250ZXh0KGNvbnRleHQucGFyZW50Tm9kZSl8fGNvbnRleHQpO3JldHVybiByZXN1bHRzO307c3VwcG9ydC5zb3J0U3RhYmxlPWV4cGFuZG8uc3BsaXQoIiIpLnNvcnQoc29ydE9yZGVyKS5qb2luKCIiKT09PWV4cGFuZG87c3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzPSEhaGFzRHVwbGljYXRlO3NldERvY3VtZW50KCk7c3VwcG9ydC5zb3J0RGV0YWNoZWQ9YXNzZXJ0KGZ1bmN0aW9uKGVsKXtyZXR1cm4gZWwuY29tcGFyZURvY3VtZW50UG9zaXRpb24oZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiZmllbGRzZXQiKSkmMTt9KTtpZighYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxhIGhyZWY9JyMnPjwvYT4iO3JldHVybiBlbC5maXJzdENoaWxkLmdldEF0dHJpYnV0ZSgiaHJlZiIpPT09IiMiO30pKXthZGRIYW5kbGUoInR5cGV8aHJlZnxoZWlnaHR8d2lkdGgiLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7aWYoIWlzWE1MKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSxuYW1lLnRvTG93ZXJDYXNlKCk9PT0idHlwZSI/MToyKTt9fSk7fQppZighc3VwcG9ydC5hdHRyaWJ1dGVzfHwhYXNzZXJ0KGZ1bmN0aW9uKGVsKXtlbC5pbm5lckhUTUw9IjxpbnB1dC8+IjtlbC5maXJzdENoaWxkLnNldEF0dHJpYnV0ZSgidmFsdWUiLCIiKTtyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT0iIjt9KSl7YWRkSGFuZGxlKCJ2YWx1ZSIsZnVuY3Rpb24oZWxlbSxfbmFtZSxpc1hNTCl7aWYoIWlzWE1MJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT0iaW5wdXQiKXtyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7fX0pO30KaWYoIWFzc2VydChmdW5jdGlvbihlbCl7cmV0dXJuIGVsLmdldEF0dHJpYnV0ZSgiZGlzYWJsZWQiKT09bnVsbDt9KSl7YWRkSGFuZGxlKGJvb2xlYW5zLGZ1bmN0aW9uKGVsZW0sbmFtZSxpc1hNTCl7dmFyIHZhbDtpZighaXNYTUwpe3JldHVybiBlbGVtW25hbWVdPT09dHJ1ZT9uYW1lLnRvTG93ZXJDYXNlKCk6KHZhbD1lbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpJiZ2YWwuc3BlY2lmaWVkP3ZhbC52YWx1ZTpudWxsO319KTt9CnJldHVybiBTaXp6bGU7fSkod2luZG93KTtqUXVlcnkuZmluZD1TaXp6bGU7alF1ZXJ5LmV4cHI9U2l6emxlLnNlbGVjdG9ycztqUXVlcnkuZXhwclsiOiJdPWpRdWVyeS5leHByLnBzZXVkb3M7alF1ZXJ5LnVuaXF1ZVNvcnQ9alF1ZXJ5LnVuaXF1ZT1TaXp6bGUudW5pcXVlU29ydDtqUXVlcnkudGV4dD1TaXp6bGUuZ2V0VGV4dDtqUXVlcnkuaXNYTUxEb2M9U2l6emxlLmlzWE1MO2pRdWVyeS5jb250YWlucz1TaXp6bGUuY29udGFpbnM7alF1ZXJ5LmVzY2FwZVNlbGVjdG9yPVNpenpsZS5lc2NhcGU7dmFyIGRpcj1mdW5jdGlvbihlbGVtLGRpcix1bnRpbCl7dmFyIG1hdGNoZWQ9W10sdHJ1bmNhdGU9dW50aWwhPT11bmRlZmluZWQ7d2hpbGUoKGVsZW09ZWxlbVtkaXJdKSYmZWxlbS5ub2RlVHlwZSE9PTkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xKXtpZih0cnVuY2F0ZSYmalF1ZXJ5KGVsZW0pLmlzKHVudGlsKSl7YnJlYWs7fQptYXRjaGVkLnB1c2goZWxlbSk7fX0KcmV0dXJuIG1hdGNoZWQ7fTt2YXIgc2libGluZ3M9ZnVuY3Rpb24obixlbGVtKXt2YXIgbWF0Y2hlZD1bXTtmb3IoO247bj1uLm5leHRTaWJsaW5nKXtpZihuLm5vZGVUeXBlPT09MSYmbiE9PWVsZW0pe21hdGNoZWQucHVzaChuKTt9fQpyZXR1cm4gbWF0Y2hlZDt9O3ZhciBybmVlZHNDb250ZXh0PWpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dDtmdW5jdGlvbiBub2RlTmFtZShlbGVtLG5hbWUpe3JldHVybiBlbGVtLm5vZGVOYW1lJiZlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk9PT1uYW1lLnRvTG93ZXJDYXNlKCk7fQp2YXIgcnNpbmdsZVRhZz0oL148KFthLXpdW15cL1wwPjpceDIwXHRcclxuXGZdKilbXHgyMFx0XHJcblxmXSpcLz8+KD86PFwvXDE+fCkkL2kpO2Z1bmN0aW9uIHdpbm5vdyhlbGVtZW50cyxxdWFsaWZpZXIsbm90KXtpZihpc0Z1bmN0aW9uKHF1YWxpZmllcikpe3JldHVybiBqUXVlcnkuZ3JlcChlbGVtZW50cyxmdW5jdGlvbihlbGVtLGkpe3JldHVybiEhcXVhbGlmaWVyLmNhbGwoZWxlbSxpLGVsZW0pIT09bm90O30pO30KaWYocXVhbGlmaWVyLm5vZGVUeXBlKXtyZXR1cm4galF1ZXJ5LmdyZXAoZWxlbWVudHMsZnVuY3Rpb24oZWxlbSl7cmV0dXJuKGVsZW09PT1xdWFsaWZpZXIpIT09bm90O30pO30KaWYodHlwZW9mIHF1YWxpZmllciE9PSJzdHJpbmciKXtyZXR1cm4galF1ZXJ5LmdyZXAoZWxlbWVudHMsZnVuY3Rpb24oZWxlbSl7cmV0dXJuKGluZGV4T2YuY2FsbChxdWFsaWZpZXIsZWxlbSk+LTEpIT09bm90O30pO30KcmV0dXJuIGpRdWVyeS5maWx0ZXIocXVhbGlmaWVyLGVsZW1lbnRzLG5vdCk7fQpqUXVlcnkuZmlsdGVyPWZ1bmN0aW9uKGV4cHIsZWxlbXMsbm90KXt2YXIgZWxlbT1lbGVtc1swXTtpZihub3Qpe2V4cHI9Ijpub3QoIitleHByKyIpIjt9CmlmKGVsZW1zLmxlbmd0aD09PTEmJmVsZW0ubm9kZVR5cGU9PT0xKXtyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGVsZW0sZXhwcik/W2VsZW1dOltdO30KcmV0dXJuIGpRdWVyeS5maW5kLm1hdGNoZXMoZXhwcixqUXVlcnkuZ3JlcChlbGVtcyxmdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5ub2RlVHlwZT09PTE7fSkpO307alF1ZXJ5LmZuLmV4dGVuZCh7ZmluZDpmdW5jdGlvbihzZWxlY3Rvcil7dmFyIGkscmV0LGxlbj10aGlzLmxlbmd0aCxzZWxmPXRoaXM7aWYodHlwZW9mIHNlbGVjdG9yIT09InN0cmluZyIpe3JldHVybiB0aGlzLnB1c2hTdGFjayhqUXVlcnkoc2VsZWN0b3IpLmZpbHRlcihmdW5jdGlvbigpe2ZvcihpPTA7aTxsZW47aSsrKXtpZihqUXVlcnkuY29udGFpbnMoc2VsZltpXSx0aGlzKSl7cmV0dXJuIHRydWU7fX19KSk7fQpyZXQ9dGhpcy5wdXNoU3RhY2soW10pO2ZvcihpPTA7aTxsZW47aSsrKXtqUXVlcnkuZmluZChzZWxlY3RvcixzZWxmW2ldLHJldCk7fQpyZXR1cm4gbGVuPjE/alF1ZXJ5LnVuaXF1ZVNvcnQocmV0KTpyZXQ7fSxmaWx0ZXI6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiB0aGlzLnB1c2hTdGFjayh3aW5ub3codGhpcyxzZWxlY3Rvcnx8W10sZmFsc2UpKTt9LG5vdDpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHRoaXMucHVzaFN0YWNrKHdpbm5vdyh0aGlzLHNlbGVjdG9yfHxbXSx0cnVlKSk7fSxpczpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuISF3aW5ub3codGhpcyx0eXBlb2Ygc2VsZWN0b3I9PT0ic3RyaW5nIiYmcm5lZWRzQ29udGV4dC50ZXN0KHNlbGVjdG9yKT9qUXVlcnkoc2VsZWN0b3IpOnNlbGVjdG9yfHxbXSxmYWxzZSkubGVuZ3RoO319KTt2YXIgcm9vdGpRdWVyeSxycXVpY2tFeHByPS9eKD86XHMqKDxbXHdcV10rPilbXj5dKnwjKFtcdy1dKykpJC8saW5pdD1qUXVlcnkuZm4uaW5pdD1mdW5jdGlvbihzZWxlY3Rvcixjb250ZXh0LHJvb3Qpe3ZhciBtYXRjaCxlbGVtO2lmKCFzZWxlY3Rvcil7cmV0dXJuIHRoaXM7fQpyb290PXJvb3R8fHJvb3RqUXVlcnk7aWYodHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe2lmKHNlbGVjdG9yWzBdPT09IjwiJiZzZWxlY3RvcltzZWxlY3Rvci5sZW5ndGgtMV09PT0iPiImJnNlbGVjdG9yLmxlbmd0aD49Myl7bWF0Y2g9W251bGwsc2VsZWN0b3IsbnVsbF07fWVsc2V7bWF0Y2g9cnF1aWNrRXhwci5leGVjKHNlbGVjdG9yKTt9CmlmKG1hdGNoJiYobWF0Y2hbMV18fCFjb250ZXh0KSl7aWYobWF0Y2hbMV0pe2NvbnRleHQ9Y29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeT9jb250ZXh0WzBdOmNvbnRleHQ7alF1ZXJ5Lm1lcmdlKHRoaXMsalF1ZXJ5LnBhcnNlSFRNTChtYXRjaFsxXSxjb250ZXh0JiZjb250ZXh0Lm5vZGVUeXBlP2NvbnRleHQub3duZXJEb2N1bWVudHx8Y29udGV4dDpkb2N1bWVudCx0cnVlKSk7aWYocnNpbmdsZVRhZy50ZXN0KG1hdGNoWzFdKSYmalF1ZXJ5LmlzUGxhaW5PYmplY3QoY29udGV4dCkpe2ZvcihtYXRjaCBpbiBjb250ZXh0KXtpZihpc0Z1bmN0aW9uKHRoaXNbbWF0Y2hdKSl7dGhpc1ttYXRjaF0oY29udGV4dFttYXRjaF0pO31lbHNle3RoaXMuYXR0cihtYXRjaCxjb250ZXh0W21hdGNoXSk7fX19CnJldHVybiB0aGlzO31lbHNle2VsZW09ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQobWF0Y2hbMl0pO2lmKGVsZW0pe3RoaXNbMF09ZWxlbTt0aGlzLmxlbmd0aD0xO30KcmV0dXJuIHRoaXM7fX1lbHNlIGlmKCFjb250ZXh0fHxjb250ZXh0LmpxdWVyeSl7cmV0dXJuKGNvbnRleHR8fHJvb3QpLmZpbmQoc2VsZWN0b3IpO31lbHNle3JldHVybiB0aGlzLmNvbnN0cnVjdG9yKGNvbnRleHQpLmZpbmQoc2VsZWN0b3IpO319ZWxzZSBpZihzZWxlY3Rvci5ub2RlVHlwZSl7dGhpc1swXT1zZWxlY3Rvcjt0aGlzLmxlbmd0aD0xO3JldHVybiB0aGlzO31lbHNlIGlmKGlzRnVuY3Rpb24oc2VsZWN0b3IpKXtyZXR1cm4gcm9vdC5yZWFkeSE9PXVuZGVmaW5lZD9yb290LnJlYWR5KHNlbGVjdG9yKTpzZWxlY3RvcihqUXVlcnkpO30KcmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoc2VsZWN0b3IsdGhpcyk7fTtpbml0LnByb3RvdHlwZT1qUXVlcnkuZm47cm9vdGpRdWVyeT1qUXVlcnkoZG9jdW1lbnQpO3ZhciBycGFyZW50c3ByZXY9L14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sZ3VhcmFudGVlZFVuaXF1ZT17Y2hpbGRyZW46dHJ1ZSxjb250ZW50czp0cnVlLG5leHQ6dHJ1ZSxwcmV2OnRydWV9O2pRdWVyeS5mbi5leHRlbmQoe2hhczpmdW5jdGlvbih0YXJnZXQpe3ZhciB0YXJnZXRzPWpRdWVyeSh0YXJnZXQsdGhpcyksbD10YXJnZXRzLmxlbmd0aDtyZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24oKXt2YXIgaT0wO2Zvcig7aTxsO2krKyl7aWYoalF1ZXJ5LmNvbnRhaW5zKHRoaXMsdGFyZ2V0c1tpXSkpe3JldHVybiB0cnVlO319fSk7fSxjbG9zZXN0OmZ1bmN0aW9uKHNlbGVjdG9ycyxjb250ZXh0KXt2YXIgY3VyLGk9MCxsPXRoaXMubGVuZ3RoLG1hdGNoZWQ9W10sdGFyZ2V0cz10eXBlb2Ygc2VsZWN0b3JzIT09InN0cmluZyImJmpRdWVyeShzZWxlY3RvcnMpO2lmKCFybmVlZHNDb250ZXh0LnRlc3Qoc2VsZWN0b3JzKSl7Zm9yKDtpPGw7aSsrKXtmb3IoY3VyPXRoaXNbaV07Y3VyJiZjdXIhPT1jb250ZXh0O2N1cj1jdXIucGFyZW50Tm9kZSl7aWYoY3VyLm5vZGVUeXBlPDExJiYodGFyZ2V0cz90YXJnZXRzLmluZGV4KGN1cik+LTE6Y3VyLm5vZGVUeXBlPT09MSYmalF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGN1cixzZWxlY3RvcnMpKSl7bWF0Y2hlZC5wdXNoKGN1cik7YnJlYWs7fX19fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWF0Y2hlZC5sZW5ndGg+MT9qUXVlcnkudW5pcXVlU29ydChtYXRjaGVkKTptYXRjaGVkKTt9LGluZGV4OmZ1bmN0aW9uKGVsZW0pe2lmKCFlbGVtKXtyZXR1cm4odGhpc1swXSYmdGhpc1swXS5wYXJlbnROb2RlKT90aGlzLmZpcnN0KCkucHJldkFsbCgpLmxlbmd0aDotMTt9CmlmKHR5cGVvZiBlbGVtPT09InN0cmluZyIpe3JldHVybiBpbmRleE9mLmNhbGwoalF1ZXJ5KGVsZW0pLHRoaXNbMF0pO30KcmV0dXJuIGluZGV4T2YuY2FsbCh0aGlzLGVsZW0uanF1ZXJ5P2VsZW1bMF06ZWxlbSk7fSxhZGQ6ZnVuY3Rpb24oc2VsZWN0b3IsY29udGV4dCl7cmV0dXJuIHRoaXMucHVzaFN0YWNrKGpRdWVyeS51bmlxdWVTb3J0KGpRdWVyeS5tZXJnZSh0aGlzLmdldCgpLGpRdWVyeShzZWxlY3Rvcixjb250ZXh0KSkpKTt9LGFkZEJhY2s6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiB0aGlzLmFkZChzZWxlY3Rvcj09bnVsbD90aGlzLnByZXZPYmplY3Q6dGhpcy5wcmV2T2JqZWN0LmZpbHRlcihzZWxlY3RvcikpO319KTtmdW5jdGlvbiBzaWJsaW5nKGN1cixkaXIpe3doaWxlKChjdXI9Y3VyW2Rpcl0pJiZjdXIubm9kZVR5cGUhPT0xKXt9CnJldHVybiBjdXI7fQpqUXVlcnkuZWFjaCh7cGFyZW50OmZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlO3JldHVybiBwYXJlbnQmJnBhcmVudC5ub2RlVHlwZSE9PTExP3BhcmVudDpudWxsO30scGFyZW50czpmdW5jdGlvbihlbGVtKXtyZXR1cm4gZGlyKGVsZW0sInBhcmVudE5vZGUiKTt9LHBhcmVudHNVbnRpbDpmdW5jdGlvbihlbGVtLF9pLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sInBhcmVudE5vZGUiLHVudGlsKTt9LG5leHQ6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmcoZWxlbSwibmV4dFNpYmxpbmciKTt9LHByZXY6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIHNpYmxpbmcoZWxlbSwicHJldmlvdXNTaWJsaW5nIik7fSxuZXh0QWxsOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkaXIoZWxlbSwibmV4dFNpYmxpbmciKTt9LHByZXZBbGw6ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIGRpcihlbGVtLCJwcmV2aW91c1NpYmxpbmciKTt9LG5leHRVbnRpbDpmdW5jdGlvbihlbGVtLF9pLHVudGlsKXtyZXR1cm4gZGlyKGVsZW0sIm5leHRTaWJsaW5nIix1bnRpbCk7fSxwcmV2VW50aWw6ZnVuY3Rpb24oZWxlbSxfaSx1bnRpbCl7cmV0dXJuIGRpcihlbGVtLCJwcmV2aW91c1NpYmxpbmciLHVudGlsKTt9LHNpYmxpbmdzOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5ncygoZWxlbS5wYXJlbnROb2RlfHx7fSkuZmlyc3RDaGlsZCxlbGVtKTt9LGNoaWxkcmVuOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBzaWJsaW5ncyhlbGVtLmZpcnN0Q2hpbGQpO30sY29udGVudHM6ZnVuY3Rpb24oZWxlbSl7aWYoZWxlbS5jb250ZW50RG9jdW1lbnQhPW51bGwmJmdldFByb3RvKGVsZW0uY29udGVudERvY3VtZW50KSl7cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50O30KaWYobm9kZU5hbWUoZWxlbSwidGVtcGxhdGUiKSl7ZWxlbT1lbGVtLmNvbnRlbnR8fGVsZW07fQpyZXR1cm4galF1ZXJ5Lm1lcmdlKFtdLGVsZW0uY2hpbGROb2Rlcyk7fX0sZnVuY3Rpb24obmFtZSxmbil7alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHVudGlsLHNlbGVjdG9yKXt2YXIgbWF0Y2hlZD1qUXVlcnkubWFwKHRoaXMsZm4sdW50aWwpO2lmKG5hbWUuc2xpY2UoLTUpIT09IlVudGlsIil7c2VsZWN0b3I9dW50aWw7fQppZihzZWxlY3RvciYmdHlwZW9mIHNlbGVjdG9yPT09InN0cmluZyIpe21hdGNoZWQ9alF1ZXJ5LmZpbHRlcihzZWxlY3RvcixtYXRjaGVkKTt9CmlmKHRoaXMubGVuZ3RoPjEpe2lmKCFndWFyYW50ZWVkVW5pcXVlW25hbWVdKXtqUXVlcnkudW5pcXVlU29ydChtYXRjaGVkKTt9CmlmKHJwYXJlbnRzcHJldi50ZXN0KG5hbWUpKXttYXRjaGVkLnJldmVyc2UoKTt9fQpyZXR1cm4gdGhpcy5wdXNoU3RhY2sobWF0Y2hlZCk7fTt9KTt2YXIgcm5vdGh0bWx3aGl0ZT0oL1teXHgyMFx0XHJcblxmXSsvZyk7ZnVuY3Rpb24gY3JlYXRlT3B0aW9ucyhvcHRpb25zKXt2YXIgb2JqZWN0PXt9O2pRdWVyeS5lYWNoKG9wdGlvbnMubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdLGZ1bmN0aW9uKF8sZmxhZyl7b2JqZWN0W2ZsYWddPXRydWU7fSk7cmV0dXJuIG9iamVjdDt9CmpRdWVyeS5DYWxsYmFja3M9ZnVuY3Rpb24ob3B0aW9ucyl7b3B0aW9ucz10eXBlb2Ygb3B0aW9ucz09PSJzdHJpbmciP2NyZWF0ZU9wdGlvbnMob3B0aW9ucyk6alF1ZXJ5LmV4dGVuZCh7fSxvcHRpb25zKTt2YXIKZmlyaW5nLG1lbW9yeSxmaXJlZCxsb2NrZWQsbGlzdD1bXSxxdWV1ZT1bXSxmaXJpbmdJbmRleD0tMSxmaXJlPWZ1bmN0aW9uKCl7bG9ja2VkPWxvY2tlZHx8b3B0aW9ucy5vbmNlO2ZpcmVkPWZpcmluZz10cnVlO2Zvcig7cXVldWUubGVuZ3RoO2ZpcmluZ0luZGV4PS0xKXttZW1vcnk9cXVldWUuc2hpZnQoKTt3aGlsZSgrK2ZpcmluZ0luZGV4PGxpc3QubGVuZ3RoKXtpZihsaXN0W2ZpcmluZ0luZGV4XS5hcHBseShtZW1vcnlbMF0sbWVtb3J5WzFdKT09PWZhbHNlJiZvcHRpb25zLnN0b3BPbkZhbHNlKXtmaXJpbmdJbmRleD1saXN0Lmxlbmd0aDttZW1vcnk9ZmFsc2U7fX19CmlmKCFvcHRpb25zLm1lbW9yeSl7bWVtb3J5PWZhbHNlO30KZmlyaW5nPWZhbHNlO2lmKGxvY2tlZCl7aWYobWVtb3J5KXtsaXN0PVtdO31lbHNle2xpc3Q9IiI7fX19LHNlbGY9e2FkZDpmdW5jdGlvbigpe2lmKGxpc3Qpe2lmKG1lbW9yeSYmIWZpcmluZyl7ZmlyaW5nSW5kZXg9bGlzdC5sZW5ndGgtMTtxdWV1ZS5wdXNoKG1lbW9yeSk7fQooZnVuY3Rpb24gYWRkKGFyZ3Mpe2pRdWVyeS5lYWNoKGFyZ3MsZnVuY3Rpb24oXyxhcmcpe2lmKGlzRnVuY3Rpb24oYXJnKSl7aWYoIW9wdGlvbnMudW5pcXVlfHwhc2VsZi5oYXMoYXJnKSl7bGlzdC5wdXNoKGFyZyk7fX1lbHNlIGlmKGFyZyYmYXJnLmxlbmd0aCYmdG9UeXBlKGFyZykhPT0ic3RyaW5nIil7YWRkKGFyZyk7fX0pO30pKGFyZ3VtZW50cyk7aWYobWVtb3J5JiYhZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxyZW1vdmU6ZnVuY3Rpb24oKXtqUXVlcnkuZWFjaChhcmd1bWVudHMsZnVuY3Rpb24oXyxhcmcpe3ZhciBpbmRleDt3aGlsZSgoaW5kZXg9alF1ZXJ5LmluQXJyYXkoYXJnLGxpc3QsaW5kZXgpKT4tMSl7bGlzdC5zcGxpY2UoaW5kZXgsMSk7aWYoaW5kZXg8PWZpcmluZ0luZGV4KXtmaXJpbmdJbmRleC0tO319fSk7cmV0dXJuIHRoaXM7fSxoYXM6ZnVuY3Rpb24oZm4pe3JldHVybiBmbj9qUXVlcnkuaW5BcnJheShmbixsaXN0KT4tMTpsaXN0Lmxlbmd0aD4wO30sZW1wdHk6ZnVuY3Rpb24oKXtpZihsaXN0KXtsaXN0PVtdO30KcmV0dXJuIHRoaXM7fSxkaXNhYmxlOmZ1bmN0aW9uKCl7bG9ja2VkPXF1ZXVlPVtdO2xpc3Q9bWVtb3J5PSIiO3JldHVybiB0aGlzO30sZGlzYWJsZWQ6ZnVuY3Rpb24oKXtyZXR1cm4hbGlzdDt9LGxvY2s6ZnVuY3Rpb24oKXtsb2NrZWQ9cXVldWU9W107aWYoIW1lbW9yeSYmIWZpcmluZyl7bGlzdD1tZW1vcnk9IiI7fQpyZXR1cm4gdGhpczt9LGxvY2tlZDpmdW5jdGlvbigpe3JldHVybiEhbG9ja2VkO30sZmlyZVdpdGg6ZnVuY3Rpb24oY29udGV4dCxhcmdzKXtpZighbG9ja2VkKXthcmdzPWFyZ3N8fFtdO2FyZ3M9W2NvbnRleHQsYXJncy5zbGljZT9hcmdzLnNsaWNlKCk6YXJnc107cXVldWUucHVzaChhcmdzKTtpZighZmlyaW5nKXtmaXJlKCk7fX0KcmV0dXJuIHRoaXM7fSxmaXJlOmZ1bmN0aW9uKCl7c2VsZi5maXJlV2l0aCh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fSxmaXJlZDpmdW5jdGlvbigpe3JldHVybiEhZmlyZWQ7fX07cmV0dXJuIHNlbGY7fTtmdW5jdGlvbiBJZGVudGl0eSh2KXtyZXR1cm4gdjt9CmZ1bmN0aW9uIFRocm93ZXIoZXgpe3Rocm93IGV4O30KZnVuY3Rpb24gYWRvcHRWYWx1ZSh2YWx1ZSxyZXNvbHZlLHJlamVjdCxub1ZhbHVlKXt2YXIgbWV0aG9kO3RyeXtpZih2YWx1ZSYmaXNGdW5jdGlvbigobWV0aG9kPXZhbHVlLnByb21pc2UpKSl7bWV0aG9kLmNhbGwodmFsdWUpLmRvbmUocmVzb2x2ZSkuZmFpbChyZWplY3QpO31lbHNlIGlmKHZhbHVlJiZpc0Z1bmN0aW9uKChtZXRob2Q9dmFsdWUudGhlbikpKXttZXRob2QuY2FsbCh2YWx1ZSxyZXNvbHZlLHJlamVjdCk7fWVsc2V7cmVzb2x2ZS5hcHBseSh1bmRlZmluZWQsW3ZhbHVlXS5zbGljZShub1ZhbHVlKSk7fX1jYXRjaCh2YWx1ZSl7cmVqZWN0LmFwcGx5KHVuZGVmaW5lZCxbdmFsdWVdKTt9fQpqUXVlcnkuZXh0ZW5kKHtEZWZlcnJlZDpmdW5jdGlvbihmdW5jKXt2YXIgdHVwbGVzPVtbIm5vdGlmeSIsInByb2dyZXNzIixqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSxqUXVlcnkuQ2FsbGJhY2tzKCJtZW1vcnkiKSwyXSxbInJlc29sdmUiLCJkb25lIixqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksMCwicmVzb2x2ZWQiXSxbInJlamVjdCIsImZhaWwiLGpRdWVyeS5DYWxsYmFja3MoIm9uY2UgbWVtb3J5IiksalF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSwxLCJyZWplY3RlZCJdXSxzdGF0ZT0icGVuZGluZyIscHJvbWlzZT17c3RhdGU6ZnVuY3Rpb24oKXtyZXR1cm4gc3RhdGU7fSxhbHdheXM6ZnVuY3Rpb24oKXtkZWZlcnJlZC5kb25lKGFyZ3VtZW50cykuZmFpbChhcmd1bWVudHMpO3JldHVybiB0aGlzO30sImNhdGNoIjpmdW5jdGlvbihmbil7cmV0dXJuIHByb21pc2UudGhlbihudWxsLGZuKTt9LHBpcGU6ZnVuY3Rpb24oKXt2YXIgZm5zPWFyZ3VtZW50cztyZXR1cm4galF1ZXJ5LkRlZmVycmVkKGZ1bmN0aW9uKG5ld0RlZmVyKXtqUXVlcnkuZWFjaCh0dXBsZXMsZnVuY3Rpb24oX2ksdHVwbGUpe3ZhciBmbj1pc0Z1bmN0aW9uKGZuc1t0dXBsZVs0XV0pJiZmbnNbdHVwbGVbNF1dO2RlZmVycmVkW3R1cGxlWzFdXShmdW5jdGlvbigpe3ZhciByZXR1cm5lZD1mbiYmZm4uYXBwbHkodGhpcyxhcmd1bWVudHMpO2lmKHJldHVybmVkJiZpc0Z1bmN0aW9uKHJldHVybmVkLnByb21pc2UpKXtyZXR1cm5lZC5wcm9taXNlKCkucHJvZ3Jlc3MobmV3RGVmZXIubm90aWZ5KS5kb25lKG5ld0RlZmVyLnJlc29sdmUpLmZhaWwobmV3RGVmZXIucmVqZWN0KTt9ZWxzZXtuZXdEZWZlclt0dXBsZVswXSsiV2l0aCJdKHRoaXMsZm4/W3JldHVybmVkXTphcmd1bWVudHMpO319KTt9KTtmbnM9bnVsbDt9KS5wcm9taXNlKCk7fSx0aGVuOmZ1bmN0aW9uKG9uRnVsZmlsbGVkLG9uUmVqZWN0ZWQsb25Qcm9ncmVzcyl7dmFyIG1heERlcHRoPTA7ZnVuY3Rpb24gcmVzb2x2ZShkZXB0aCxkZWZlcnJlZCxoYW5kbGVyLHNwZWNpYWwpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0aGF0PXRoaXMsYXJncz1hcmd1bWVudHMsbWlnaHRUaHJvdz1mdW5jdGlvbigpe3ZhciByZXR1cm5lZCx0aGVuO2lmKGRlcHRoPG1heERlcHRoKXtyZXR1cm47fQpyZXR1cm5lZD1oYW5kbGVyLmFwcGx5KHRoYXQsYXJncyk7aWYocmV0dXJuZWQ9PT1kZWZlcnJlZC5wcm9taXNlKCkpe3Rocm93IG5ldyBUeXBlRXJyb3IoIlRoZW5hYmxlIHNlbGYtcmVzb2x1dGlvbiIpO30KdGhlbj1yZXR1cm5lZCYmKHR5cGVvZiByZXR1cm5lZD09PSJvYmplY3QifHx0eXBlb2YgcmV0dXJuZWQ9PT0iZnVuY3Rpb24iKSYmcmV0dXJuZWQudGhlbjtpZihpc0Z1bmN0aW9uKHRoZW4pKXtpZihzcGVjaWFsKXt0aGVuLmNhbGwocmV0dXJuZWQscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxJZGVudGl0eSxzcGVjaWFsKSxyZXNvbHZlKG1heERlcHRoLGRlZmVycmVkLFRocm93ZXIsc3BlY2lhbCkpO31lbHNle21heERlcHRoKys7dGhlbi5jYWxsKHJldHVybmVkLHJlc29sdmUobWF4RGVwdGgsZGVmZXJyZWQsSWRlbnRpdHksc3BlY2lhbCkscmVzb2x2ZShtYXhEZXB0aCxkZWZlcnJlZCxUaHJvd2VyLHNwZWNpYWwpLHJlc29sdmUobWF4RGVwdGgsZGVmZXJyZWQsSWRlbnRpdHksZGVmZXJyZWQubm90aWZ5V2l0aCkpO319ZWxzZXtpZihoYW5kbGVyIT09SWRlbnRpdHkpe3RoYXQ9dW5kZWZpbmVkO2FyZ3M9W3JldHVybmVkXTt9CihzcGVjaWFsfHxkZWZlcnJlZC5yZXNvbHZlV2l0aCkodGhhdCxhcmdzKTt9fSxwcm9jZXNzPXNwZWNpYWw/bWlnaHRUaHJvdzpmdW5jdGlvbigpe3RyeXttaWdodFRocm93KCk7fWNhdGNoKGUpe2lmKGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKXtqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayhlLHByb2Nlc3Muc3RhY2tUcmFjZSk7fQppZihkZXB0aCsxPj1tYXhEZXB0aCl7aWYoaGFuZGxlciE9PVRocm93ZXIpe3RoYXQ9dW5kZWZpbmVkO2FyZ3M9W2VdO30KZGVmZXJyZWQucmVqZWN0V2l0aCh0aGF0LGFyZ3MpO319fTtpZihkZXB0aCl7cHJvY2VzcygpO31lbHNle2lmKGpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2spe3Byb2Nlc3Muc3RhY2tUcmFjZT1qUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCk7fQp3aW5kb3cuc2V0VGltZW91dChwcm9jZXNzKTt9fTt9CnJldHVybiBqUXVlcnkuRGVmZXJyZWQoZnVuY3Rpb24obmV3RGVmZXIpe3R1cGxlc1swXVszXS5hZGQocmVzb2x2ZSgwLG5ld0RlZmVyLGlzRnVuY3Rpb24ob25Qcm9ncmVzcyk/b25Qcm9ncmVzczpJZGVudGl0eSxuZXdEZWZlci5ub3RpZnlXaXRoKSk7dHVwbGVzWzFdWzNdLmFkZChyZXNvbHZlKDAsbmV3RGVmZXIsaXNGdW5jdGlvbihvbkZ1bGZpbGxlZCk/b25GdWxmaWxsZWQ6SWRlbnRpdHkpKTt0dXBsZXNbMl1bM10uYWRkKHJlc29sdmUoMCxuZXdEZWZlcixpc0Z1bmN0aW9uKG9uUmVqZWN0ZWQpP29uUmVqZWN0ZWQ6VGhyb3dlcikpO30pLnByb21pc2UoKTt9LHByb21pc2U6ZnVuY3Rpb24ob2JqKXtyZXR1cm4gb2JqIT1udWxsP2pRdWVyeS5leHRlbmQob2JqLHByb21pc2UpOnByb21pc2U7fX0sZGVmZXJyZWQ9e307alF1ZXJ5LmVhY2godHVwbGVzLGZ1bmN0aW9uKGksdHVwbGUpe3ZhciBsaXN0PXR1cGxlWzJdLHN0YXRlU3RyaW5nPXR1cGxlWzVdO3Byb21pc2VbdHVwbGVbMV1dPWxpc3QuYWRkO2lmKHN0YXRlU3RyaW5nKXtsaXN0LmFkZChmdW5jdGlvbigpe3N0YXRlPXN0YXRlU3RyaW5nO30sdHVwbGVzWzMtaV1bMl0uZGlzYWJsZSx0dXBsZXNbMy1pXVszXS5kaXNhYmxlLHR1cGxlc1swXVsyXS5sb2NrLHR1cGxlc1swXVszXS5sb2NrKTt9Cmxpc3QuYWRkKHR1cGxlWzNdLmZpcmUpO2RlZmVycmVkW3R1cGxlWzBdXT1mdW5jdGlvbigpe2RlZmVycmVkW3R1cGxlWzBdKyJXaXRoIl0odGhpcz09PWRlZmVycmVkP3VuZGVmaW5lZDp0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIHRoaXM7fTtkZWZlcnJlZFt0dXBsZVswXSsiV2l0aCJdPWxpc3QuZmlyZVdpdGg7fSk7cHJvbWlzZS5wcm9taXNlKGRlZmVycmVkKTtpZihmdW5jKXtmdW5jLmNhbGwoZGVmZXJyZWQsZGVmZXJyZWQpO30KcmV0dXJuIGRlZmVycmVkO30sd2hlbjpmdW5jdGlvbihzaW5nbGVWYWx1ZSl7dmFyCnJlbWFpbmluZz1hcmd1bWVudHMubGVuZ3RoLGk9cmVtYWluaW5nLHJlc29sdmVDb250ZXh0cz1BcnJheShpKSxyZXNvbHZlVmFsdWVzPXNsaWNlLmNhbGwoYXJndW1lbnRzKSxwcmltYXJ5PWpRdWVyeS5EZWZlcnJlZCgpLHVwZGF0ZUZ1bmM9ZnVuY3Rpb24oaSl7cmV0dXJuIGZ1bmN0aW9uKHZhbHVlKXtyZXNvbHZlQ29udGV4dHNbaV09dGhpcztyZXNvbHZlVmFsdWVzW2ldPWFyZ3VtZW50cy5sZW5ndGg+MT9zbGljZS5jYWxsKGFyZ3VtZW50cyk6dmFsdWU7aWYoISgtLXJlbWFpbmluZykpe3ByaW1hcnkucmVzb2x2ZVdpdGgocmVzb2x2ZUNvbnRleHRzLHJlc29sdmVWYWx1ZXMpO319O307aWYocmVtYWluaW5nPD0xKXthZG9wdFZhbHVlKHNpbmdsZVZhbHVlLHByaW1hcnkuZG9uZSh1cGRhdGVGdW5jKGkpKS5yZXNvbHZlLHByaW1hcnkucmVqZWN0LCFyZW1haW5pbmcpO2lmKHByaW1hcnkuc3RhdGUoKT09PSJwZW5kaW5nInx8aXNGdW5jdGlvbihyZXNvbHZlVmFsdWVzW2ldJiZyZXNvbHZlVmFsdWVzW2ldLnRoZW4pKXtyZXR1cm4gcHJpbWFyeS50aGVuKCk7fX0Kd2hpbGUoaS0tKXthZG9wdFZhbHVlKHJlc29sdmVWYWx1ZXNbaV0sdXBkYXRlRnVuYyhpKSxwcmltYXJ5LnJlamVjdCk7fQpyZXR1cm4gcHJpbWFyeS5wcm9taXNlKCk7fX0pO3ZhciByZXJyb3JOYW1lcz0vXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vaz1mdW5jdGlvbihlcnJvcixzdGFjayl7aWYod2luZG93LmNvbnNvbGUmJndpbmRvdy5jb25zb2xlLndhcm4mJmVycm9yJiZyZXJyb3JOYW1lcy50ZXN0KGVycm9yLm5hbWUpKXt3aW5kb3cuY29uc29sZS53YXJuKCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiAiK2Vycm9yLm1lc3NhZ2UsZXJyb3Iuc3RhY2ssc3RhY2spO319O2pRdWVyeS5yZWFkeUV4Y2VwdGlvbj1mdW5jdGlvbihlcnJvcil7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aHJvdyBlcnJvcjt9KTt9O3ZhciByZWFkeUxpc3Q9alF1ZXJ5LkRlZmVycmVkKCk7alF1ZXJ5LmZuLnJlYWR5PWZ1bmN0aW9uKGZuKXtyZWFkeUxpc3QudGhlbihmbikuY2F0Y2goZnVuY3Rpb24oZXJyb3Ipe2pRdWVyeS5yZWFkeUV4Y2VwdGlvbihlcnJvcik7fSk7cmV0dXJuIHRoaXM7fTtqUXVlcnkuZXh0ZW5kKHtpc1JlYWR5OmZhbHNlLHJlYWR5V2FpdDoxLHJlYWR5OmZ1bmN0aW9uKHdhaXQpe2lmKHdhaXQ9PT10cnVlPy0talF1ZXJ5LnJlYWR5V2FpdDpqUXVlcnkuaXNSZWFkeSl7cmV0dXJuO30KalF1ZXJ5LmlzUmVhZHk9dHJ1ZTtpZih3YWl0IT09dHJ1ZSYmLS1qUXVlcnkucmVhZHlXYWl0PjApe3JldHVybjt9CnJlYWR5TGlzdC5yZXNvbHZlV2l0aChkb2N1bWVudCxbalF1ZXJ5XSk7fX0pO2pRdWVyeS5yZWFkeS50aGVuPXJlYWR5TGlzdC50aGVuO2Z1bmN0aW9uIGNvbXBsZXRlZCgpe2RvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGNvbXBsZXRlZCk7d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoImxvYWQiLGNvbXBsZXRlZCk7alF1ZXJ5LnJlYWR5KCk7fQppZihkb2N1bWVudC5yZWFkeVN0YXRlPT09ImNvbXBsZXRlInx8KGRvY3VtZW50LnJlYWR5U3RhdGUhPT0ibG9hZGluZyImJiFkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZG9TY3JvbGwpKXt3aW5kb3cuc2V0VGltZW91dChqUXVlcnkucmVhZHkpO31lbHNle2RvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIkRPTUNvbnRlbnRMb2FkZWQiLGNvbXBsZXRlZCk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoImxvYWQiLGNvbXBsZXRlZCk7fQp2YXIgYWNjZXNzPWZ1bmN0aW9uKGVsZW1zLGZuLGtleSx2YWx1ZSxjaGFpbmFibGUsZW1wdHlHZXQscmF3KXt2YXIgaT0wLGxlbj1lbGVtcy5sZW5ndGgsYnVsaz1rZXk9PW51bGw7aWYodG9UeXBlKGtleSk9PT0ib2JqZWN0Iil7Y2hhaW5hYmxlPXRydWU7Zm9yKGkgaW4ga2V5KXthY2Nlc3MoZWxlbXMsZm4saSxrZXlbaV0sdHJ1ZSxlbXB0eUdldCxyYXcpO319ZWxzZSBpZih2YWx1ZSE9PXVuZGVmaW5lZCl7Y2hhaW5hYmxlPXRydWU7aWYoIWlzRnVuY3Rpb24odmFsdWUpKXtyYXc9dHJ1ZTt9CmlmKGJ1bGspe2lmKHJhdyl7Zm4uY2FsbChlbGVtcyx2YWx1ZSk7Zm49bnVsbDt9ZWxzZXtidWxrPWZuO2ZuPWZ1bmN0aW9uKGVsZW0sX2tleSx2YWx1ZSl7cmV0dXJuIGJ1bGsuY2FsbChqUXVlcnkoZWxlbSksdmFsdWUpO307fX0KaWYoZm4pe2Zvcig7aTxsZW47aSsrKXtmbihlbGVtc1tpXSxrZXkscmF3P3ZhbHVlOnZhbHVlLmNhbGwoZWxlbXNbaV0saSxmbihlbGVtc1tpXSxrZXkpKSk7fX19CmlmKGNoYWluYWJsZSl7cmV0dXJuIGVsZW1zO30KaWYoYnVsayl7cmV0dXJuIGZuLmNhbGwoZWxlbXMpO30KcmV0dXJuIGxlbj9mbihlbGVtc1swXSxrZXkpOmVtcHR5R2V0O307dmFyIHJtc1ByZWZpeD0vXi1tcy0vLHJkYXNoQWxwaGE9Ly0oW2Etel0pL2c7ZnVuY3Rpb24gZmNhbWVsQ2FzZShfYWxsLGxldHRlcil7cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO30KZnVuY3Rpb24gY2FtZWxDYXNlKHN0cmluZyl7cmV0dXJuIHN0cmluZy5yZXBsYWNlKHJtc1ByZWZpeCwibXMtIikucmVwbGFjZShyZGFzaEFscGhhLGZjYW1lbENhc2UpO30KdmFyIGFjY2VwdERhdGE9ZnVuY3Rpb24ob3duZXIpe3JldHVybiBvd25lci5ub2RlVHlwZT09PTF8fG93bmVyLm5vZGVUeXBlPT09OXx8ISgrb3duZXIubm9kZVR5cGUpO307ZnVuY3Rpb24gRGF0YSgpe3RoaXMuZXhwYW5kbz1qUXVlcnkuZXhwYW5kbytEYXRhLnVpZCsrO30KRGF0YS51aWQ9MTtEYXRhLnByb3RvdHlwZT17Y2FjaGU6ZnVuY3Rpb24ob3duZXIpe3ZhciB2YWx1ZT1vd25lclt0aGlzLmV4cGFuZG9dO2lmKCF2YWx1ZSl7dmFsdWU9e307aWYoYWNjZXB0RGF0YShvd25lcikpe2lmKG93bmVyLm5vZGVUeXBlKXtvd25lclt0aGlzLmV4cGFuZG9dPXZhbHVlO31lbHNle09iamVjdC5kZWZpbmVQcm9wZXJ0eShvd25lcix0aGlzLmV4cGFuZG8se3ZhbHVlOnZhbHVlLGNvbmZpZ3VyYWJsZTp0cnVlfSk7fX19CnJldHVybiB2YWx1ZTt9LHNldDpmdW5jdGlvbihvd25lcixkYXRhLHZhbHVlKXt2YXIgcHJvcCxjYWNoZT10aGlzLmNhY2hlKG93bmVyKTtpZih0eXBlb2YgZGF0YT09PSJzdHJpbmciKXtjYWNoZVtjYW1lbENhc2UoZGF0YSldPXZhbHVlO31lbHNle2Zvcihwcm9wIGluIGRhdGEpe2NhY2hlW2NhbWVsQ2FzZShwcm9wKV09ZGF0YVtwcm9wXTt9fQpyZXR1cm4gY2FjaGU7fSxnZXQ6ZnVuY3Rpb24ob3duZXIsa2V5KXtyZXR1cm4ga2V5PT09dW5kZWZpbmVkP3RoaXMuY2FjaGUob3duZXIpOm93bmVyW3RoaXMuZXhwYW5kb10mJm93bmVyW3RoaXMuZXhwYW5kb11bY2FtZWxDYXNlKGtleSldO30sYWNjZXNzOmZ1bmN0aW9uKG93bmVyLGtleSx2YWx1ZSl7aWYoa2V5PT09dW5kZWZpbmVkfHwoKGtleSYmdHlwZW9mIGtleT09PSJzdHJpbmciKSYmdmFsdWU9PT11bmRlZmluZWQpKXtyZXR1cm4gdGhpcy5nZXQob3duZXIsa2V5KTt9CnRoaXMuc2V0KG93bmVyLGtleSx2YWx1ZSk7cmV0dXJuIHZhbHVlIT09dW5kZWZpbmVkP3ZhbHVlOmtleTt9LHJlbW92ZTpmdW5jdGlvbihvd25lcixrZXkpe3ZhciBpLGNhY2hlPW93bmVyW3RoaXMuZXhwYW5kb107aWYoY2FjaGU9PT11bmRlZmluZWQpe3JldHVybjt9CmlmKGtleSE9PXVuZGVmaW5lZCl7aWYoQXJyYXkuaXNBcnJheShrZXkpKXtrZXk9a2V5Lm1hcChjYW1lbENhc2UpO31lbHNle2tleT1jYW1lbENhc2Uoa2V5KTtrZXk9a2V5IGluIGNhY2hlP1trZXldOihrZXkubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFtdKTt9Cmk9a2V5Lmxlbmd0aDt3aGlsZShpLS0pe2RlbGV0ZSBjYWNoZVtrZXlbaV1dO319CmlmKGtleT09PXVuZGVmaW5lZHx8alF1ZXJ5LmlzRW1wdHlPYmplY3QoY2FjaGUpKXtpZihvd25lci5ub2RlVHlwZSl7b3duZXJbdGhpcy5leHBhbmRvXT11bmRlZmluZWQ7fWVsc2V7ZGVsZXRlIG93bmVyW3RoaXMuZXhwYW5kb107fX19LGhhc0RhdGE6ZnVuY3Rpb24ob3duZXIpe3ZhciBjYWNoZT1vd25lclt0aGlzLmV4cGFuZG9dO3JldHVybiBjYWNoZSE9PXVuZGVmaW5lZCYmIWpRdWVyeS5pc0VtcHR5T2JqZWN0KGNhY2hlKTt9fTt2YXIgZGF0YVByaXY9bmV3IERhdGEoKTt2YXIgZGF0YVVzZXI9bmV3IERhdGEoKTt2YXIgcmJyYWNlPS9eKD86XHtbXHdcV10qXH18XFtbXHdcV10qXF0pJC8scm11bHRpRGFzaD0vW0EtWl0vZztmdW5jdGlvbiBnZXREYXRhKGRhdGEpe2lmKGRhdGE9PT0idHJ1ZSIpe3JldHVybiB0cnVlO30KaWYoZGF0YT09PSJmYWxzZSIpe3JldHVybiBmYWxzZTt9CmlmKGRhdGE9PT0ibnVsbCIpe3JldHVybiBudWxsO30KaWYoZGF0YT09PStkYXRhKyIiKXtyZXR1cm4rZGF0YTt9CmlmKHJicmFjZS50ZXN0KGRhdGEpKXtyZXR1cm4gSlNPTi5wYXJzZShkYXRhKTt9CnJldHVybiBkYXRhO30KZnVuY3Rpb24gZGF0YUF0dHIoZWxlbSxrZXksZGF0YSl7dmFyIG5hbWU7aWYoZGF0YT09PXVuZGVmaW5lZCYmZWxlbS5ub2RlVHlwZT09PTEpe25hbWU9ImRhdGEtIitrZXkucmVwbGFjZShybXVsdGlEYXNoLCItJCYiKS50b0xvd2VyQ2FzZSgpO2RhdGE9ZWxlbS5nZXRBdHRyaWJ1dGUobmFtZSk7aWYodHlwZW9mIGRhdGE9PT0ic3RyaW5nIil7dHJ5e2RhdGE9Z2V0RGF0YShkYXRhKTt9Y2F0Y2goZSl7fQpkYXRhVXNlci5zZXQoZWxlbSxrZXksZGF0YSk7fWVsc2V7ZGF0YT11bmRlZmluZWQ7fX0KcmV0dXJuIGRhdGE7fQpqUXVlcnkuZXh0ZW5kKHtoYXNEYXRhOmZ1bmN0aW9uKGVsZW0pe3JldHVybiBkYXRhVXNlci5oYXNEYXRhKGVsZW0pfHxkYXRhUHJpdi5oYXNEYXRhKGVsZW0pO30sZGF0YTpmdW5jdGlvbihlbGVtLG5hbWUsZGF0YSl7cmV0dXJuIGRhdGFVc2VyLmFjY2VzcyhlbGVtLG5hbWUsZGF0YSk7fSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGVsZW0sbmFtZSl7ZGF0YVVzZXIucmVtb3ZlKGVsZW0sbmFtZSk7fSxfZGF0YTpmdW5jdGlvbihlbGVtLG5hbWUsZGF0YSl7cmV0dXJuIGRhdGFQcml2LmFjY2VzcyhlbGVtLG5hbWUsZGF0YSk7fSxfcmVtb3ZlRGF0YTpmdW5jdGlvbihlbGVtLG5hbWUpe2RhdGFQcml2LnJlbW92ZShlbGVtLG5hbWUpO319KTtqUXVlcnkuZm4uZXh0ZW5kKHtkYXRhOmZ1bmN0aW9uKGtleSx2YWx1ZSl7dmFyIGksbmFtZSxkYXRhLGVsZW09dGhpc1swXSxhdHRycz1lbGVtJiZlbGVtLmF0dHJpYnV0ZXM7aWYoa2V5PT09dW5kZWZpbmVkKXtpZih0aGlzLmxlbmd0aCl7ZGF0YT1kYXRhVXNlci5nZXQoZWxlbSk7aWYoZWxlbS5ub2RlVHlwZT09PTEmJiFkYXRhUHJpdi5nZXQoZWxlbSwiaGFzRGF0YUF0dHJzIikpe2k9YXR0cnMubGVuZ3RoO3doaWxlKGktLSl7aWYoYXR0cnNbaV0pe25hbWU9YXR0cnNbaV0ubmFtZTtpZihuYW1lLmluZGV4T2YoImRhdGEtIik9PT0wKXtuYW1lPWNhbWVsQ2FzZShuYW1lLnNsaWNlKDUpKTtkYXRhQXR0cihlbGVtLG5hbWUsZGF0YVtuYW1lXSk7fX19CmRhdGFQcml2LnNldChlbGVtLCJoYXNEYXRhQXR0cnMiLHRydWUpO319CnJldHVybiBkYXRhO30KaWYodHlwZW9mIGtleT09PSJvYmplY3QiKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGF0YVVzZXIuc2V0KHRoaXMsa2V5KTt9KTt9CnJldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbih2YWx1ZSl7dmFyIGRhdGE7aWYoZWxlbSYmdmFsdWU9PT11bmRlZmluZWQpe2RhdGE9ZGF0YVVzZXIuZ2V0KGVsZW0sa2V5KTtpZihkYXRhIT09dW5kZWZpbmVkKXtyZXR1cm4gZGF0YTt9CmRhdGE9ZGF0YUF0dHIoZWxlbSxrZXkpO2lmKGRhdGEhPT11bmRlZmluZWQpe3JldHVybiBkYXRhO30KcmV0dXJuO30KdGhpcy5lYWNoKGZ1bmN0aW9uKCl7ZGF0YVVzZXIuc2V0KHRoaXMsa2V5LHZhbHVlKTt9KTt9LG51bGwsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xLG51bGwsdHJ1ZSk7fSxyZW1vdmVEYXRhOmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RhdGFVc2VyLnJlbW92ZSh0aGlzLGtleSk7fSk7fX0pO2pRdWVyeS5leHRlbmQoe3F1ZXVlOmZ1bmN0aW9uKGVsZW0sdHlwZSxkYXRhKXt2YXIgcXVldWU7aWYoZWxlbSl7dHlwZT0odHlwZXx8ImZ4IikrInF1ZXVlIjtxdWV1ZT1kYXRhUHJpdi5nZXQoZWxlbSx0eXBlKTtpZihkYXRhKXtpZighcXVldWV8fEFycmF5LmlzQXJyYXkoZGF0YSkpe3F1ZXVlPWRhdGFQcml2LmFjY2VzcyhlbGVtLHR5cGUsalF1ZXJ5Lm1ha2VBcnJheShkYXRhKSk7fWVsc2V7cXVldWUucHVzaChkYXRhKTt9fQpyZXR1cm4gcXVldWV8fFtdO319LGRlcXVldWU6ZnVuY3Rpb24oZWxlbSx0eXBlKXt0eXBlPXR5cGV8fCJmeCI7dmFyIHF1ZXVlPWpRdWVyeS5xdWV1ZShlbGVtLHR5cGUpLHN0YXJ0TGVuZ3RoPXF1ZXVlLmxlbmd0aCxmbj1xdWV1ZS5zaGlmdCgpLGhvb2tzPWpRdWVyeS5fcXVldWVIb29rcyhlbGVtLHR5cGUpLG5leHQ9ZnVuY3Rpb24oKXtqUXVlcnkuZGVxdWV1ZShlbGVtLHR5cGUpO307aWYoZm49PT0iaW5wcm9ncmVzcyIpe2ZuPXF1ZXVlLnNoaWZ0KCk7c3RhcnRMZW5ndGgtLTt9CmlmKGZuKXtpZih0eXBlPT09ImZ4Iil7cXVldWUudW5zaGlmdCgiaW5wcm9ncmVzcyIpO30KZGVsZXRlIGhvb2tzLnN0b3A7Zm4uY2FsbChlbGVtLG5leHQsaG9va3MpO30KaWYoIXN0YXJ0TGVuZ3RoJiZob29rcyl7aG9va3MuZW1wdHkuZmlyZSgpO319LF9xdWV1ZUhvb2tzOmZ1bmN0aW9uKGVsZW0sdHlwZSl7dmFyIGtleT10eXBlKyJxdWV1ZUhvb2tzIjtyZXR1cm4gZGF0YVByaXYuZ2V0KGVsZW0sa2V5KXx8ZGF0YVByaXYuYWNjZXNzKGVsZW0sa2V5LHtlbXB0eTpqUXVlcnkuQ2FsbGJhY2tzKCJvbmNlIG1lbW9yeSIpLmFkZChmdW5jdGlvbigpe2RhdGFQcml2LnJlbW92ZShlbGVtLFt0eXBlKyJxdWV1ZSIsa2V5XSk7fSl9KTt9fSk7alF1ZXJ5LmZuLmV4dGVuZCh7cXVldWU6ZnVuY3Rpb24odHlwZSxkYXRhKXt2YXIgc2V0dGVyPTI7aWYodHlwZW9mIHR5cGUhPT0ic3RyaW5nIil7ZGF0YT10eXBlO3R5cGU9ImZ4IjtzZXR0ZXItLTt9CmlmKGFyZ3VtZW50cy5sZW5ndGg8c2V0dGVyKXtyZXR1cm4galF1ZXJ5LnF1ZXVlKHRoaXNbMF0sdHlwZSk7fQpyZXR1cm4gZGF0YT09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBxdWV1ZT1qUXVlcnkucXVldWUodGhpcyx0eXBlLGRhdGEpO2pRdWVyeS5fcXVldWVIb29rcyh0aGlzLHR5cGUpO2lmKHR5cGU9PT0iZngiJiZxdWV1ZVswXSE9PSJpbnByb2dyZXNzIil7alF1ZXJ5LmRlcXVldWUodGhpcyx0eXBlKTt9fSk7fSxkZXF1ZXVlOmZ1bmN0aW9uKHR5cGUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkuZGVxdWV1ZSh0aGlzLHR5cGUpO30pO30sY2xlYXJRdWV1ZTpmdW5jdGlvbih0eXBlKXtyZXR1cm4gdGhpcy5xdWV1ZSh0eXBlfHwiZngiLFtdKTt9LHByb21pc2U6ZnVuY3Rpb24odHlwZSxvYmope3ZhciB0bXAsY291bnQ9MSxkZWZlcj1qUXVlcnkuRGVmZXJyZWQoKSxlbGVtZW50cz10aGlzLGk9dGhpcy5sZW5ndGgscmVzb2x2ZT1mdW5jdGlvbigpe2lmKCEoLS1jb3VudCkpe2RlZmVyLnJlc29sdmVXaXRoKGVsZW1lbnRzLFtlbGVtZW50c10pO319O2lmKHR5cGVvZiB0eXBlIT09InN0cmluZyIpe29iaj10eXBlO3R5cGU9dW5kZWZpbmVkO30KdHlwZT10eXBlfHwiZngiO3doaWxlKGktLSl7dG1wPWRhdGFQcml2LmdldChlbGVtZW50c1tpXSx0eXBlKyJxdWV1ZUhvb2tzIik7aWYodG1wJiZ0bXAuZW1wdHkpe2NvdW50Kys7dG1wLmVtcHR5LmFkZChyZXNvbHZlKTt9fQpyZXNvbHZlKCk7cmV0dXJuIGRlZmVyLnByb21pc2Uob2JqKTt9fSk7dmFyIHBudW09KC9bKy1dPyg/OlxkKlwufClcZCsoPzpbZUVdWystXT9cZCt8KS8pLnNvdXJjZTt2YXIgcmNzc051bT1uZXcgUmVnRXhwKCJeKD86KFsrLV0pPXwpKCIrcG51bSsiKShbYS16JV0qKSQiLCJpIik7dmFyIGNzc0V4cGFuZD1bIlRvcCIsIlJpZ2h0IiwiQm90dG9tIiwiTGVmdCJdO3ZhciBkb2N1bWVudEVsZW1lbnQ9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O3ZhciBpc0F0dGFjaGVkPWZ1bmN0aW9uKGVsZW0pe3JldHVybiBqUXVlcnkuY29udGFpbnMoZWxlbS5vd25lckRvY3VtZW50LGVsZW0pO30sY29tcG9zZWQ9e2NvbXBvc2VkOnRydWV9O2lmKGRvY3VtZW50RWxlbWVudC5nZXRSb290Tm9kZSl7aXNBdHRhY2hlZD1mdW5jdGlvbihlbGVtKXtyZXR1cm4galF1ZXJ5LmNvbnRhaW5zKGVsZW0ub3duZXJEb2N1bWVudCxlbGVtKXx8ZWxlbS5nZXRSb290Tm9kZShjb21wb3NlZCk9PT1lbGVtLm93bmVyRG9jdW1lbnQ7fTt9CnZhciBpc0hpZGRlbldpdGhpblRyZWU9ZnVuY3Rpb24oZWxlbSxlbCl7ZWxlbT1lbHx8ZWxlbTtyZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5PT09Im5vbmUifHxlbGVtLnN0eWxlLmRpc3BsYXk9PT0iIiYmaXNBdHRhY2hlZChlbGVtKSYmalF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5Iik9PT0ibm9uZSI7fTtmdW5jdGlvbiBhZGp1c3RDU1MoZWxlbSxwcm9wLHZhbHVlUGFydHMsdHdlZW4pe3ZhciBhZGp1c3RlZCxzY2FsZSxtYXhJdGVyYXRpb25zPTIwLGN1cnJlbnRWYWx1ZT10d2Vlbj9mdW5jdGlvbigpe3JldHVybiB0d2Vlbi5jdXIoKTt9OmZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeS5jc3MoZWxlbSxwcm9wLCIiKTt9LGluaXRpYWw9Y3VycmVudFZhbHVlKCksdW5pdD12YWx1ZVBhcnRzJiZ2YWx1ZVBhcnRzWzNdfHwoalF1ZXJ5LmNzc051bWJlcltwcm9wXT8iIjoicHgiKSxpbml0aWFsSW5Vbml0PWVsZW0ubm9kZVR5cGUmJihqUXVlcnkuY3NzTnVtYmVyW3Byb3BdfHx1bml0IT09InB4IiYmK2luaXRpYWwpJiZyY3NzTnVtLmV4ZWMoalF1ZXJ5LmNzcyhlbGVtLHByb3ApKTtpZihpbml0aWFsSW5Vbml0JiZpbml0aWFsSW5Vbml0WzNdIT09dW5pdCl7aW5pdGlhbD1pbml0aWFsIC8gMjt1bml0PXVuaXR8fGluaXRpYWxJblVuaXRbM107aW5pdGlhbEluVW5pdD0raW5pdGlhbHx8MTt3aGlsZShtYXhJdGVyYXRpb25zLS0pe2pRdWVyeS5zdHlsZShlbGVtLHByb3AsaW5pdGlhbEluVW5pdCt1bml0KTtpZigoMS1zY2FsZSkqKDEtKHNjYWxlPWN1cnJlbnRWYWx1ZSgpLyBpbml0aWFsfHwwLjUpKTw9MCl7bWF4SXRlcmF0aW9ucz0wO30KaW5pdGlhbEluVW5pdD1pbml0aWFsSW5Vbml0IC8gc2NhbGU7fQppbml0aWFsSW5Vbml0PWluaXRpYWxJblVuaXQqMjtqUXVlcnkuc3R5bGUoZWxlbSxwcm9wLGluaXRpYWxJblVuaXQrdW5pdCk7dmFsdWVQYXJ0cz12YWx1ZVBhcnRzfHxbXTt9CmlmKHZhbHVlUGFydHMpe2luaXRpYWxJblVuaXQ9K2luaXRpYWxJblVuaXR8fCtpbml0aWFsfHwwO2FkanVzdGVkPXZhbHVlUGFydHNbMV0/aW5pdGlhbEluVW5pdCsodmFsdWVQYXJ0c1sxXSsxKSp2YWx1ZVBhcnRzWzJdOit2YWx1ZVBhcnRzWzJdO2lmKHR3ZWVuKXt0d2Vlbi51bml0PXVuaXQ7dHdlZW4uc3RhcnQ9aW5pdGlhbEluVW5pdDt0d2Vlbi5lbmQ9YWRqdXN0ZWQ7fX0KcmV0dXJuIGFkanVzdGVkO30KdmFyIGRlZmF1bHREaXNwbGF5TWFwPXt9O2Z1bmN0aW9uIGdldERlZmF1bHREaXNwbGF5KGVsZW0pe3ZhciB0ZW1wLGRvYz1lbGVtLm93bmVyRG9jdW1lbnQsbm9kZU5hbWU9ZWxlbS5ub2RlTmFtZSxkaXNwbGF5PWRlZmF1bHREaXNwbGF5TWFwW25vZGVOYW1lXTtpZihkaXNwbGF5KXtyZXR1cm4gZGlzcGxheTt9CnRlbXA9ZG9jLmJvZHkuYXBwZW5kQ2hpbGQoZG9jLmNyZWF0ZUVsZW1lbnQobm9kZU5hbWUpKTtkaXNwbGF5PWpRdWVyeS5jc3ModGVtcCwiZGlzcGxheSIpO3RlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0ZW1wKTtpZihkaXNwbGF5PT09Im5vbmUiKXtkaXNwbGF5PSJibG9jayI7fQpkZWZhdWx0RGlzcGxheU1hcFtub2RlTmFtZV09ZGlzcGxheTtyZXR1cm4gZGlzcGxheTt9CmZ1bmN0aW9uIHNob3dIaWRlKGVsZW1lbnRzLHNob3cpe3ZhciBkaXNwbGF5LGVsZW0sdmFsdWVzPVtdLGluZGV4PTAsbGVuZ3RoPWVsZW1lbnRzLmxlbmd0aDtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtlbGVtPWVsZW1lbnRzW2luZGV4XTtpZighZWxlbS5zdHlsZSl7Y29udGludWU7fQpkaXNwbGF5PWVsZW0uc3R5bGUuZGlzcGxheTtpZihzaG93KXtpZihkaXNwbGF5PT09Im5vbmUiKXt2YWx1ZXNbaW5kZXhdPWRhdGFQcml2LmdldChlbGVtLCJkaXNwbGF5Iil8fG51bGw7aWYoIXZhbHVlc1tpbmRleF0pe2VsZW0uc3R5bGUuZGlzcGxheT0iIjt9fQppZihlbGVtLnN0eWxlLmRpc3BsYXk9PT0iIiYmaXNIaWRkZW5XaXRoaW5UcmVlKGVsZW0pKXt2YWx1ZXNbaW5kZXhdPWdldERlZmF1bHREaXNwbGF5KGVsZW0pO319ZWxzZXtpZihkaXNwbGF5IT09Im5vbmUiKXt2YWx1ZXNbaW5kZXhdPSJub25lIjtkYXRhUHJpdi5zZXQoZWxlbSwiZGlzcGxheSIsZGlzcGxheSk7fX19CmZvcihpbmRleD0wO2luZGV4PGxlbmd0aDtpbmRleCsrKXtpZih2YWx1ZXNbaW5kZXhdIT1udWxsKXtlbGVtZW50c1tpbmRleF0uc3R5bGUuZGlzcGxheT12YWx1ZXNbaW5kZXhdO319CnJldHVybiBlbGVtZW50czt9CmpRdWVyeS5mbi5leHRlbmQoe3Nob3c6ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd0hpZGUodGhpcyx0cnVlKTt9LGhpZGU6ZnVuY3Rpb24oKXtyZXR1cm4gc2hvd0hpZGUodGhpcyk7fSx0b2dnbGU6ZnVuY3Rpb24oc3RhdGUpe2lmKHR5cGVvZiBzdGF0ZT09PSJib29sZWFuIil7cmV0dXJuIHN0YXRlP3RoaXMuc2hvdygpOnRoaXMuaGlkZSgpO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2lmKGlzSGlkZGVuV2l0aGluVHJlZSh0aGlzKSl7alF1ZXJ5KHRoaXMpLnNob3coKTt9ZWxzZXtqUXVlcnkodGhpcykuaGlkZSgpO319KTt9fSk7dmFyIHJjaGVja2FibGVUeXBlPSgvXig/OmNoZWNrYm94fHJhZGlvKSQvaSk7dmFyIHJ0YWdOYW1lPSgvPChbYS16XVteXC9cMD5ceDIwXHRcclxuXGZdKikvaSk7dmFyIHJzY3JpcHRUeXBlPSgvXiR8Xm1vZHVsZSR8XC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kpOyhmdW5jdGlvbigpe3ZhciBmcmFnbWVudD1kb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksZGl2PWZyYWdtZW50LmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpKSxpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnNldEF0dHJpYnV0ZSgidHlwZSIsInJhZGlvIik7aW5wdXQuc2V0QXR0cmlidXRlKCJjaGVja2VkIiwiY2hlY2tlZCIpO2lucHV0LnNldEF0dHJpYnV0ZSgibmFtZSIsInQiKTtkaXYuYXBwZW5kQ2hpbGQoaW5wdXQpO3N1cHBvcnQuY2hlY2tDbG9uZT1kaXYuY2xvbmVOb2RlKHRydWUpLmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuY2hlY2tlZDtkaXYuaW5uZXJIVE1MPSI8dGV4dGFyZWE+eDwvdGV4dGFyZWE+IjtzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkPSEhZGl2LmNsb25lTm9kZSh0cnVlKS5sYXN0Q2hpbGQuZGVmYXVsdFZhbHVlO2Rpdi5pbm5lckhUTUw9IjxvcHRpb24+PC9vcHRpb24+IjtzdXBwb3J0Lm9wdGlvbj0hIWRpdi5sYXN0Q2hpbGQ7fSkoKTt2YXIgd3JhcE1hcD17dGhlYWQ6WzEsIjx0YWJsZT4iLCI8L3RhYmxlPiJdLGNvbDpbMiwiPHRhYmxlPjxjb2xncm91cD4iLCI8L2NvbGdyb3VwPjwvdGFibGU+Il0sdHI6WzIsIjx0YWJsZT48dGJvZHk+IiwiPC90Ym9keT48L3RhYmxlPiJdLHRkOlszLCI8dGFibGU+PHRib2R5Pjx0cj4iLCI8L3RyPjwvdGJvZHk+PC90YWJsZT4iXSxfZGVmYXVsdDpbMCwiIiwiIl19O3dyYXBNYXAudGJvZHk9d3JhcE1hcC50Zm9vdD13cmFwTWFwLmNvbGdyb3VwPXdyYXBNYXAuY2FwdGlvbj13cmFwTWFwLnRoZWFkO3dyYXBNYXAudGg9d3JhcE1hcC50ZDtpZighc3VwcG9ydC5vcHRpb24pe3dyYXBNYXAub3B0Z3JvdXA9d3JhcE1hcC5vcHRpb249WzEsIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz4iLCI8L3NlbGVjdD4iXTt9CmZ1bmN0aW9uIGdldEFsbChjb250ZXh0LHRhZyl7dmFyIHJldDtpZih0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSE9PSJ1bmRlZmluZWQiKXtyZXQ9Y29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSh0YWd8fCIqIik7fWVsc2UgaWYodHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCE9PSJ1bmRlZmluZWQiKXtyZXQ9Y29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKHRhZ3x8IioiKTt9ZWxzZXtyZXQ9W107fQppZih0YWc9PT11bmRlZmluZWR8fHRhZyYmbm9kZU5hbWUoY29udGV4dCx0YWcpKXtyZXR1cm4galF1ZXJ5Lm1lcmdlKFtjb250ZXh0XSxyZXQpO30KcmV0dXJuIHJldDt9CmZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoZWxlbXMscmVmRWxlbWVudHMpe3ZhciBpPTAsbD1lbGVtcy5sZW5ndGg7Zm9yKDtpPGw7aSsrKXtkYXRhUHJpdi5zZXQoZWxlbXNbaV0sImdsb2JhbEV2YWwiLCFyZWZFbGVtZW50c3x8ZGF0YVByaXYuZ2V0KHJlZkVsZW1lbnRzW2ldLCJnbG9iYWxFdmFsIikpO319CnZhciByaHRtbD0vPHwmIz9cdys7LztmdW5jdGlvbiBidWlsZEZyYWdtZW50KGVsZW1zLGNvbnRleHQsc2NyaXB0cyxzZWxlY3Rpb24saWdub3JlZCl7dmFyIGVsZW0sdG1wLHRhZyx3cmFwLGF0dGFjaGVkLGosZnJhZ21lbnQ9Y29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksbm9kZXM9W10saT0wLGw9ZWxlbXMubGVuZ3RoO2Zvcig7aTxsO2krKyl7ZWxlbT1lbGVtc1tpXTtpZihlbGVtfHxlbGVtPT09MCl7aWYodG9UeXBlKGVsZW0pPT09Im9iamVjdCIpe2pRdWVyeS5tZXJnZShub2RlcyxlbGVtLm5vZGVUeXBlP1tlbGVtXTplbGVtKTt9ZWxzZSBpZighcmh0bWwudGVzdChlbGVtKSl7bm9kZXMucHVzaChjb250ZXh0LmNyZWF0ZVRleHROb2RlKGVsZW0pKTt9ZWxzZXt0bXA9dG1wfHxmcmFnbWVudC5hcHBlbmRDaGlsZChjb250ZXh0LmNyZWF0ZUVsZW1lbnQoImRpdiIpKTt0YWc9KHJ0YWdOYW1lLmV4ZWMoZWxlbSl8fFsiIiwiIl0pWzFdLnRvTG93ZXJDYXNlKCk7d3JhcD13cmFwTWFwW3RhZ118fHdyYXBNYXAuX2RlZmF1bHQ7dG1wLmlubmVySFRNTD13cmFwWzFdK2pRdWVyeS5odG1sUHJlZmlsdGVyKGVsZW0pK3dyYXBbMl07aj13cmFwWzBdO3doaWxlKGotLSl7dG1wPXRtcC5sYXN0Q2hpbGQ7fQpqUXVlcnkubWVyZ2Uobm9kZXMsdG1wLmNoaWxkTm9kZXMpO3RtcD1mcmFnbWVudC5maXJzdENoaWxkO3RtcC50ZXh0Q29udGVudD0iIjt9fX0KZnJhZ21lbnQudGV4dENvbnRlbnQ9IiI7aT0wO3doaWxlKChlbGVtPW5vZGVzW2krK10pKXtpZihzZWxlY3Rpb24mJmpRdWVyeS5pbkFycmF5KGVsZW0sc2VsZWN0aW9uKT4tMSl7aWYoaWdub3JlZCl7aWdub3JlZC5wdXNoKGVsZW0pO30KY29udGludWU7fQphdHRhY2hlZD1pc0F0dGFjaGVkKGVsZW0pO3RtcD1nZXRBbGwoZnJhZ21lbnQuYXBwZW5kQ2hpbGQoZWxlbSksInNjcmlwdCIpO2lmKGF0dGFjaGVkKXtzZXRHbG9iYWxFdmFsKHRtcCk7fQppZihzY3JpcHRzKXtqPTA7d2hpbGUoKGVsZW09dG1wW2orK10pKXtpZihyc2NyaXB0VHlwZS50ZXN0KGVsZW0udHlwZXx8IiIpKXtzY3JpcHRzLnB1c2goZWxlbSk7fX19fQpyZXR1cm4gZnJhZ21lbnQ7fQp2YXIgcnR5cGVuYW1lc3BhY2U9L14oW14uXSopKD86XC4oLispfCkvO2Z1bmN0aW9uIHJldHVyblRydWUoKXtyZXR1cm4gdHJ1ZTt9CmZ1bmN0aW9uIHJldHVybkZhbHNlKCl7cmV0dXJuIGZhbHNlO30KZnVuY3Rpb24gZXhwZWN0U3luYyhlbGVtLHR5cGUpe3JldHVybihlbGVtPT09c2FmZUFjdGl2ZUVsZW1lbnQoKSk9PT0odHlwZT09PSJmb2N1cyIpO30KZnVuY3Rpb24gc2FmZUFjdGl2ZUVsZW1lbnQoKXt0cnl7cmV0dXJuIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQ7fWNhdGNoKGVycil7fX0KZnVuY3Rpb24gb24oZWxlbSx0eXBlcyxzZWxlY3RvcixkYXRhLGZuLG9uZSl7dmFyIG9yaWdGbix0eXBlO2lmKHR5cGVvZiB0eXBlcz09PSJvYmplY3QiKXtpZih0eXBlb2Ygc2VsZWN0b3IhPT0ic3RyaW5nIil7ZGF0YT1kYXRhfHxzZWxlY3RvcjtzZWxlY3Rvcj11bmRlZmluZWQ7fQpmb3IodHlwZSBpbiB0eXBlcyl7b24oZWxlbSx0eXBlLHNlbGVjdG9yLGRhdGEsdHlwZXNbdHlwZV0sb25lKTt9CnJldHVybiBlbGVtO30KaWYoZGF0YT09bnVsbCYmZm49PW51bGwpe2ZuPXNlbGVjdG9yO2RhdGE9c2VsZWN0b3I9dW5kZWZpbmVkO31lbHNlIGlmKGZuPT1udWxsKXtpZih0eXBlb2Ygc2VsZWN0b3I9PT0ic3RyaW5nIil7Zm49ZGF0YTtkYXRhPXVuZGVmaW5lZDt9ZWxzZXtmbj1kYXRhO2RhdGE9c2VsZWN0b3I7c2VsZWN0b3I9dW5kZWZpbmVkO319CmlmKGZuPT09ZmFsc2Upe2ZuPXJldHVybkZhbHNlO31lbHNlIGlmKCFmbil7cmV0dXJuIGVsZW07fQppZihvbmU9PT0xKXtvcmlnRm49Zm47Zm49ZnVuY3Rpb24oZXZlbnQpe2pRdWVyeSgpLm9mZihldmVudCk7cmV0dXJuIG9yaWdGbi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7fTtmbi5ndWlkPW9yaWdGbi5ndWlkfHwob3JpZ0ZuLmd1aWQ9alF1ZXJ5Lmd1aWQrKyk7fQpyZXR1cm4gZWxlbS5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmV2ZW50LmFkZCh0aGlzLHR5cGVzLGZuLGRhdGEsc2VsZWN0b3IpO30pO30KalF1ZXJ5LmV2ZW50PXtnbG9iYWw6e30sYWRkOmZ1bmN0aW9uKGVsZW0sdHlwZXMsaGFuZGxlcixkYXRhLHNlbGVjdG9yKXt2YXIgaGFuZGxlT2JqSW4sZXZlbnRIYW5kbGUsdG1wLGV2ZW50cyx0LGhhbmRsZU9iaixzcGVjaWFsLGhhbmRsZXJzLHR5cGUsbmFtZXNwYWNlcyxvcmlnVHlwZSxlbGVtRGF0YT1kYXRhUHJpdi5nZXQoZWxlbSk7aWYoIWFjY2VwdERhdGEoZWxlbSkpe3JldHVybjt9CmlmKGhhbmRsZXIuaGFuZGxlcil7aGFuZGxlT2JqSW49aGFuZGxlcjtoYW5kbGVyPWhhbmRsZU9iakluLmhhbmRsZXI7c2VsZWN0b3I9aGFuZGxlT2JqSW4uc2VsZWN0b3I7fQppZihzZWxlY3Rvcil7alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKGRvY3VtZW50RWxlbWVudCxzZWxlY3Rvcik7fQppZighaGFuZGxlci5ndWlkKXtoYW5kbGVyLmd1aWQ9alF1ZXJ5Lmd1aWQrKzt9CmlmKCEoZXZlbnRzPWVsZW1EYXRhLmV2ZW50cykpe2V2ZW50cz1lbGVtRGF0YS5ldmVudHM9T2JqZWN0LmNyZWF0ZShudWxsKTt9CmlmKCEoZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlKSl7ZXZlbnRIYW5kbGU9ZWxlbURhdGEuaGFuZGxlPWZ1bmN0aW9uKGUpe3JldHVybiB0eXBlb2YgalF1ZXJ5IT09InVuZGVmaW5lZCImJmpRdWVyeS5ldmVudC50cmlnZ2VyZWQhPT1lLnR5cGU/alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KGVsZW0sYXJndW1lbnRzKTp1bmRlZmluZWQ7fTt9CnR5cGVzPSh0eXBlc3x8IiIpLm1hdGNoKHJub3RodG1sd2hpdGUpfHxbIiJdO3Q9dHlwZXMubGVuZ3RoO3doaWxlKHQtLSl7dG1wPXJ0eXBlbmFtZXNwYWNlLmV4ZWModHlwZXNbdF0pfHxbXTt0eXBlPW9yaWdUeXBlPXRtcFsxXTtuYW1lc3BhY2VzPSh0bXBbMl18fCIiKS5zcGxpdCgiLiIpLnNvcnQoKTtpZighdHlwZSl7Y29udGludWU7fQpzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTt0eXBlPShzZWxlY3Rvcj9zcGVjaWFsLmRlbGVnYXRlVHlwZTpzcGVjaWFsLmJpbmRUeXBlKXx8dHlwZTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtoYW5kbGVPYmo9alF1ZXJ5LmV4dGVuZCh7dHlwZTp0eXBlLG9yaWdUeXBlOm9yaWdUeXBlLGRhdGE6ZGF0YSxoYW5kbGVyOmhhbmRsZXIsZ3VpZDpoYW5kbGVyLmd1aWQsc2VsZWN0b3I6c2VsZWN0b3IsbmVlZHNDb250ZXh0OnNlbGVjdG9yJiZqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQudGVzdChzZWxlY3RvciksbmFtZXNwYWNlOm5hbWVzcGFjZXMuam9pbigiLiIpfSxoYW5kbGVPYmpJbik7aWYoIShoYW5kbGVycz1ldmVudHNbdHlwZV0pKXtoYW5kbGVycz1ldmVudHNbdHlwZV09W107aGFuZGxlcnMuZGVsZWdhdGVDb3VudD0wO2lmKCFzcGVjaWFsLnNldHVwfHxzcGVjaWFsLnNldHVwLmNhbGwoZWxlbSxkYXRhLG5hbWVzcGFjZXMsZXZlbnRIYW5kbGUpPT09ZmFsc2Upe2lmKGVsZW0uYWRkRXZlbnRMaXN0ZW5lcil7ZWxlbS5hZGRFdmVudExpc3RlbmVyKHR5cGUsZXZlbnRIYW5kbGUpO319fQppZihzcGVjaWFsLmFkZCl7c3BlY2lhbC5hZGQuY2FsbChlbGVtLGhhbmRsZU9iaik7aWYoIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQpe2hhbmRsZU9iai5oYW5kbGVyLmd1aWQ9aGFuZGxlci5ndWlkO319CmlmKHNlbGVjdG9yKXtoYW5kbGVycy5zcGxpY2UoaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLDAsaGFuZGxlT2JqKTt9ZWxzZXtoYW5kbGVycy5wdXNoKGhhbmRsZU9iaik7fQpqUXVlcnkuZXZlbnQuZ2xvYmFsW3R5cGVdPXRydWU7fX0scmVtb3ZlOmZ1bmN0aW9uKGVsZW0sdHlwZXMsaGFuZGxlcixzZWxlY3RvcixtYXBwZWRUeXBlcyl7dmFyIGosb3JpZ0NvdW50LHRtcCxldmVudHMsdCxoYW5kbGVPYmosc3BlY2lhbCxoYW5kbGVycyx0eXBlLG5hbWVzcGFjZXMsb3JpZ1R5cGUsZWxlbURhdGE9ZGF0YVByaXYuaGFzRGF0YShlbGVtKSYmZGF0YVByaXYuZ2V0KGVsZW0pO2lmKCFlbGVtRGF0YXx8IShldmVudHM9ZWxlbURhdGEuZXZlbnRzKSl7cmV0dXJuO30KdHlwZXM9KHR5cGVzfHwiIikubWF0Y2gocm5vdGh0bWx3aGl0ZSl8fFsiIl07dD10eXBlcy5sZW5ndGg7d2hpbGUodC0tKXt0bXA9cnR5cGVuYW1lc3BhY2UuZXhlYyh0eXBlc1t0XSl8fFtdO3R5cGU9b3JpZ1R5cGU9dG1wWzFdO25hbWVzcGFjZXM9KHRtcFsyXXx8IiIpLnNwbGl0KCIuIikuc29ydCgpO2lmKCF0eXBlKXtmb3IodHlwZSBpbiBldmVudHMpe2pRdWVyeS5ldmVudC5yZW1vdmUoZWxlbSx0eXBlK3R5cGVzW3RdLGhhbmRsZXIsc2VsZWN0b3IsdHJ1ZSk7fQpjb250aW51ZTt9CnNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWxbdHlwZV18fHt9O3R5cGU9KHNlbGVjdG9yP3NwZWNpYWwuZGVsZWdhdGVUeXBlOnNwZWNpYWwuYmluZFR5cGUpfHx0eXBlO2hhbmRsZXJzPWV2ZW50c1t0eXBlXXx8W107dG1wPXRtcFsyXSYmbmV3IFJlZ0V4cCgiKF58XFwuKSIrbmFtZXNwYWNlcy5qb2luKCJcXC4oPzouKlxcLnwpIikrIihcXC58JCkiKTtvcmlnQ291bnQ9aj1oYW5kbGVycy5sZW5ndGg7d2hpbGUoai0tKXtoYW5kbGVPYmo9aGFuZGxlcnNbal07aWYoKG1hcHBlZFR5cGVzfHxvcmlnVHlwZT09PWhhbmRsZU9iai5vcmlnVHlwZSkmJighaGFuZGxlcnx8aGFuZGxlci5ndWlkPT09aGFuZGxlT2JqLmd1aWQpJiYoIXRtcHx8dG1wLnRlc3QoaGFuZGxlT2JqLm5hbWVzcGFjZSkpJiYoIXNlbGVjdG9yfHxzZWxlY3Rvcj09PWhhbmRsZU9iai5zZWxlY3Rvcnx8c2VsZWN0b3I9PT0iKioiJiZoYW5kbGVPYmouc2VsZWN0b3IpKXtoYW5kbGVycy5zcGxpY2UoaiwxKTtpZihoYW5kbGVPYmouc2VsZWN0b3Ipe2hhbmRsZXJzLmRlbGVnYXRlQ291bnQtLTt9CmlmKHNwZWNpYWwucmVtb3ZlKXtzcGVjaWFsLnJlbW92ZS5jYWxsKGVsZW0saGFuZGxlT2JqKTt9fX0KaWYob3JpZ0NvdW50JiYhaGFuZGxlcnMubGVuZ3RoKXtpZighc3BlY2lhbC50ZWFyZG93bnx8c3BlY2lhbC50ZWFyZG93bi5jYWxsKGVsZW0sbmFtZXNwYWNlcyxlbGVtRGF0YS5oYW5kbGUpPT09ZmFsc2Upe2pRdWVyeS5yZW1vdmVFdmVudChlbGVtLHR5cGUsZWxlbURhdGEuaGFuZGxlKTt9CmRlbGV0ZSBldmVudHNbdHlwZV07fX0KaWYoalF1ZXJ5LmlzRW1wdHlPYmplY3QoZXZlbnRzKSl7ZGF0YVByaXYucmVtb3ZlKGVsZW0sImhhbmRsZSBldmVudHMiKTt9fSxkaXNwYXRjaDpmdW5jdGlvbihuYXRpdmVFdmVudCl7dmFyIGksaixyZXQsbWF0Y2hlZCxoYW5kbGVPYmosaGFuZGxlclF1ZXVlLGFyZ3M9bmV3IEFycmF5KGFyZ3VtZW50cy5sZW5ndGgpLGV2ZW50PWpRdWVyeS5ldmVudC5maXgobmF0aXZlRXZlbnQpLGhhbmRsZXJzPShkYXRhUHJpdi5nZXQodGhpcywiZXZlbnRzIil8fE9iamVjdC5jcmVhdGUobnVsbCkpW2V2ZW50LnR5cGVdfHxbXSxzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW2V2ZW50LnR5cGVdfHx7fTthcmdzWzBdPWV2ZW50O2ZvcihpPTE7aTxhcmd1bWVudHMubGVuZ3RoO2krKyl7YXJnc1tpXT1hcmd1bWVudHNbaV07fQpldmVudC5kZWxlZ2F0ZVRhcmdldD10aGlzO2lmKHNwZWNpYWwucHJlRGlzcGF0Y2gmJnNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCh0aGlzLGV2ZW50KT09PWZhbHNlKXtyZXR1cm47fQpoYW5kbGVyUXVldWU9alF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwodGhpcyxldmVudCxoYW5kbGVycyk7aT0wO3doaWxlKChtYXRjaGVkPWhhbmRsZXJRdWV1ZVtpKytdKSYmIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2V2ZW50LmN1cnJlbnRUYXJnZXQ9bWF0Y2hlZC5lbGVtO2o9MDt3aGlsZSgoaGFuZGxlT2JqPW1hdGNoZWQuaGFuZGxlcnNbaisrXSkmJiFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpKXtpZighZXZlbnQucm5hbWVzcGFjZXx8aGFuZGxlT2JqLm5hbWVzcGFjZT09PWZhbHNlfHxldmVudC5ybmFtZXNwYWNlLnRlc3QoaGFuZGxlT2JqLm5hbWVzcGFjZSkpe2V2ZW50LmhhbmRsZU9iaj1oYW5kbGVPYmo7ZXZlbnQuZGF0YT1oYW5kbGVPYmouZGF0YTtyZXQ9KChqUXVlcnkuZXZlbnQuc3BlY2lhbFtoYW5kbGVPYmoub3JpZ1R5cGVdfHx7fSkuaGFuZGxlfHxoYW5kbGVPYmouaGFuZGxlcikuYXBwbHkobWF0Y2hlZC5lbGVtLGFyZ3MpO2lmKHJldCE9PXVuZGVmaW5lZCl7aWYoKGV2ZW50LnJlc3VsdD1yZXQpPT09ZmFsc2Upe2V2ZW50LnByZXZlbnREZWZhdWx0KCk7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fX19fX0KaWYoc3BlY2lhbC5wb3N0RGlzcGF0Y2gpe3NwZWNpYWwucG9zdERpc3BhdGNoLmNhbGwodGhpcyxldmVudCk7fQpyZXR1cm4gZXZlbnQucmVzdWx0O30saGFuZGxlcnM6ZnVuY3Rpb24oZXZlbnQsaGFuZGxlcnMpe3ZhciBpLGhhbmRsZU9iaixzZWwsbWF0Y2hlZEhhbmRsZXJzLG1hdGNoZWRTZWxlY3RvcnMsaGFuZGxlclF1ZXVlPVtdLGRlbGVnYXRlQ291bnQ9aGFuZGxlcnMuZGVsZWdhdGVDb3VudCxjdXI9ZXZlbnQudGFyZ2V0O2lmKGRlbGVnYXRlQ291bnQmJmN1ci5ub2RlVHlwZSYmIShldmVudC50eXBlPT09ImNsaWNrIiYmZXZlbnQuYnV0dG9uPj0xKSl7Zm9yKDtjdXIhPT10aGlzO2N1cj1jdXIucGFyZW50Tm9kZXx8dGhpcyl7aWYoY3VyLm5vZGVUeXBlPT09MSYmIShldmVudC50eXBlPT09ImNsaWNrIiYmY3VyLmRpc2FibGVkPT09dHJ1ZSkpe21hdGNoZWRIYW5kbGVycz1bXTttYXRjaGVkU2VsZWN0b3JzPXt9O2ZvcihpPTA7aTxkZWxlZ2F0ZUNvdW50O2krKyl7aGFuZGxlT2JqPWhhbmRsZXJzW2ldO3NlbD1oYW5kbGVPYmouc2VsZWN0b3IrIiAiO2lmKG1hdGNoZWRTZWxlY3RvcnNbc2VsXT09PXVuZGVmaW5lZCl7bWF0Y2hlZFNlbGVjdG9yc1tzZWxdPWhhbmRsZU9iai5uZWVkc0NvbnRleHQ/alF1ZXJ5KHNlbCx0aGlzKS5pbmRleChjdXIpPi0xOmpRdWVyeS5maW5kKHNlbCx0aGlzLG51bGwsW2N1cl0pLmxlbmd0aDt9CmlmKG1hdGNoZWRTZWxlY3RvcnNbc2VsXSl7bWF0Y2hlZEhhbmRsZXJzLnB1c2goaGFuZGxlT2JqKTt9fQppZihtYXRjaGVkSGFuZGxlcnMubGVuZ3RoKXtoYW5kbGVyUXVldWUucHVzaCh7ZWxlbTpjdXIsaGFuZGxlcnM6bWF0Y2hlZEhhbmRsZXJzfSk7fX19fQpjdXI9dGhpcztpZihkZWxlZ2F0ZUNvdW50PGhhbmRsZXJzLmxlbmd0aCl7aGFuZGxlclF1ZXVlLnB1c2goe2VsZW06Y3VyLGhhbmRsZXJzOmhhbmRsZXJzLnNsaWNlKGRlbGVnYXRlQ291bnQpfSk7fQpyZXR1cm4gaGFuZGxlclF1ZXVlO30sYWRkUHJvcDpmdW5jdGlvbihuYW1lLGhvb2spe09iamVjdC5kZWZpbmVQcm9wZXJ0eShqUXVlcnkuRXZlbnQucHJvdG90eXBlLG5hbWUse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSxnZXQ6aXNGdW5jdGlvbihob29rKT9mdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudCl7cmV0dXJuIGhvb2sodGhpcy5vcmlnaW5hbEV2ZW50KTt9fTpmdW5jdGlvbigpe2lmKHRoaXMub3JpZ2luYWxFdmVudCl7cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFtuYW1lXTt9fSxzZXQ6ZnVuY3Rpb24odmFsdWUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLG5hbWUse2VudW1lcmFibGU6dHJ1ZSxjb25maWd1cmFibGU6dHJ1ZSx3cml0YWJsZTp0cnVlLHZhbHVlOnZhbHVlfSk7fX0pO30sZml4OmZ1bmN0aW9uKG9yaWdpbmFsRXZlbnQpe3JldHVybiBvcmlnaW5hbEV2ZW50W2pRdWVyeS5leHBhbmRvXT9vcmlnaW5hbEV2ZW50Om5ldyBqUXVlcnkuRXZlbnQob3JpZ2luYWxFdmVudCk7fSxzcGVjaWFsOntsb2FkOntub0J1YmJsZTp0cnVlfSxjbGljazp7c2V0dXA6ZnVuY3Rpb24oZGF0YSl7dmFyIGVsPXRoaXN8fGRhdGE7aWYocmNoZWNrYWJsZVR5cGUudGVzdChlbC50eXBlKSYmZWwuY2xpY2smJm5vZGVOYW1lKGVsLCJpbnB1dCIpKXtsZXZlcmFnZU5hdGl2ZShlbCwiY2xpY2siLHJldHVyblRydWUpO30KcmV0dXJuIGZhbHNlO30sdHJpZ2dlcjpmdW5jdGlvbihkYXRhKXt2YXIgZWw9dGhpc3x8ZGF0YTtpZihyY2hlY2thYmxlVHlwZS50ZXN0KGVsLnR5cGUpJiZlbC5jbGljayYmbm9kZU5hbWUoZWwsImlucHV0Iikpe2xldmVyYWdlTmF0aXZlKGVsLCJjbGljayIpO30KcmV0dXJuIHRydWU7fSxfZGVmYXVsdDpmdW5jdGlvbihldmVudCl7dmFyIHRhcmdldD1ldmVudC50YXJnZXQ7cmV0dXJuIHJjaGVja2FibGVUeXBlLnRlc3QodGFyZ2V0LnR5cGUpJiZ0YXJnZXQuY2xpY2smJm5vZGVOYW1lKHRhcmdldCwiaW5wdXQiKSYmZGF0YVByaXYuZ2V0KHRhcmdldCwiY2xpY2siKXx8bm9kZU5hbWUodGFyZ2V0LCJhIik7fX0sYmVmb3JldW5sb2FkOntwb3N0RGlzcGF0Y2g6ZnVuY3Rpb24oZXZlbnQpe2lmKGV2ZW50LnJlc3VsdCE9PXVuZGVmaW5lZCYmZXZlbnQub3JpZ2luYWxFdmVudCl7ZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZT1ldmVudC5yZXN1bHQ7fX19fX07ZnVuY3Rpb24gbGV2ZXJhZ2VOYXRpdmUoZWwsdHlwZSxleHBlY3RTeW5jKXtpZighZXhwZWN0U3luYyl7aWYoZGF0YVByaXYuZ2V0KGVsLHR5cGUpPT09dW5kZWZpbmVkKXtqUXVlcnkuZXZlbnQuYWRkKGVsLHR5cGUscmV0dXJuVHJ1ZSk7fQpyZXR1cm47fQpkYXRhUHJpdi5zZXQoZWwsdHlwZSxmYWxzZSk7alF1ZXJ5LmV2ZW50LmFkZChlbCx0eXBlLHtuYW1lc3BhY2U6ZmFsc2UsaGFuZGxlcjpmdW5jdGlvbihldmVudCl7dmFyIG5vdEFzeW5jLHJlc3VsdCxzYXZlZD1kYXRhUHJpdi5nZXQodGhpcyx0eXBlKTtpZigoZXZlbnQuaXNUcmlnZ2VyJjEpJiZ0aGlzW3R5cGVdKXtpZighc2F2ZWQubGVuZ3RoKXtzYXZlZD1zbGljZS5jYWxsKGFyZ3VtZW50cyk7ZGF0YVByaXYuc2V0KHRoaXMsdHlwZSxzYXZlZCk7bm90QXN5bmM9ZXhwZWN0U3luYyh0aGlzLHR5cGUpO3RoaXNbdHlwZV0oKTtyZXN1bHQ9ZGF0YVByaXYuZ2V0KHRoaXMsdHlwZSk7aWYoc2F2ZWQhPT1yZXN1bHR8fG5vdEFzeW5jKXtkYXRhUHJpdi5zZXQodGhpcyx0eXBlLGZhbHNlKTt9ZWxzZXtyZXN1bHQ9e307fQppZihzYXZlZCE9PXJlc3VsdCl7ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7ZXZlbnQucHJldmVudERlZmF1bHQoKTtyZXR1cm4gcmVzdWx0JiZyZXN1bHQudmFsdWU7fX1lbHNlIGlmKChqUXVlcnkuZXZlbnQuc3BlY2lhbFt0eXBlXXx8e30pLmRlbGVnYXRlVHlwZSl7ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7fX1lbHNlIGlmKHNhdmVkLmxlbmd0aCl7ZGF0YVByaXYuc2V0KHRoaXMsdHlwZSx7dmFsdWU6alF1ZXJ5LmV2ZW50LnRyaWdnZXIoalF1ZXJ5LmV4dGVuZChzYXZlZFswXSxqUXVlcnkuRXZlbnQucHJvdG90eXBlKSxzYXZlZC5zbGljZSgxKSx0aGlzKX0pO2V2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO319fSk7fQpqUXVlcnkucmVtb3ZlRXZlbnQ9ZnVuY3Rpb24oZWxlbSx0eXBlLGhhbmRsZSl7aWYoZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKXtlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxoYW5kbGUpO319O2pRdWVyeS5FdmVudD1mdW5jdGlvbihzcmMscHJvcHMpe2lmKCEodGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCkpe3JldHVybiBuZXcgalF1ZXJ5LkV2ZW50KHNyYyxwcm9wcyk7fQppZihzcmMmJnNyYy50eXBlKXt0aGlzLm9yaWdpbmFsRXZlbnQ9c3JjO3RoaXMudHlwZT1zcmMudHlwZTt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1zcmMuZGVmYXVsdFByZXZlbnRlZHx8c3JjLmRlZmF1bHRQcmV2ZW50ZWQ9PT11bmRlZmluZWQmJnNyYy5yZXR1cm5WYWx1ZT09PWZhbHNlP3JldHVyblRydWU6cmV0dXJuRmFsc2U7dGhpcy50YXJnZXQ9KHNyYy50YXJnZXQmJnNyYy50YXJnZXQubm9kZVR5cGU9PT0zKT9zcmMudGFyZ2V0LnBhcmVudE5vZGU6c3JjLnRhcmdldDt0aGlzLmN1cnJlbnRUYXJnZXQ9c3JjLmN1cnJlbnRUYXJnZXQ7dGhpcy5yZWxhdGVkVGFyZ2V0PXNyYy5yZWxhdGVkVGFyZ2V0O31lbHNle3RoaXMudHlwZT1zcmM7fQppZihwcm9wcyl7alF1ZXJ5LmV4dGVuZCh0aGlzLHByb3BzKTt9CnRoaXMudGltZVN0YW1wPXNyYyYmc3JjLnRpbWVTdGFtcHx8RGF0ZS5ub3coKTt0aGlzW2pRdWVyeS5leHBhbmRvXT10cnVlO307alF1ZXJ5LkV2ZW50LnByb3RvdHlwZT17Y29uc3RydWN0b3I6alF1ZXJ5LkV2ZW50LGlzRGVmYXVsdFByZXZlbnRlZDpyZXR1cm5GYWxzZSxpc1Byb3BhZ2F0aW9uU3RvcHBlZDpyZXR1cm5GYWxzZSxpc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZDpyZXR1cm5GYWxzZSxpc1NpbXVsYXRlZDpmYWxzZSxwcmV2ZW50RGVmYXVsdDpmdW5jdGlvbigpe3ZhciBlPXRoaXMub3JpZ2luYWxFdmVudDt0aGlzLmlzRGVmYXVsdFByZXZlbnRlZD1yZXR1cm5UcnVlO2lmKGUmJiF0aGlzLmlzU2ltdWxhdGVkKXtlLnByZXZlbnREZWZhdWx0KCk7fX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5vcmlnaW5hbEV2ZW50O3RoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQ9cmV0dXJuVHJ1ZTtpZihlJiYhdGhpcy5pc1NpbXVsYXRlZCl7ZS5zdG9wUHJvcGFnYXRpb24oKTt9fSxzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm9yaWdpbmFsRXZlbnQ7dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZD1yZXR1cm5UcnVlO2lmKGUmJiF0aGlzLmlzU2ltdWxhdGVkKXtlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO30KdGhpcy5zdG9wUHJvcGFnYXRpb24oKTt9fTtqUXVlcnkuZWFjaCh7YWx0S2V5OnRydWUsYnViYmxlczp0cnVlLGNhbmNlbGFibGU6dHJ1ZSxjaGFuZ2VkVG91Y2hlczp0cnVlLGN0cmxLZXk6dHJ1ZSxkZXRhaWw6dHJ1ZSxldmVudFBoYXNlOnRydWUsbWV0YUtleTp0cnVlLHBhZ2VYOnRydWUscGFnZVk6dHJ1ZSxzaGlmdEtleTp0cnVlLHZpZXc6dHJ1ZSwiY2hhciI6dHJ1ZSxjb2RlOnRydWUsY2hhckNvZGU6dHJ1ZSxrZXk6dHJ1ZSxrZXlDb2RlOnRydWUsYnV0dG9uOnRydWUsYnV0dG9uczp0cnVlLGNsaWVudFg6dHJ1ZSxjbGllbnRZOnRydWUsb2Zmc2V0WDp0cnVlLG9mZnNldFk6dHJ1ZSxwb2ludGVySWQ6dHJ1ZSxwb2ludGVyVHlwZTp0cnVlLHNjcmVlblg6dHJ1ZSxzY3JlZW5ZOnRydWUsdGFyZ2V0VG91Y2hlczp0cnVlLHRvRWxlbWVudDp0cnVlLHRvdWNoZXM6dHJ1ZSx3aGljaDp0cnVlfSxqUXVlcnkuZXZlbnQuYWRkUHJvcCk7alF1ZXJ5LmVhY2goe2ZvY3VzOiJmb2N1c2luIixibHVyOiJmb2N1c291dCJ9LGZ1bmN0aW9uKHR5cGUsZGVsZWdhdGVUeXBlKXtqUXVlcnkuZXZlbnQuc3BlY2lhbFt0eXBlXT17c2V0dXA6ZnVuY3Rpb24oKXtsZXZlcmFnZU5hdGl2ZSh0aGlzLHR5cGUsZXhwZWN0U3luYyk7cmV0dXJuIGZhbHNlO30sdHJpZ2dlcjpmdW5jdGlvbigpe2xldmVyYWdlTmF0aXZlKHRoaXMsdHlwZSk7cmV0dXJuIHRydWU7fSxfZGVmYXVsdDpmdW5jdGlvbigpe3JldHVybiB0cnVlO30sZGVsZWdhdGVUeXBlOmRlbGVnYXRlVHlwZX07fSk7alF1ZXJ5LmVhY2goe21vdXNlZW50ZXI6Im1vdXNlb3ZlciIsbW91c2VsZWF2ZToibW91c2VvdXQiLHBvaW50ZXJlbnRlcjoicG9pbnRlcm92ZXIiLHBvaW50ZXJsZWF2ZToicG9pbnRlcm91dCJ9LGZ1bmN0aW9uKG9yaWcsZml4KXtqUXVlcnkuZXZlbnQuc3BlY2lhbFtvcmlnXT17ZGVsZWdhdGVUeXBlOmZpeCxiaW5kVHlwZTpmaXgsaGFuZGxlOmZ1bmN0aW9uKGV2ZW50KXt2YXIgcmV0LHRhcmdldD10aGlzLHJlbGF0ZWQ9ZXZlbnQucmVsYXRlZFRhcmdldCxoYW5kbGVPYmo9ZXZlbnQuaGFuZGxlT2JqO2lmKCFyZWxhdGVkfHwocmVsYXRlZCE9PXRhcmdldCYmIWpRdWVyeS5jb250YWlucyh0YXJnZXQscmVsYXRlZCkpKXtldmVudC50eXBlPWhhbmRsZU9iai5vcmlnVHlwZTtyZXQ9aGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkodGhpcyxhcmd1bWVudHMpO2V2ZW50LnR5cGU9Zml4O30KcmV0dXJuIHJldDt9fTt9KTtqUXVlcnkuZm4uZXh0ZW5kKHtvbjpmdW5jdGlvbih0eXBlcyxzZWxlY3RvcixkYXRhLGZuKXtyZXR1cm4gb24odGhpcyx0eXBlcyxzZWxlY3RvcixkYXRhLGZuKTt9LG9uZTpmdW5jdGlvbih0eXBlcyxzZWxlY3RvcixkYXRhLGZuKXtyZXR1cm4gb24odGhpcyx0eXBlcyxzZWxlY3RvcixkYXRhLGZuLDEpO30sb2ZmOmZ1bmN0aW9uKHR5cGVzLHNlbGVjdG9yLGZuKXt2YXIgaGFuZGxlT2JqLHR5cGU7aWYodHlwZXMmJnR5cGVzLnByZXZlbnREZWZhdWx0JiZ0eXBlcy5oYW5kbGVPYmope2hhbmRsZU9iaj10eXBlcy5oYW5kbGVPYmo7alF1ZXJ5KHR5cGVzLmRlbGVnYXRlVGFyZ2V0KS5vZmYoaGFuZGxlT2JqLm5hbWVzcGFjZT9oYW5kbGVPYmoub3JpZ1R5cGUrIi4iK2hhbmRsZU9iai5uYW1lc3BhY2U6aGFuZGxlT2JqLm9yaWdUeXBlLGhhbmRsZU9iai5zZWxlY3RvcixoYW5kbGVPYmouaGFuZGxlcik7cmV0dXJuIHRoaXM7fQppZih0eXBlb2YgdHlwZXM9PT0ib2JqZWN0Iil7Zm9yKHR5cGUgaW4gdHlwZXMpe3RoaXMub2ZmKHR5cGUsc2VsZWN0b3IsdHlwZXNbdHlwZV0pO30KcmV0dXJuIHRoaXM7fQppZihzZWxlY3Rvcj09PWZhbHNlfHx0eXBlb2Ygc2VsZWN0b3I9PT0iZnVuY3Rpb24iKXtmbj1zZWxlY3RvcjtzZWxlY3Rvcj11bmRlZmluZWQ7fQppZihmbj09PWZhbHNlKXtmbj1yZXR1cm5GYWxzZTt9CnJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkuZXZlbnQucmVtb3ZlKHRoaXMsdHlwZXMsZm4sc2VsZWN0b3IpO30pO319KTt2YXIKcm5vSW5uZXJodG1sPS88c2NyaXB0fDxzdHlsZXw8bGluay9pLHJjaGVja2VkPS9jaGVja2VkXHMqKD86W149XXw9XHMqLmNoZWNrZWQuKS9pLHJjbGVhblNjcmlwdD0vXlxzKjwhKD86XFtDREFUQVxbfC0tKXwoPzpcXVxdfC0tKT5ccyokL2c7ZnVuY3Rpb24gbWFuaXB1bGF0aW9uVGFyZ2V0KGVsZW0sY29udGVudCl7aWYobm9kZU5hbWUoZWxlbSwidGFibGUiKSYmbm9kZU5hbWUoY29udGVudC5ub2RlVHlwZSE9PTExP2NvbnRlbnQ6Y29udGVudC5maXJzdENoaWxkLCJ0ciIpKXtyZXR1cm4galF1ZXJ5KGVsZW0pLmNoaWxkcmVuKCJ0Ym9keSIpWzBdfHxlbGVtO30KcmV0dXJuIGVsZW07fQpmdW5jdGlvbiBkaXNhYmxlU2NyaXB0KGVsZW0pe2VsZW0udHlwZT0oZWxlbS5nZXRBdHRyaWJ1dGUoInR5cGUiKSE9PW51bGwpKyIvIitlbGVtLnR5cGU7cmV0dXJuIGVsZW07fQpmdW5jdGlvbiByZXN0b3JlU2NyaXB0KGVsZW0pe2lmKChlbGVtLnR5cGV8fCIiKS5zbGljZSgwLDUpPT09InRydWUvIil7ZWxlbS50eXBlPWVsZW0udHlwZS5zbGljZSg1KTt9ZWxzZXtlbGVtLnJlbW92ZUF0dHJpYnV0ZSgidHlwZSIpO30KcmV0dXJuIGVsZW07fQpmdW5jdGlvbiBjbG9uZUNvcHlFdmVudChzcmMsZGVzdCl7dmFyIGksbCx0eXBlLHBkYXRhT2xkLHVkYXRhT2xkLHVkYXRhQ3VyLGV2ZW50cztpZihkZXN0Lm5vZGVUeXBlIT09MSl7cmV0dXJuO30KaWYoZGF0YVByaXYuaGFzRGF0YShzcmMpKXtwZGF0YU9sZD1kYXRhUHJpdi5nZXQoc3JjKTtldmVudHM9cGRhdGFPbGQuZXZlbnRzO2lmKGV2ZW50cyl7ZGF0YVByaXYucmVtb3ZlKGRlc3QsImhhbmRsZSBldmVudHMiKTtmb3IodHlwZSBpbiBldmVudHMpe2ZvcihpPTAsbD1ldmVudHNbdHlwZV0ubGVuZ3RoO2k8bDtpKyspe2pRdWVyeS5ldmVudC5hZGQoZGVzdCx0eXBlLGV2ZW50c1t0eXBlXVtpXSk7fX19fQppZihkYXRhVXNlci5oYXNEYXRhKHNyYykpe3VkYXRhT2xkPWRhdGFVc2VyLmFjY2VzcyhzcmMpO3VkYXRhQ3VyPWpRdWVyeS5leHRlbmQoe30sdWRhdGFPbGQpO2RhdGFVc2VyLnNldChkZXN0LHVkYXRhQ3VyKTt9fQpmdW5jdGlvbiBmaXhJbnB1dChzcmMsZGVzdCl7dmFyIG5vZGVOYW1lPWRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtpZihub2RlTmFtZT09PSJpbnB1dCImJnJjaGVja2FibGVUeXBlLnRlc3Qoc3JjLnR5cGUpKXtkZXN0LmNoZWNrZWQ9c3JjLmNoZWNrZWQ7fWVsc2UgaWYobm9kZU5hbWU9PT0iaW5wdXQifHxub2RlTmFtZT09PSJ0ZXh0YXJlYSIpe2Rlc3QuZGVmYXVsdFZhbHVlPXNyYy5kZWZhdWx0VmFsdWU7fX0KZnVuY3Rpb24gZG9tTWFuaXAoY29sbGVjdGlvbixhcmdzLGNhbGxiYWNrLGlnbm9yZWQpe2FyZ3M9ZmxhdChhcmdzKTt2YXIgZnJhZ21lbnQsZmlyc3Qsc2NyaXB0cyxoYXNTY3JpcHRzLG5vZGUsZG9jLGk9MCxsPWNvbGxlY3Rpb24ubGVuZ3RoLGlOb0Nsb25lPWwtMSx2YWx1ZT1hcmdzWzBdLHZhbHVlSXNGdW5jdGlvbj1pc0Z1bmN0aW9uKHZhbHVlKTtpZih2YWx1ZUlzRnVuY3Rpb258fChsPjEmJnR5cGVvZiB2YWx1ZT09PSJzdHJpbmciJiYhc3VwcG9ydC5jaGVja0Nsb25lJiZyY2hlY2tlZC50ZXN0KHZhbHVlKSkpe3JldHVybiBjb2xsZWN0aW9uLmVhY2goZnVuY3Rpb24oaW5kZXgpe3ZhciBzZWxmPWNvbGxlY3Rpb24uZXEoaW5kZXgpO2lmKHZhbHVlSXNGdW5jdGlvbil7YXJnc1swXT12YWx1ZS5jYWxsKHRoaXMsaW5kZXgsc2VsZi5odG1sKCkpO30KZG9tTWFuaXAoc2VsZixhcmdzLGNhbGxiYWNrLGlnbm9yZWQpO30pO30KaWYobCl7ZnJhZ21lbnQ9YnVpbGRGcmFnbWVudChhcmdzLGNvbGxlY3Rpb25bMF0ub3duZXJEb2N1bWVudCxmYWxzZSxjb2xsZWN0aW9uLGlnbm9yZWQpO2ZpcnN0PWZyYWdtZW50LmZpcnN0Q2hpbGQ7aWYoZnJhZ21lbnQuY2hpbGROb2Rlcy5sZW5ndGg9PT0xKXtmcmFnbWVudD1maXJzdDt9CmlmKGZpcnN0fHxpZ25vcmVkKXtzY3JpcHRzPWpRdWVyeS5tYXAoZ2V0QWxsKGZyYWdtZW50LCJzY3JpcHQiKSxkaXNhYmxlU2NyaXB0KTtoYXNTY3JpcHRzPXNjcmlwdHMubGVuZ3RoO2Zvcig7aTxsO2krKyl7bm9kZT1mcmFnbWVudDtpZihpIT09aU5vQ2xvbmUpe25vZGU9alF1ZXJ5LmNsb25lKG5vZGUsdHJ1ZSx0cnVlKTtpZihoYXNTY3JpcHRzKXtqUXVlcnkubWVyZ2Uoc2NyaXB0cyxnZXRBbGwobm9kZSwic2NyaXB0IikpO319CmNhbGxiYWNrLmNhbGwoY29sbGVjdGlvbltpXSxub2RlLGkpO30KaWYoaGFzU2NyaXB0cyl7ZG9jPXNjcmlwdHNbc2NyaXB0cy5sZW5ndGgtMV0ub3duZXJEb2N1bWVudDtqUXVlcnkubWFwKHNjcmlwdHMscmVzdG9yZVNjcmlwdCk7Zm9yKGk9MDtpPGhhc1NjcmlwdHM7aSsrKXtub2RlPXNjcmlwdHNbaV07aWYocnNjcmlwdFR5cGUudGVzdChub2RlLnR5cGV8fCIiKSYmIWRhdGFQcml2LmFjY2Vzcyhub2RlLCJnbG9iYWxFdmFsIikmJmpRdWVyeS5jb250YWlucyhkb2Msbm9kZSkpe2lmKG5vZGUuc3JjJiYobm9kZS50eXBlfHwiIikudG9Mb3dlckNhc2UoKSE9PSJtb2R1bGUiKXtpZihqUXVlcnkuX2V2YWxVcmwmJiFub2RlLm5vTW9kdWxlKXtqUXVlcnkuX2V2YWxVcmwobm9kZS5zcmMse25vbmNlOm5vZGUubm9uY2V8fG5vZGUuZ2V0QXR0cmlidXRlKCJub25jZSIpfSxkb2MpO319ZWxzZXtET01FdmFsKG5vZGUudGV4dENvbnRlbnQucmVwbGFjZShyY2xlYW5TY3JpcHQsIiIpLG5vZGUsZG9jKTt9fX19fX0KcmV0dXJuIGNvbGxlY3Rpb247fQpmdW5jdGlvbiByZW1vdmUoZWxlbSxzZWxlY3RvcixrZWVwRGF0YSl7dmFyIG5vZGUsbm9kZXM9c2VsZWN0b3I/alF1ZXJ5LmZpbHRlcihzZWxlY3RvcixlbGVtKTplbGVtLGk9MDtmb3IoOyhub2RlPW5vZGVzW2ldKSE9bnVsbDtpKyspe2lmKCFrZWVwRGF0YSYmbm9kZS5ub2RlVHlwZT09PTEpe2pRdWVyeS5jbGVhbkRhdGEoZ2V0QWxsKG5vZGUpKTt9CmlmKG5vZGUucGFyZW50Tm9kZSl7aWYoa2VlcERhdGEmJmlzQXR0YWNoZWQobm9kZSkpe3NldEdsb2JhbEV2YWwoZ2V0QWxsKG5vZGUsInNjcmlwdCIpKTt9Cm5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChub2RlKTt9fQpyZXR1cm4gZWxlbTt9CmpRdWVyeS5leHRlbmQoe2h0bWxQcmVmaWx0ZXI6ZnVuY3Rpb24oaHRtbCl7cmV0dXJuIGh0bWw7fSxjbG9uZTpmdW5jdGlvbihlbGVtLGRhdGFBbmRFdmVudHMsZGVlcERhdGFBbmRFdmVudHMpe3ZhciBpLGwsc3JjRWxlbWVudHMsZGVzdEVsZW1lbnRzLGNsb25lPWVsZW0uY2xvbmVOb2RlKHRydWUpLGluUGFnZT1pc0F0dGFjaGVkKGVsZW0pO2lmKCFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkJiYoZWxlbS5ub2RlVHlwZT09PTF8fGVsZW0ubm9kZVR5cGU9PT0xMSkmJiFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe2Rlc3RFbGVtZW50cz1nZXRBbGwoY2xvbmUpO3NyY0VsZW1lbnRzPWdldEFsbChlbGVtKTtmb3IoaT0wLGw9c3JjRWxlbWVudHMubGVuZ3RoO2k8bDtpKyspe2ZpeElucHV0KHNyY0VsZW1lbnRzW2ldLGRlc3RFbGVtZW50c1tpXSk7fX0KaWYoZGF0YUFuZEV2ZW50cyl7aWYoZGVlcERhdGFBbmRFdmVudHMpe3NyY0VsZW1lbnRzPXNyY0VsZW1lbnRzfHxnZXRBbGwoZWxlbSk7ZGVzdEVsZW1lbnRzPWRlc3RFbGVtZW50c3x8Z2V0QWxsKGNsb25lKTtmb3IoaT0wLGw9c3JjRWxlbWVudHMubGVuZ3RoO2k8bDtpKyspe2Nsb25lQ29weUV2ZW50KHNyY0VsZW1lbnRzW2ldLGRlc3RFbGVtZW50c1tpXSk7fX1lbHNle2Nsb25lQ29weUV2ZW50KGVsZW0sY2xvbmUpO319CmRlc3RFbGVtZW50cz1nZXRBbGwoY2xvbmUsInNjcmlwdCIpO2lmKGRlc3RFbGVtZW50cy5sZW5ndGg+MCl7c2V0R2xvYmFsRXZhbChkZXN0RWxlbWVudHMsIWluUGFnZSYmZ2V0QWxsKGVsZW0sInNjcmlwdCIpKTt9CnJldHVybiBjbG9uZTt9LGNsZWFuRGF0YTpmdW5jdGlvbihlbGVtcyl7dmFyIGRhdGEsZWxlbSx0eXBlLHNwZWNpYWw9alF1ZXJ5LmV2ZW50LnNwZWNpYWwsaT0wO2Zvcig7KGVsZW09ZWxlbXNbaV0pIT09dW5kZWZpbmVkO2krKyl7aWYoYWNjZXB0RGF0YShlbGVtKSl7aWYoKGRhdGE9ZWxlbVtkYXRhUHJpdi5leHBhbmRvXSkpe2lmKGRhdGEuZXZlbnRzKXtmb3IodHlwZSBpbiBkYXRhLmV2ZW50cyl7aWYoc3BlY2lhbFt0eXBlXSl7alF1ZXJ5LmV2ZW50LnJlbW92ZShlbGVtLHR5cGUpO31lbHNle2pRdWVyeS5yZW1vdmVFdmVudChlbGVtLHR5cGUsZGF0YS5oYW5kbGUpO319fQplbGVtW2RhdGFQcml2LmV4cGFuZG9dPXVuZGVmaW5lZDt9CmlmKGVsZW1bZGF0YVVzZXIuZXhwYW5kb10pe2VsZW1bZGF0YVVzZXIuZXhwYW5kb109dW5kZWZpbmVkO319fX19KTtqUXVlcnkuZm4uZXh0ZW5kKHtkZXRhY2g6ZnVuY3Rpb24oc2VsZWN0b3Ipe3JldHVybiByZW1vdmUodGhpcyxzZWxlY3Rvcix0cnVlKTt9LHJlbW92ZTpmdW5jdGlvbihzZWxlY3Rvcil7cmV0dXJuIHJlbW92ZSh0aGlzLHNlbGVjdG9yKTt9LHRleHQ6ZnVuY3Rpb24odmFsdWUpe3JldHVybiBhY2Nlc3ModGhpcyxmdW5jdGlvbih2YWx1ZSl7cmV0dXJuIHZhbHVlPT09dW5kZWZpbmVkP2pRdWVyeS50ZXh0KHRoaXMpOnRoaXMuZW1wdHkoKS5lYWNoKGZ1bmN0aW9uKCl7aWYodGhpcy5ub2RlVHlwZT09PTF8fHRoaXMubm9kZVR5cGU9PT0xMXx8dGhpcy5ub2RlVHlwZT09PTkpe3RoaXMudGV4dENvbnRlbnQ9dmFsdWU7fX0pO30sbnVsbCx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoKTt9LGFwcGVuZDpmdW5jdGlvbigpe3JldHVybiBkb21NYW5pcCh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlbGVtKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dmFyIHRhcmdldD1tYW5pcHVsYXRpb25UYXJnZXQodGhpcyxlbGVtKTt0YXJnZXQuYXBwZW5kQ2hpbGQoZWxlbSk7fX0pO30scHJlcGVuZDpmdW5jdGlvbigpe3JldHVybiBkb21NYW5pcCh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlbGVtKXtpZih0aGlzLm5vZGVUeXBlPT09MXx8dGhpcy5ub2RlVHlwZT09PTExfHx0aGlzLm5vZGVUeXBlPT09OSl7dmFyIHRhcmdldD1tYW5pcHVsYXRpb25UYXJnZXQodGhpcyxlbGVtKTt0YXJnZXQuaW5zZXJ0QmVmb3JlKGVsZW0sdGFyZ2V0LmZpcnN0Q2hpbGQpO319KTt9LGJlZm9yZTpmdW5jdGlvbigpe3JldHVybiBkb21NYW5pcCh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlbGVtKXtpZih0aGlzLnBhcmVudE5vZGUpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbSx0aGlzKTt9fSk7fSxhZnRlcjpmdW5jdGlvbigpe3JldHVybiBkb21NYW5pcCh0aGlzLGFyZ3VtZW50cyxmdW5jdGlvbihlbGVtKXtpZih0aGlzLnBhcmVudE5vZGUpe3RoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoZWxlbSx0aGlzLm5leHRTaWJsaW5nKTt9fSk7fSxlbXB0eTpmdW5jdGlvbigpe3ZhciBlbGVtLGk9MDtmb3IoOyhlbGVtPXRoaXNbaV0pIT1udWxsO2krKyl7aWYoZWxlbS5ub2RlVHlwZT09PTEpe2pRdWVyeS5jbGVhbkRhdGEoZ2V0QWxsKGVsZW0sZmFsc2UpKTtlbGVtLnRleHRDb250ZW50PSIiO319CnJldHVybiB0aGlzO30sY2xvbmU6ZnVuY3Rpb24oZGF0YUFuZEV2ZW50cyxkZWVwRGF0YUFuZEV2ZW50cyl7ZGF0YUFuZEV2ZW50cz1kYXRhQW5kRXZlbnRzPT1udWxsP2ZhbHNlOmRhdGFBbmRFdmVudHM7ZGVlcERhdGFBbmRFdmVudHM9ZGVlcERhdGFBbmRFdmVudHM9PW51bGw/ZGF0YUFuZEV2ZW50czpkZWVwRGF0YUFuZEV2ZW50cztyZXR1cm4gdGhpcy5tYXAoZnVuY3Rpb24oKXtyZXR1cm4galF1ZXJ5LmNsb25lKHRoaXMsZGF0YUFuZEV2ZW50cyxkZWVwRGF0YUFuZEV2ZW50cyk7fSk7fSxodG1sOmZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24odmFsdWUpe3ZhciBlbGVtPXRoaXNbMF18fHt9LGk9MCxsPXRoaXMubGVuZ3RoO2lmKHZhbHVlPT09dW5kZWZpbmVkJiZlbGVtLm5vZGVUeXBlPT09MSl7cmV0dXJuIGVsZW0uaW5uZXJIVE1MO30KaWYodHlwZW9mIHZhbHVlPT09InN0cmluZyImJiFybm9Jbm5lcmh0bWwudGVzdCh2YWx1ZSkmJiF3cmFwTWFwWyhydGFnTmFtZS5leGVjKHZhbHVlKXx8WyIiLCIiXSlbMV0udG9Mb3dlckNhc2UoKV0pe3ZhbHVlPWpRdWVyeS5odG1sUHJlZmlsdGVyKHZhbHVlKTt0cnl7Zm9yKDtpPGw7aSsrKXtlbGVtPXRoaXNbaV18fHt9O2lmKGVsZW0ubm9kZVR5cGU9PT0xKXtqUXVlcnkuY2xlYW5EYXRhKGdldEFsbChlbGVtLGZhbHNlKSk7ZWxlbS5pbm5lckhUTUw9dmFsdWU7fX0KZWxlbT0wO31jYXRjaChlKXt9fQppZihlbGVtKXt0aGlzLmVtcHR5KCkuYXBwZW5kKHZhbHVlKTt9fSxudWxsLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGgpO30scmVwbGFjZVdpdGg6ZnVuY3Rpb24oKXt2YXIgaWdub3JlZD1bXTtyZXR1cm4gZG9tTWFuaXAodGhpcyxhcmd1bWVudHMsZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD10aGlzLnBhcmVudE5vZGU7aWYoalF1ZXJ5LmluQXJyYXkodGhpcyxpZ25vcmVkKTwwKXtqUXVlcnkuY2xlYW5EYXRhKGdldEFsbCh0aGlzKSk7aWYocGFyZW50KXtwYXJlbnQucmVwbGFjZUNoaWxkKGVsZW0sdGhpcyk7fX19LGlnbm9yZWQpO319KTtqUXVlcnkuZWFjaCh7YXBwZW5kVG86ImFwcGVuZCIscHJlcGVuZFRvOiJwcmVwZW5kIixpbnNlcnRCZWZvcmU6ImJlZm9yZSIsaW5zZXJ0QWZ0ZXI6ImFmdGVyIixyZXBsYWNlQWxsOiJyZXBsYWNlV2l0aCJ9LGZ1bmN0aW9uKG5hbWUsb3JpZ2luYWwpe2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihzZWxlY3Rvcil7dmFyIGVsZW1zLHJldD1bXSxpbnNlcnQ9alF1ZXJ5KHNlbGVjdG9yKSxsYXN0PWluc2VydC5sZW5ndGgtMSxpPTA7Zm9yKDtpPD1sYXN0O2krKyl7ZWxlbXM9aT09PWxhc3Q/dGhpczp0aGlzLmNsb25lKHRydWUpO2pRdWVyeShpbnNlcnRbaV0pW29yaWdpbmFsXShlbGVtcyk7cHVzaC5hcHBseShyZXQsZWxlbXMuZ2V0KCkpO30KcmV0dXJuIHRoaXMucHVzaFN0YWNrKHJldCk7fTt9KTt2YXIgcm51bW5vbnB4PW5ldyBSZWdFeHAoIl4oIitwbnVtKyIpKD8hcHgpW2EteiVdKyQiLCJpIik7dmFyIGdldFN0eWxlcz1mdW5jdGlvbihlbGVtKXt2YXIgdmlldz1lbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7aWYoIXZpZXd8fCF2aWV3Lm9wZW5lcil7dmlldz13aW5kb3c7fQpyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKGVsZW0pO307dmFyIHN3YXA9ZnVuY3Rpb24oZWxlbSxvcHRpb25zLGNhbGxiYWNrKXt2YXIgcmV0LG5hbWUsb2xkPXt9O2ZvcihuYW1lIGluIG9wdGlvbnMpe29sZFtuYW1lXT1lbGVtLnN0eWxlW25hbWVdO2VsZW0uc3R5bGVbbmFtZV09b3B0aW9uc1tuYW1lXTt9CnJldD1jYWxsYmFjay5jYWxsKGVsZW0pO2ZvcihuYW1lIGluIG9wdGlvbnMpe2VsZW0uc3R5bGVbbmFtZV09b2xkW25hbWVdO30KcmV0dXJuIHJldDt9O3ZhciByYm94U3R5bGU9bmV3IFJlZ0V4cChjc3NFeHBhbmQuam9pbigifCIpLCJpIik7KGZ1bmN0aW9uKCl7ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKXtpZighZGl2KXtyZXR1cm47fQpjb250YWluZXIuc3R5bGUuY3NzVGV4dD0icG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4OyIrIm1hcmdpbi10b3A6MXB4O3BhZGRpbmc6MDtib3JkZXI6MCI7ZGl2LnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDsiKyJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4OyIrIndpZHRoOjYwJTt0b3A6MSUiO2RvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZChjb250YWluZXIpLmFwcGVuZENoaWxkKGRpdik7dmFyIGRpdlN0eWxlPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRpdik7cGl4ZWxQb3NpdGlvblZhbD1kaXZTdHlsZS50b3AhPT0iMSUiO3JlbGlhYmxlTWFyZ2luTGVmdFZhbD1yb3VuZFBpeGVsTWVhc3VyZXMoZGl2U3R5bGUubWFyZ2luTGVmdCk9PT0xMjtkaXYuc3R5bGUucmlnaHQ9IjYwJSI7cGl4ZWxCb3hTdHlsZXNWYWw9cm91bmRQaXhlbE1lYXN1cmVzKGRpdlN0eWxlLnJpZ2h0KT09PTM2O2JveFNpemluZ1JlbGlhYmxlVmFsPXJvdW5kUGl4ZWxNZWFzdXJlcyhkaXZTdHlsZS53aWR0aCk9PT0zNjtkaXYuc3R5bGUucG9zaXRpb249ImFic29sdXRlIjtzY3JvbGxib3hTaXplVmFsPXJvdW5kUGl4ZWxNZWFzdXJlcyhkaXYub2Zmc2V0V2lkdGggLyAzKT09PTEyO2RvY3VtZW50RWxlbWVudC5yZW1vdmVDaGlsZChjb250YWluZXIpO2Rpdj1udWxsO30KZnVuY3Rpb24gcm91bmRQaXhlbE1lYXN1cmVzKG1lYXN1cmUpe3JldHVybiBNYXRoLnJvdW5kKHBhcnNlRmxvYXQobWVhc3VyZSkpO30KdmFyIHBpeGVsUG9zaXRpb25WYWwsYm94U2l6aW5nUmVsaWFibGVWYWwsc2Nyb2xsYm94U2l6ZVZhbCxwaXhlbEJveFN0eWxlc1ZhbCxyZWxpYWJsZVRyRGltZW5zaW9uc1ZhbCxyZWxpYWJsZU1hcmdpbkxlZnRWYWwsY29udGFpbmVyPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpLGRpdj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKTtpZighZGl2LnN0eWxlKXtyZXR1cm47fQpkaXYuc3R5bGUuYmFja2dyb3VuZENsaXA9ImNvbnRlbnQtYm94IjtkaXYuY2xvbmVOb2RlKHRydWUpLnN0eWxlLmJhY2tncm91bmRDbGlwPSIiO3N1cHBvcnQuY2xlYXJDbG9uZVN0eWxlPWRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcD09PSJjb250ZW50LWJveCI7alF1ZXJ5LmV4dGVuZChzdXBwb3J0LHtib3hTaXppbmdSZWxpYWJsZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO30scGl4ZWxCb3hTdHlsZXM6ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbEJveFN0eWxlc1ZhbDt9LHBpeGVsUG9zaXRpb246ZnVuY3Rpb24oKXtjb21wdXRlU3R5bGVUZXN0cygpO3JldHVybiBwaXhlbFBvc2l0aW9uVmFsO30scmVsaWFibGVNYXJnaW5MZWZ0OmZ1bmN0aW9uKCl7Y29tcHV0ZVN0eWxlVGVzdHMoKTtyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsO30sc2Nyb2xsYm94U2l6ZTpmdW5jdGlvbigpe2NvbXB1dGVTdHlsZVRlc3RzKCk7cmV0dXJuIHNjcm9sbGJveFNpemVWYWw7fSxyZWxpYWJsZVRyRGltZW5zaW9uczpmdW5jdGlvbigpe3ZhciB0YWJsZSx0cix0ckNoaWxkLHRyU3R5bGU7aWYocmVsaWFibGVUckRpbWVuc2lvbnNWYWw9PW51bGwpe3RhYmxlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInRhYmxlIik7dHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgidHIiKTt0ckNoaWxkPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImRpdiIpO3RhYmxlLnN0eWxlLmNzc1RleHQ9InBvc2l0aW9uOmFic29sdXRlO2xlZnQ6LTExMTExcHg7Ym9yZGVyLWNvbGxhcHNlOnNlcGFyYXRlIjt0ci5zdHlsZS5jc3NUZXh0PSJib3JkZXI6MXB4IHNvbGlkIjt0ci5zdHlsZS5oZWlnaHQ9IjFweCI7dHJDaGlsZC5zdHlsZS5oZWlnaHQ9IjlweCI7dHJDaGlsZC5zdHlsZS5kaXNwbGF5PSJibG9jayI7ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKHRhYmxlKS5hcHBlbmRDaGlsZCh0cikuYXBwZW5kQ2hpbGQodHJDaGlsZCk7dHJTdHlsZT13aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0cik7cmVsaWFibGVUckRpbWVuc2lvbnNWYWw9KHBhcnNlSW50KHRyU3R5bGUuaGVpZ2h0LDEwKSsKcGFyc2VJbnQodHJTdHlsZS5ib3JkZXJUb3BXaWR0aCwxMCkrCnBhcnNlSW50KHRyU3R5bGUuYm9yZGVyQm90dG9tV2lkdGgsMTApKT09PXRyLm9mZnNldEhlaWdodDtkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQodGFibGUpO30KcmV0dXJuIHJlbGlhYmxlVHJEaW1lbnNpb25zVmFsO319KTt9KSgpO2Z1bmN0aW9uIGN1ckNTUyhlbGVtLG5hbWUsY29tcHV0ZWQpe3ZhciB3aWR0aCxtaW5XaWR0aCxtYXhXaWR0aCxyZXQsc3R5bGU9ZWxlbS5zdHlsZTtjb21wdXRlZD1jb21wdXRlZHx8Z2V0U3R5bGVzKGVsZW0pO2lmKGNvbXB1dGVkKXtyZXQ9Y29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKXx8Y29tcHV0ZWRbbmFtZV07aWYocmV0PT09IiImJiFpc0F0dGFjaGVkKGVsZW0pKXtyZXQ9alF1ZXJ5LnN0eWxlKGVsZW0sbmFtZSk7fQppZighc3VwcG9ydC5waXhlbEJveFN0eWxlcygpJiZybnVtbm9ucHgudGVzdChyZXQpJiZyYm94U3R5bGUudGVzdChuYW1lKSl7d2lkdGg9c3R5bGUud2lkdGg7bWluV2lkdGg9c3R5bGUubWluV2lkdGg7bWF4V2lkdGg9c3R5bGUubWF4V2lkdGg7c3R5bGUubWluV2lkdGg9c3R5bGUubWF4V2lkdGg9c3R5bGUud2lkdGg9cmV0O3JldD1jb21wdXRlZC53aWR0aDtzdHlsZS53aWR0aD13aWR0aDtzdHlsZS5taW5XaWR0aD1taW5XaWR0aDtzdHlsZS5tYXhXaWR0aD1tYXhXaWR0aDt9fQpyZXR1cm4gcmV0IT09dW5kZWZpbmVkP3JldCsiIjpyZXQ7fQpmdW5jdGlvbiBhZGRHZXRIb29rSWYoY29uZGl0aW9uRm4saG9va0ZuKXtyZXR1cm57Z2V0OmZ1bmN0aW9uKCl7aWYoY29uZGl0aW9uRm4oKSl7ZGVsZXRlIHRoaXMuZ2V0O3JldHVybjt9CnJldHVybih0aGlzLmdldD1ob29rRm4pLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt9fTt9CnZhciBjc3NQcmVmaXhlcz1bIldlYmtpdCIsIk1veiIsIm1zIl0sZW1wdHlTdHlsZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJkaXYiKS5zdHlsZSx2ZW5kb3JQcm9wcz17fTtmdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZShuYW1lKXt2YXIgY2FwTmFtZT1uYW1lWzBdLnRvVXBwZXJDYXNlKCkrbmFtZS5zbGljZSgxKSxpPWNzc1ByZWZpeGVzLmxlbmd0aDt3aGlsZShpLS0pe25hbWU9Y3NzUHJlZml4ZXNbaV0rY2FwTmFtZTtpZihuYW1lIGluIGVtcHR5U3R5bGUpe3JldHVybiBuYW1lO319fQpmdW5jdGlvbiBmaW5hbFByb3BOYW1lKG5hbWUpe3ZhciBmaW5hbD1qUXVlcnkuY3NzUHJvcHNbbmFtZV18fHZlbmRvclByb3BzW25hbWVdO2lmKGZpbmFsKXtyZXR1cm4gZmluYWw7fQppZihuYW1lIGluIGVtcHR5U3R5bGUpe3JldHVybiBuYW1lO30KcmV0dXJuIHZlbmRvclByb3BzW25hbWVdPXZlbmRvclByb3BOYW1lKG5hbWUpfHxuYW1lO30KdmFyCnJkaXNwbGF5c3dhcD0vXihub25lfHRhYmxlKD8hLWNbZWFdKS4rKS8scmN1c3RvbVByb3A9L14tLS8sY3NzU2hvdz17cG9zaXRpb246ImFic29sdXRlIix2aXNpYmlsaXR5OiJoaWRkZW4iLGRpc3BsYXk6ImJsb2NrIn0sY3NzTm9ybWFsVHJhbnNmb3JtPXtsZXR0ZXJTcGFjaW5nOiIwIixmb250V2VpZ2h0OiI0MDAifTtmdW5jdGlvbiBzZXRQb3NpdGl2ZU51bWJlcihfZWxlbSx2YWx1ZSxzdWJ0cmFjdCl7dmFyIG1hdGNoZXM9cmNzc051bS5leGVjKHZhbHVlKTtyZXR1cm4gbWF0Y2hlcz9NYXRoLm1heCgwLG1hdGNoZXNbMl0tKHN1YnRyYWN0fHwwKSkrKG1hdGNoZXNbM118fCJweCIpOnZhbHVlO30KZnVuY3Rpb24gYm94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLGJveCxpc0JvcmRlckJveCxzdHlsZXMsY29tcHV0ZWRWYWwpe3ZhciBpPWRpbWVuc2lvbj09PSJ3aWR0aCI/MTowLGV4dHJhPTAsZGVsdGE9MDtpZihib3g9PT0oaXNCb3JkZXJCb3g/ImJvcmRlciI6ImNvbnRlbnQiKSl7cmV0dXJuIDA7fQpmb3IoO2k8NDtpKz0yKXtpZihib3g9PT0ibWFyZ2luIil7ZGVsdGErPWpRdWVyeS5jc3MoZWxlbSxib3grY3NzRXhwYW5kW2ldLHRydWUsc3R5bGVzKTt9CmlmKCFpc0JvcmRlckJveCl7ZGVsdGErPWpRdWVyeS5jc3MoZWxlbSwicGFkZGluZyIrY3NzRXhwYW5kW2ldLHRydWUsc3R5bGVzKTtpZihib3ghPT0icGFkZGluZyIpe2RlbHRhKz1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsdHJ1ZSxzdHlsZXMpO31lbHNle2V4dHJhKz1qUXVlcnkuY3NzKGVsZW0sImJvcmRlciIrY3NzRXhwYW5kW2ldKyJXaWR0aCIsdHJ1ZSxzdHlsZXMpO319ZWxzZXtpZihib3g9PT0iY29udGVudCIpe2RlbHRhLT1qUXVlcnkuY3NzKGVsZW0sInBhZGRpbmciK2Nzc0V4cGFuZFtpXSx0cnVlLHN0eWxlcyk7fQppZihib3ghPT0ibWFyZ2luIil7ZGVsdGEtPWpRdWVyeS5jc3MoZWxlbSwiYm9yZGVyIitjc3NFeHBhbmRbaV0rIldpZHRoIix0cnVlLHN0eWxlcyk7fX19CmlmKCFpc0JvcmRlckJveCYmY29tcHV0ZWRWYWw+PTApe2RlbHRhKz1NYXRoLm1heCgwLE1hdGguY2VpbChlbGVtWyJvZmZzZXQiK2RpbWVuc2lvblswXS50b1VwcGVyQ2FzZSgpK2RpbWVuc2lvbi5zbGljZSgxKV0tCmNvbXB1dGVkVmFsLQpkZWx0YS0KZXh0cmEtCjAuNSkpfHwwO30KcmV0dXJuIGRlbHRhO30KZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodChlbGVtLGRpbWVuc2lvbixleHRyYSl7dmFyIHN0eWxlcz1nZXRTdHlsZXMoZWxlbSksYm94U2l6aW5nTmVlZGVkPSFzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCl8fGV4dHJhLGlzQm9yZGVyQm94PWJveFNpemluZ05lZWRlZCYmalF1ZXJ5LmNzcyhlbGVtLCJib3hTaXppbmciLGZhbHNlLHN0eWxlcyk9PT0iYm9yZGVyLWJveCIsdmFsdWVJc0JvcmRlckJveD1pc0JvcmRlckJveCx2YWw9Y3VyQ1NTKGVsZW0sZGltZW5zaW9uLHN0eWxlcyksb2Zmc2V0UHJvcD0ib2Zmc2V0IitkaW1lbnNpb25bMF0udG9VcHBlckNhc2UoKStkaW1lbnNpb24uc2xpY2UoMSk7aWYocm51bW5vbnB4LnRlc3QodmFsKSl7aWYoIWV4dHJhKXtyZXR1cm4gdmFsO30KdmFsPSJhdXRvIjt9CmlmKCghc3VwcG9ydC5ib3hTaXppbmdSZWxpYWJsZSgpJiZpc0JvcmRlckJveHx8IXN1cHBvcnQucmVsaWFibGVUckRpbWVuc2lvbnMoKSYmbm9kZU5hbWUoZWxlbSwidHIiKXx8dmFsPT09ImF1dG8ifHwhcGFyc2VGbG9hdCh2YWwpJiZqUXVlcnkuY3NzKGVsZW0sImRpc3BsYXkiLGZhbHNlLHN0eWxlcyk9PT0iaW5saW5lIikmJmVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGgpe2lzQm9yZGVyQm94PWpRdWVyeS5jc3MoZWxlbSwiYm94U2l6aW5nIixmYWxzZSxzdHlsZXMpPT09ImJvcmRlci1ib3giO3ZhbHVlSXNCb3JkZXJCb3g9b2Zmc2V0UHJvcCBpbiBlbGVtO2lmKHZhbHVlSXNCb3JkZXJCb3gpe3ZhbD1lbGVtW29mZnNldFByb3BdO319CnZhbD1wYXJzZUZsb2F0KHZhbCl8fDA7cmV0dXJuKHZhbCsKYm94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLGV4dHJhfHwoaXNCb3JkZXJCb3g/ImJvcmRlciI6ImNvbnRlbnQiKSx2YWx1ZUlzQm9yZGVyQm94LHN0eWxlcyx2YWwpKSsicHgiO30KalF1ZXJ5LmV4dGVuZCh7Y3NzSG9va3M6e29wYWNpdHk6e2dldDpmdW5jdGlvbihlbGVtLGNvbXB1dGVkKXtpZihjb21wdXRlZCl7dmFyIHJldD1jdXJDU1MoZWxlbSwib3BhY2l0eSIpO3JldHVybiByZXQ9PT0iIj8iMSI6cmV0O319fX0sY3NzTnVtYmVyOnsiYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQiOnRydWUsImNvbHVtbkNvdW50Ijp0cnVlLCJmaWxsT3BhY2l0eSI6dHJ1ZSwiZmxleEdyb3ciOnRydWUsImZsZXhTaHJpbmsiOnRydWUsImZvbnRXZWlnaHQiOnRydWUsImdyaWRBcmVhIjp0cnVlLCJncmlkQ29sdW1uIjp0cnVlLCJncmlkQ29sdW1uRW5kIjp0cnVlLCJncmlkQ29sdW1uU3RhcnQiOnRydWUsImdyaWRSb3ciOnRydWUsImdyaWRSb3dFbmQiOnRydWUsImdyaWRSb3dTdGFydCI6dHJ1ZSwibGluZUhlaWdodCI6dHJ1ZSwib3BhY2l0eSI6dHJ1ZSwib3JkZXIiOnRydWUsIm9ycGhhbnMiOnRydWUsIndpZG93cyI6dHJ1ZSwiekluZGV4Ijp0cnVlLCJ6b29tIjp0cnVlfSxjc3NQcm9wczp7fSxzdHlsZTpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUsZXh0cmEpe2lmKCFlbGVtfHxlbGVtLm5vZGVUeXBlPT09M3x8ZWxlbS5ub2RlVHlwZT09PTh8fCFlbGVtLnN0eWxlKXtyZXR1cm47fQp2YXIgcmV0LHR5cGUsaG9va3Msb3JpZ05hbWU9Y2FtZWxDYXNlKG5hbWUpLGlzQ3VzdG9tUHJvcD1yY3VzdG9tUHJvcC50ZXN0KG5hbWUpLHN0eWxlPWVsZW0uc3R5bGU7aWYoIWlzQ3VzdG9tUHJvcCl7bmFtZT1maW5hbFByb3BOYW1lKG9yaWdOYW1lKTt9Cmhvb2tzPWpRdWVyeS5jc3NIb29rc1tuYW1lXXx8alF1ZXJ5LmNzc0hvb2tzW29yaWdOYW1lXTtpZih2YWx1ZSE9PXVuZGVmaW5lZCl7dHlwZT10eXBlb2YgdmFsdWU7aWYodHlwZT09PSJzdHJpbmciJiYocmV0PXJjc3NOdW0uZXhlYyh2YWx1ZSkpJiZyZXRbMV0pe3ZhbHVlPWFkanVzdENTUyhlbGVtLG5hbWUscmV0KTt0eXBlPSJudW1iZXIiO30KaWYodmFsdWU9PW51bGx8fHZhbHVlIT09dmFsdWUpe3JldHVybjt9CmlmKHR5cGU9PT0ibnVtYmVyIiYmIWlzQ3VzdG9tUHJvcCl7dmFsdWUrPXJldCYmcmV0WzNdfHwoalF1ZXJ5LmNzc051bWJlcltvcmlnTmFtZV0/IiI6InB4Iik7fQppZighc3VwcG9ydC5jbGVhckNsb25lU3R5bGUmJnZhbHVlPT09IiImJm5hbWUuaW5kZXhPZigiYmFja2dyb3VuZCIpPT09MCl7c3R5bGVbbmFtZV09ImluaGVyaXQiO30KaWYoIWhvb2tzfHwhKCJzZXQiaW4gaG9va3MpfHwodmFsdWU9aG9va3Muc2V0KGVsZW0sdmFsdWUsZXh0cmEpKSE9PXVuZGVmaW5lZCl7aWYoaXNDdXN0b21Qcm9wKXtzdHlsZS5zZXRQcm9wZXJ0eShuYW1lLHZhbHVlKTt9ZWxzZXtzdHlsZVtuYW1lXT12YWx1ZTt9fX1lbHNle2lmKGhvb2tzJiYiZ2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLmdldChlbGVtLGZhbHNlLGV4dHJhKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQpyZXR1cm4gc3R5bGVbbmFtZV07fX0sY3NzOmZ1bmN0aW9uKGVsZW0sbmFtZSxleHRyYSxzdHlsZXMpe3ZhciB2YWwsbnVtLGhvb2tzLG9yaWdOYW1lPWNhbWVsQ2FzZShuYW1lKSxpc0N1c3RvbVByb3A9cmN1c3RvbVByb3AudGVzdChuYW1lKTtpZighaXNDdXN0b21Qcm9wKXtuYW1lPWZpbmFsUHJvcE5hbWUob3JpZ05hbWUpO30KaG9va3M9alF1ZXJ5LmNzc0hvb2tzW25hbWVdfHxqUXVlcnkuY3NzSG9va3Nbb3JpZ05hbWVdO2lmKGhvb2tzJiYiZ2V0ImluIGhvb2tzKXt2YWw9aG9va3MuZ2V0KGVsZW0sdHJ1ZSxleHRyYSk7fQppZih2YWw9PT11bmRlZmluZWQpe3ZhbD1jdXJDU1MoZWxlbSxuYW1lLHN0eWxlcyk7fQppZih2YWw9PT0ibm9ybWFsIiYmbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0pe3ZhbD1jc3NOb3JtYWxUcmFuc2Zvcm1bbmFtZV07fQppZihleHRyYT09PSIifHxleHRyYSl7bnVtPXBhcnNlRmxvYXQodmFsKTtyZXR1cm4gZXh0cmE9PT10cnVlfHxpc0Zpbml0ZShudW0pP251bXx8MDp2YWw7fQpyZXR1cm4gdmFsO319KTtqUXVlcnkuZWFjaChbImhlaWdodCIsIndpZHRoIl0sZnVuY3Rpb24oX2ksZGltZW5zaW9uKXtqUXVlcnkuY3NzSG9va3NbZGltZW5zaW9uXT17Z2V0OmZ1bmN0aW9uKGVsZW0sY29tcHV0ZWQsZXh0cmEpe2lmKGNvbXB1dGVkKXtyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoalF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5IikpJiYoIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGh8fCFlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKT9zd2FwKGVsZW0sY3NzU2hvdyxmdW5jdGlvbigpe3JldHVybiBnZXRXaWR0aE9ySGVpZ2h0KGVsZW0sZGltZW5zaW9uLGV4dHJhKTt9KTpnZXRXaWR0aE9ySGVpZ2h0KGVsZW0sZGltZW5zaW9uLGV4dHJhKTt9fSxzZXQ6ZnVuY3Rpb24oZWxlbSx2YWx1ZSxleHRyYSl7dmFyIG1hdGNoZXMsc3R5bGVzPWdldFN0eWxlcyhlbGVtKSxzY3JvbGxib3hTaXplQnVnZ3k9IXN1cHBvcnQuc2Nyb2xsYm94U2l6ZSgpJiZzdHlsZXMucG9zaXRpb249PT0iYWJzb2x1dGUiLGJveFNpemluZ05lZWRlZD1zY3JvbGxib3hTaXplQnVnZ3l8fGV4dHJhLGlzQm9yZGVyQm94PWJveFNpemluZ05lZWRlZCYmalF1ZXJ5LmNzcyhlbGVtLCJib3hTaXppbmciLGZhbHNlLHN0eWxlcyk9PT0iYm9yZGVyLWJveCIsc3VidHJhY3Q9ZXh0cmE/Ym94TW9kZWxBZGp1c3RtZW50KGVsZW0sZGltZW5zaW9uLGV4dHJhLGlzQm9yZGVyQm94LHN0eWxlcyk6MDtpZihpc0JvcmRlckJveCYmc2Nyb2xsYm94U2l6ZUJ1Z2d5KXtzdWJ0cmFjdC09TWF0aC5jZWlsKGVsZW1bIm9mZnNldCIrZGltZW5zaW9uWzBdLnRvVXBwZXJDYXNlKCkrZGltZW5zaW9uLnNsaWNlKDEpXS0KcGFyc2VGbG9hdChzdHlsZXNbZGltZW5zaW9uXSktCmJveE1vZGVsQWRqdXN0bWVudChlbGVtLGRpbWVuc2lvbiwiYm9yZGVyIixmYWxzZSxzdHlsZXMpLQowLjUpO30KaWYoc3VidHJhY3QmJihtYXRjaGVzPXJjc3NOdW0uZXhlYyh2YWx1ZSkpJiYobWF0Y2hlc1szXXx8InB4IikhPT0icHgiKXtlbGVtLnN0eWxlW2RpbWVuc2lvbl09dmFsdWU7dmFsdWU9alF1ZXJ5LmNzcyhlbGVtLGRpbWVuc2lvbik7fQpyZXR1cm4gc2V0UG9zaXRpdmVOdW1iZXIoZWxlbSx2YWx1ZSxzdWJ0cmFjdCk7fX07fSk7alF1ZXJ5LmNzc0hvb2tzLm1hcmdpbkxlZnQ9YWRkR2V0SG9va0lmKHN1cHBvcnQucmVsaWFibGVNYXJnaW5MZWZ0LGZ1bmN0aW9uKGVsZW0sY29tcHV0ZWQpe2lmKGNvbXB1dGVkKXtyZXR1cm4ocGFyc2VGbG9hdChjdXJDU1MoZWxlbSwibWFyZ2luTGVmdCIpKXx8ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0LQpzd2FwKGVsZW0se21hcmdpbkxlZnQ6MH0sZnVuY3Rpb24oKXtyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O30pKSsicHgiO319KTtqUXVlcnkuZWFjaCh7bWFyZ2luOiIiLHBhZGRpbmc6IiIsYm9yZGVyOiJXaWR0aCJ9LGZ1bmN0aW9uKHByZWZpeCxzdWZmaXgpe2pRdWVyeS5jc3NIb29rc1twcmVmaXgrc3VmZml4XT17ZXhwYW5kOmZ1bmN0aW9uKHZhbHVlKXt2YXIgaT0wLGV4cGFuZGVkPXt9LHBhcnRzPXR5cGVvZiB2YWx1ZT09PSJzdHJpbmciP3ZhbHVlLnNwbGl0KCIgIik6W3ZhbHVlXTtmb3IoO2k8NDtpKyspe2V4cGFuZGVkW3ByZWZpeCtjc3NFeHBhbmRbaV0rc3VmZml4XT1wYXJ0c1tpXXx8cGFydHNbaS0yXXx8cGFydHNbMF07fQpyZXR1cm4gZXhwYW5kZWQ7fX07aWYocHJlZml4IT09Im1hcmdpbiIpe2pRdWVyeS5jc3NIb29rc1twcmVmaXgrc3VmZml4XS5zZXQ9c2V0UG9zaXRpdmVOdW1iZXI7fX0pO2pRdWVyeS5mbi5leHRlbmQoe2NzczpmdW5jdGlvbihuYW1lLHZhbHVlKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSxuYW1lLHZhbHVlKXt2YXIgc3R5bGVzLGxlbixtYXA9e30saT0wO2lmKEFycmF5LmlzQXJyYXkobmFtZSkpe3N0eWxlcz1nZXRTdHlsZXMoZWxlbSk7bGVuPW5hbWUubGVuZ3RoO2Zvcig7aTxsZW47aSsrKXttYXBbbmFtZVtpXV09alF1ZXJ5LmNzcyhlbGVtLG5hbWVbaV0sZmFsc2Usc3R5bGVzKTt9CnJldHVybiBtYXA7fQpyZXR1cm4gdmFsdWUhPT11bmRlZmluZWQ/alF1ZXJ5LnN0eWxlKGVsZW0sbmFtZSx2YWx1ZSk6alF1ZXJ5LmNzcyhlbGVtLG5hbWUpO30sbmFtZSx2YWx1ZSxhcmd1bWVudHMubGVuZ3RoPjEpO319KTtmdW5jdGlvbiBUd2VlbihlbGVtLG9wdGlvbnMscHJvcCxlbmQsZWFzaW5nKXtyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KGVsZW0sb3B0aW9ucyxwcm9wLGVuZCxlYXNpbmcpO30KalF1ZXJ5LlR3ZWVuPVR3ZWVuO1R3ZWVuLnByb3RvdHlwZT17Y29uc3RydWN0b3I6VHdlZW4saW5pdDpmdW5jdGlvbihlbGVtLG9wdGlvbnMscHJvcCxlbmQsZWFzaW5nLHVuaXQpe3RoaXMuZWxlbT1lbGVtO3RoaXMucHJvcD1wcm9wO3RoaXMuZWFzaW5nPWVhc2luZ3x8alF1ZXJ5LmVhc2luZy5fZGVmYXVsdDt0aGlzLm9wdGlvbnM9b3B0aW9uczt0aGlzLnN0YXJ0PXRoaXMubm93PXRoaXMuY3VyKCk7dGhpcy5lbmQ9ZW5kO3RoaXMudW5pdD11bml0fHwoalF1ZXJ5LmNzc051bWJlcltwcm9wXT8iIjoicHgiKTt9LGN1cjpmdW5jdGlvbigpe3ZhciBob29rcz1Ud2Vlbi5wcm9wSG9va3NbdGhpcy5wcm9wXTtyZXR1cm4gaG9va3MmJmhvb2tzLmdldD9ob29rcy5nZXQodGhpcyk6VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCh0aGlzKTt9LHJ1bjpmdW5jdGlvbihwZXJjZW50KXt2YXIgZWFzZWQsaG9va3M9VHdlZW4ucHJvcEhvb2tzW3RoaXMucHJvcF07aWYodGhpcy5vcHRpb25zLmR1cmF0aW9uKXt0aGlzLnBvcz1lYXNlZD1qUXVlcnkuZWFzaW5nW3RoaXMuZWFzaW5nXShwZXJjZW50LHRoaXMub3B0aW9ucy5kdXJhdGlvbipwZXJjZW50LDAsMSx0aGlzLm9wdGlvbnMuZHVyYXRpb24pO31lbHNle3RoaXMucG9zPWVhc2VkPXBlcmNlbnQ7fQp0aGlzLm5vdz0odGhpcy5lbmQtdGhpcy5zdGFydCkqZWFzZWQrdGhpcy5zdGFydDtpZih0aGlzLm9wdGlvbnMuc3RlcCl7dGhpcy5vcHRpb25zLnN0ZXAuY2FsbCh0aGlzLmVsZW0sdGhpcy5ub3csdGhpcyk7fQppZihob29rcyYmaG9va3Muc2V0KXtob29rcy5zZXQodGhpcyk7fWVsc2V7VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCh0aGlzKTt9CnJldHVybiB0aGlzO319O1R3ZWVuLnByb3RvdHlwZS5pbml0LnByb3RvdHlwZT1Ud2Vlbi5wcm90b3R5cGU7VHdlZW4ucHJvcEhvb2tzPXtfZGVmYXVsdDp7Z2V0OmZ1bmN0aW9uKHR3ZWVuKXt2YXIgcmVzdWx0O2lmKHR3ZWVuLmVsZW0ubm9kZVR5cGUhPT0xfHx0d2Vlbi5lbGVtW3R3ZWVuLnByb3BdIT1udWxsJiZ0d2Vlbi5lbGVtLnN0eWxlW3R3ZWVuLnByb3BdPT1udWxsKXtyZXR1cm4gdHdlZW4uZWxlbVt0d2Vlbi5wcm9wXTt9CnJlc3VsdD1qUXVlcnkuY3NzKHR3ZWVuLmVsZW0sdHdlZW4ucHJvcCwiIik7cmV0dXJuIXJlc3VsdHx8cmVzdWx0PT09ImF1dG8iPzA6cmVzdWx0O30sc2V0OmZ1bmN0aW9uKHR3ZWVuKXtpZihqUXVlcnkuZnguc3RlcFt0d2Vlbi5wcm9wXSl7alF1ZXJ5LmZ4LnN0ZXBbdHdlZW4ucHJvcF0odHdlZW4pO31lbHNlIGlmKHR3ZWVuLmVsZW0ubm9kZVR5cGU9PT0xJiYoalF1ZXJ5LmNzc0hvb2tzW3R3ZWVuLnByb3BdfHx0d2Vlbi5lbGVtLnN0eWxlW2ZpbmFsUHJvcE5hbWUodHdlZW4ucHJvcCldIT1udWxsKSl7alF1ZXJ5LnN0eWxlKHR3ZWVuLmVsZW0sdHdlZW4ucHJvcCx0d2Vlbi5ub3crdHdlZW4udW5pdCk7fWVsc2V7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19fTtUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsVG9wPVR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0PXtzZXQ6ZnVuY3Rpb24odHdlZW4pe2lmKHR3ZWVuLmVsZW0ubm9kZVR5cGUmJnR3ZWVuLmVsZW0ucGFyZW50Tm9kZSl7dHdlZW4uZWxlbVt0d2Vlbi5wcm9wXT10d2Vlbi5ub3c7fX19O2pRdWVyeS5lYXNpbmc9e2xpbmVhcjpmdW5jdGlvbihwKXtyZXR1cm4gcDt9LHN3aW5nOmZ1bmN0aW9uKHApe3JldHVybiAwLjUtTWF0aC5jb3MocCpNYXRoLlBJKS8gMjt9LF9kZWZhdWx0OiJzd2luZyJ9O2pRdWVyeS5meD1Ud2Vlbi5wcm90b3R5cGUuaW5pdDtqUXVlcnkuZnguc3RlcD17fTt2YXIKZnhOb3csaW5Qcm9ncmVzcyxyZnh0eXBlcz0vXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8scnJ1bj0vcXVldWVIb29rcyQvO2Z1bmN0aW9uIHNjaGVkdWxlKCl7aWYoaW5Qcm9ncmVzcyl7aWYoZG9jdW1lbnQuaGlkZGVuPT09ZmFsc2UmJndpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUpe3dpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUoc2NoZWR1bGUpO31lbHNle3dpbmRvdy5zZXRUaW1lb3V0KHNjaGVkdWxlLGpRdWVyeS5meC5pbnRlcnZhbCk7fQpqUXVlcnkuZngudGljaygpO319CmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCl7d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtmeE5vdz11bmRlZmluZWQ7fSk7cmV0dXJuKGZ4Tm93PURhdGUubm93KCkpO30KZnVuY3Rpb24gZ2VuRngodHlwZSxpbmNsdWRlV2lkdGgpe3ZhciB3aGljaCxpPTAsYXR0cnM9e2hlaWdodDp0eXBlfTtpbmNsdWRlV2lkdGg9aW5jbHVkZVdpZHRoPzE6MDtmb3IoO2k8NDtpKz0yLWluY2x1ZGVXaWR0aCl7d2hpY2g9Y3NzRXhwYW5kW2ldO2F0dHJzWyJtYXJnaW4iK3doaWNoXT1hdHRyc1sicGFkZGluZyIrd2hpY2hdPXR5cGU7fQppZihpbmNsdWRlV2lkdGgpe2F0dHJzLm9wYWNpdHk9YXR0cnMud2lkdGg9dHlwZTt9CnJldHVybiBhdHRyczt9CmZ1bmN0aW9uIGNyZWF0ZVR3ZWVuKHZhbHVlLHByb3AsYW5pbWF0aW9uKXt2YXIgdHdlZW4sY29sbGVjdGlvbj0oQW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdfHxbXSkuY29uY2F0KEFuaW1hdGlvbi50d2VlbmVyc1siKiJdKSxpbmRleD0wLGxlbmd0aD1jb2xsZWN0aW9uLmxlbmd0aDtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtpZigodHdlZW49Y29sbGVjdGlvbltpbmRleF0uY2FsbChhbmltYXRpb24scHJvcCx2YWx1ZSkpKXtyZXR1cm4gdHdlZW47fX19CmZ1bmN0aW9uIGRlZmF1bHRQcmVmaWx0ZXIoZWxlbSxwcm9wcyxvcHRzKXt2YXIgcHJvcCx2YWx1ZSx0b2dnbGUsaG9va3Msb2xkZmlyZSxwcm9wVHdlZW4scmVzdG9yZURpc3BsYXksZGlzcGxheSxpc0JveD0id2lkdGgiaW4gcHJvcHN8fCJoZWlnaHQiaW4gcHJvcHMsYW5pbT10aGlzLG9yaWc9e30sc3R5bGU9ZWxlbS5zdHlsZSxoaWRkZW49ZWxlbS5ub2RlVHlwZSYmaXNIaWRkZW5XaXRoaW5UcmVlKGVsZW0pLGRhdGFTaG93PWRhdGFQcml2LmdldChlbGVtLCJmeHNob3ciKTtpZighb3B0cy5xdWV1ZSl7aG9va3M9alF1ZXJ5Ll9xdWV1ZUhvb2tzKGVsZW0sImZ4Iik7aWYoaG9va3MudW5xdWV1ZWQ9PW51bGwpe2hvb2tzLnVucXVldWVkPTA7b2xkZmlyZT1ob29rcy5lbXB0eS5maXJlO2hvb2tzLmVtcHR5LmZpcmU9ZnVuY3Rpb24oKXtpZighaG9va3MudW5xdWV1ZWQpe29sZGZpcmUoKTt9fTt9Cmhvb2tzLnVucXVldWVkKys7YW5pbS5hbHdheXMoZnVuY3Rpb24oKXthbmltLmFsd2F5cyhmdW5jdGlvbigpe2hvb2tzLnVucXVldWVkLS07aWYoIWpRdWVyeS5xdWV1ZShlbGVtLCJmeCIpLmxlbmd0aCl7aG9va3MuZW1wdHkuZmlyZSgpO319KTt9KTt9CmZvcihwcm9wIGluIHByb3BzKXt2YWx1ZT1wcm9wc1twcm9wXTtpZihyZnh0eXBlcy50ZXN0KHZhbHVlKSl7ZGVsZXRlIHByb3BzW3Byb3BdO3RvZ2dsZT10b2dnbGV8fHZhbHVlPT09InRvZ2dsZSI7aWYodmFsdWU9PT0oaGlkZGVuPyJoaWRlIjoic2hvdyIpKXtpZih2YWx1ZT09PSJzaG93IiYmZGF0YVNob3cmJmRhdGFTaG93W3Byb3BdIT09dW5kZWZpbmVkKXtoaWRkZW49dHJ1ZTt9ZWxzZXtjb250aW51ZTt9fQpvcmlnW3Byb3BdPWRhdGFTaG93JiZkYXRhU2hvd1twcm9wXXx8alF1ZXJ5LnN0eWxlKGVsZW0scHJvcCk7fX0KcHJvcFR3ZWVuPSFqUXVlcnkuaXNFbXB0eU9iamVjdChwcm9wcyk7aWYoIXByb3BUd2VlbiYmalF1ZXJ5LmlzRW1wdHlPYmplY3Qob3JpZykpe3JldHVybjt9CmlmKGlzQm94JiZlbGVtLm5vZGVUeXBlPT09MSl7b3B0cy5vdmVyZmxvdz1bc3R5bGUub3ZlcmZsb3csc3R5bGUub3ZlcmZsb3dYLHN0eWxlLm92ZXJmbG93WV07cmVzdG9yZURpc3BsYXk9ZGF0YVNob3cmJmRhdGFTaG93LmRpc3BsYXk7aWYocmVzdG9yZURpc3BsYXk9PW51bGwpe3Jlc3RvcmVEaXNwbGF5PWRhdGFQcml2LmdldChlbGVtLCJkaXNwbGF5Iik7fQpkaXNwbGF5PWpRdWVyeS5jc3MoZWxlbSwiZGlzcGxheSIpO2lmKGRpc3BsYXk9PT0ibm9uZSIpe2lmKHJlc3RvcmVEaXNwbGF5KXtkaXNwbGF5PXJlc3RvcmVEaXNwbGF5O31lbHNle3Nob3dIaWRlKFtlbGVtXSx0cnVlKTtyZXN0b3JlRGlzcGxheT1lbGVtLnN0eWxlLmRpc3BsYXl8fHJlc3RvcmVEaXNwbGF5O2Rpc3BsYXk9alF1ZXJ5LmNzcyhlbGVtLCJkaXNwbGF5Iik7c2hvd0hpZGUoW2VsZW1dKTt9fQppZihkaXNwbGF5PT09ImlubGluZSJ8fGRpc3BsYXk9PT0iaW5saW5lLWJsb2NrIiYmcmVzdG9yZURpc3BsYXkhPW51bGwpe2lmKGpRdWVyeS5jc3MoZWxlbSwiZmxvYXQiKT09PSJub25lIil7aWYoIXByb3BUd2Vlbil7YW5pbS5kb25lKGZ1bmN0aW9uKCl7c3R5bGUuZGlzcGxheT1yZXN0b3JlRGlzcGxheTt9KTtpZihyZXN0b3JlRGlzcGxheT09bnVsbCl7ZGlzcGxheT1zdHlsZS5kaXNwbGF5O3Jlc3RvcmVEaXNwbGF5PWRpc3BsYXk9PT0ibm9uZSI/IiI6ZGlzcGxheTt9fQpzdHlsZS5kaXNwbGF5PSJpbmxpbmUtYmxvY2siO319fQppZihvcHRzLm92ZXJmbG93KXtzdHlsZS5vdmVyZmxvdz0iaGlkZGVuIjthbmltLmFsd2F5cyhmdW5jdGlvbigpe3N0eWxlLm92ZXJmbG93PW9wdHMub3ZlcmZsb3dbMF07c3R5bGUub3ZlcmZsb3dYPW9wdHMub3ZlcmZsb3dbMV07c3R5bGUub3ZlcmZsb3dZPW9wdHMub3ZlcmZsb3dbMl07fSk7fQpwcm9wVHdlZW49ZmFsc2U7Zm9yKHByb3AgaW4gb3JpZyl7aWYoIXByb3BUd2Vlbil7aWYoZGF0YVNob3cpe2lmKCJoaWRkZW4iaW4gZGF0YVNob3cpe2hpZGRlbj1kYXRhU2hvdy5oaWRkZW47fX1lbHNle2RhdGFTaG93PWRhdGFQcml2LmFjY2VzcyhlbGVtLCJmeHNob3ciLHtkaXNwbGF5OnJlc3RvcmVEaXNwbGF5fSk7fQppZih0b2dnbGUpe2RhdGFTaG93LmhpZGRlbj0haGlkZGVuO30KaWYoaGlkZGVuKXtzaG93SGlkZShbZWxlbV0sdHJ1ZSk7fQphbmltLmRvbmUoZnVuY3Rpb24oKXtpZighaGlkZGVuKXtzaG93SGlkZShbZWxlbV0pO30KZGF0YVByaXYucmVtb3ZlKGVsZW0sImZ4c2hvdyIpO2Zvcihwcm9wIGluIG9yaWcpe2pRdWVyeS5zdHlsZShlbGVtLHByb3Asb3JpZ1twcm9wXSk7fX0pO30KcHJvcFR3ZWVuPWNyZWF0ZVR3ZWVuKGhpZGRlbj9kYXRhU2hvd1twcm9wXTowLHByb3AsYW5pbSk7aWYoIShwcm9wIGluIGRhdGFTaG93KSl7ZGF0YVNob3dbcHJvcF09cHJvcFR3ZWVuLnN0YXJ0O2lmKGhpZGRlbil7cHJvcFR3ZWVuLmVuZD1wcm9wVHdlZW4uc3RhcnQ7cHJvcFR3ZWVuLnN0YXJ0PTA7fX19fQpmdW5jdGlvbiBwcm9wRmlsdGVyKHByb3BzLHNwZWNpYWxFYXNpbmcpe3ZhciBpbmRleCxuYW1lLGVhc2luZyx2YWx1ZSxob29rcztmb3IoaW5kZXggaW4gcHJvcHMpe25hbWU9Y2FtZWxDYXNlKGluZGV4KTtlYXNpbmc9c3BlY2lhbEVhc2luZ1tuYW1lXTt2YWx1ZT1wcm9wc1tpbmRleF07aWYoQXJyYXkuaXNBcnJheSh2YWx1ZSkpe2Vhc2luZz12YWx1ZVsxXTt2YWx1ZT1wcm9wc1tpbmRleF09dmFsdWVbMF07fQppZihpbmRleCE9PW5hbWUpe3Byb3BzW25hbWVdPXZhbHVlO2RlbGV0ZSBwcm9wc1tpbmRleF07fQpob29rcz1qUXVlcnkuY3NzSG9va3NbbmFtZV07aWYoaG9va3MmJiJleHBhbmQiaW4gaG9va3Mpe3ZhbHVlPWhvb2tzLmV4cGFuZCh2YWx1ZSk7ZGVsZXRlIHByb3BzW25hbWVdO2ZvcihpbmRleCBpbiB2YWx1ZSl7aWYoIShpbmRleCBpbiBwcm9wcykpe3Byb3BzW2luZGV4XT12YWx1ZVtpbmRleF07c3BlY2lhbEVhc2luZ1tpbmRleF09ZWFzaW5nO319fWVsc2V7c3BlY2lhbEVhc2luZ1tuYW1lXT1lYXNpbmc7fX19CmZ1bmN0aW9uIEFuaW1hdGlvbihlbGVtLHByb3BlcnRpZXMsb3B0aW9ucyl7dmFyIHJlc3VsdCxzdG9wcGVkLGluZGV4PTAsbGVuZ3RoPUFuaW1hdGlvbi5wcmVmaWx0ZXJzLmxlbmd0aCxkZWZlcnJlZD1qUXVlcnkuRGVmZXJyZWQoKS5hbHdheXMoZnVuY3Rpb24oKXtkZWxldGUgdGljay5lbGVtO30pLHRpY2s9ZnVuY3Rpb24oKXtpZihzdG9wcGVkKXtyZXR1cm4gZmFsc2U7fQp2YXIgY3VycmVudFRpbWU9ZnhOb3d8fGNyZWF0ZUZ4Tm93KCkscmVtYWluaW5nPU1hdGgubWF4KDAsYW5pbWF0aW9uLnN0YXJ0VGltZSthbmltYXRpb24uZHVyYXRpb24tY3VycmVudFRpbWUpLHRlbXA9cmVtYWluaW5nIC8gYW5pbWF0aW9uLmR1cmF0aW9ufHwwLHBlcmNlbnQ9MS10ZW1wLGluZGV4PTAsbGVuZ3RoPWFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO2Zvcig7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2FuaW1hdGlvbi50d2VlbnNbaW5kZXhdLnJ1bihwZXJjZW50KTt9CmRlZmVycmVkLm5vdGlmeVdpdGgoZWxlbSxbYW5pbWF0aW9uLHBlcmNlbnQscmVtYWluaW5nXSk7aWYocGVyY2VudDwxJiZsZW5ndGgpe3JldHVybiByZW1haW5pbmc7fQppZighbGVuZ3RoKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTt9CmRlZmVycmVkLnJlc29sdmVXaXRoKGVsZW0sW2FuaW1hdGlvbl0pO3JldHVybiBmYWxzZTt9LGFuaW1hdGlvbj1kZWZlcnJlZC5wcm9taXNlKHtlbGVtOmVsZW0scHJvcHM6alF1ZXJ5LmV4dGVuZCh7fSxwcm9wZXJ0aWVzKSxvcHRzOmpRdWVyeS5leHRlbmQodHJ1ZSx7c3BlY2lhbEVhc2luZzp7fSxlYXNpbmc6alF1ZXJ5LmVhc2luZy5fZGVmYXVsdH0sb3B0aW9ucyksb3JpZ2luYWxQcm9wZXJ0aWVzOnByb3BlcnRpZXMsb3JpZ2luYWxPcHRpb25zOm9wdGlvbnMsc3RhcnRUaW1lOmZ4Tm93fHxjcmVhdGVGeE5vdygpLGR1cmF0aW9uOm9wdGlvbnMuZHVyYXRpb24sdHdlZW5zOltdLGNyZWF0ZVR3ZWVuOmZ1bmN0aW9uKHByb3AsZW5kKXt2YXIgdHdlZW49alF1ZXJ5LlR3ZWVuKGVsZW0sYW5pbWF0aW9uLm9wdHMscHJvcCxlbmQsYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1twcm9wXXx8YW5pbWF0aW9uLm9wdHMuZWFzaW5nKTthbmltYXRpb24udHdlZW5zLnB1c2godHdlZW4pO3JldHVybiB0d2Vlbjt9LHN0b3A6ZnVuY3Rpb24oZ290b0VuZCl7dmFyIGluZGV4PTAsbGVuZ3RoPWdvdG9FbmQ/YW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg6MDtpZihzdG9wcGVkKXtyZXR1cm4gdGhpczt9CnN0b3BwZWQ9dHJ1ZTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXthbmltYXRpb24udHdlZW5zW2luZGV4XS5ydW4oMSk7fQppZihnb3RvRW5kKXtkZWZlcnJlZC5ub3RpZnlXaXRoKGVsZW0sW2FuaW1hdGlvbiwxLDBdKTtkZWZlcnJlZC5yZXNvbHZlV2l0aChlbGVtLFthbmltYXRpb24sZ290b0VuZF0pO31lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoZWxlbSxbYW5pbWF0aW9uLGdvdG9FbmRdKTt9CnJldHVybiB0aGlzO319KSxwcm9wcz1hbmltYXRpb24ucHJvcHM7cHJvcEZpbHRlcihwcm9wcyxhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nKTtmb3IoO2luZGV4PGxlbmd0aDtpbmRleCsrKXtyZXN1bHQ9QW5pbWF0aW9uLnByZWZpbHRlcnNbaW5kZXhdLmNhbGwoYW5pbWF0aW9uLGVsZW0scHJvcHMsYW5pbWF0aW9uLm9wdHMpO2lmKHJlc3VsdCl7aWYoaXNGdW5jdGlvbihyZXN1bHQuc3RvcCkpe2pRdWVyeS5fcXVldWVIb29rcyhhbmltYXRpb24uZWxlbSxhbmltYXRpb24ub3B0cy5xdWV1ZSkuc3RvcD1yZXN1bHQuc3RvcC5iaW5kKHJlc3VsdCk7fQpyZXR1cm4gcmVzdWx0O319CmpRdWVyeS5tYXAocHJvcHMsY3JlYXRlVHdlZW4sYW5pbWF0aW9uKTtpZihpc0Z1bmN0aW9uKGFuaW1hdGlvbi5vcHRzLnN0YXJ0KSl7YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbChlbGVtLGFuaW1hdGlvbik7fQphbmltYXRpb24ucHJvZ3Jlc3MoYW5pbWF0aW9uLm9wdHMucHJvZ3Jlc3MpLmRvbmUoYW5pbWF0aW9uLm9wdHMuZG9uZSxhbmltYXRpb24ub3B0cy5jb21wbGV0ZSkuZmFpbChhbmltYXRpb24ub3B0cy5mYWlsKS5hbHdheXMoYW5pbWF0aW9uLm9wdHMuYWx3YXlzKTtqUXVlcnkuZngudGltZXIoalF1ZXJ5LmV4dGVuZCh0aWNrLHtlbGVtOmVsZW0sYW5pbTphbmltYXRpb24scXVldWU6YW5pbWF0aW9uLm9wdHMucXVldWV9KSk7cmV0dXJuIGFuaW1hdGlvbjt9CmpRdWVyeS5BbmltYXRpb249alF1ZXJ5LmV4dGVuZChBbmltYXRpb24se3R3ZWVuZXJzOnsiKiI6W2Z1bmN0aW9uKHByb3AsdmFsdWUpe3ZhciB0d2Vlbj10aGlzLmNyZWF0ZVR3ZWVuKHByb3AsdmFsdWUpO2FkanVzdENTUyh0d2Vlbi5lbGVtLHByb3AscmNzc051bS5leGVjKHZhbHVlKSx0d2Vlbik7cmV0dXJuIHR3ZWVuO31dfSx0d2VlbmVyOmZ1bmN0aW9uKHByb3BzLGNhbGxiYWNrKXtpZihpc0Z1bmN0aW9uKHByb3BzKSl7Y2FsbGJhY2s9cHJvcHM7cHJvcHM9WyIqIl07fWVsc2V7cHJvcHM9cHJvcHMubWF0Y2gocm5vdGh0bWx3aGl0ZSk7fQp2YXIgcHJvcCxpbmRleD0wLGxlbmd0aD1wcm9wcy5sZW5ndGg7Zm9yKDtpbmRleDxsZW5ndGg7aW5kZXgrKyl7cHJvcD1wcm9wc1tpbmRleF07QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdPUFuaW1hdGlvbi50d2VlbmVyc1twcm9wXXx8W107QW5pbWF0aW9uLnR3ZWVuZXJzW3Byb3BdLnVuc2hpZnQoY2FsbGJhY2spO319LHByZWZpbHRlcnM6W2RlZmF1bHRQcmVmaWx0ZXJdLHByZWZpbHRlcjpmdW5jdGlvbihjYWxsYmFjayxwcmVwZW5kKXtpZihwcmVwZW5kKXtBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KGNhbGxiYWNrKTt9ZWxzZXtBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKGNhbGxiYWNrKTt9fX0pO2pRdWVyeS5zcGVlZD1mdW5jdGlvbihzcGVlZCxlYXNpbmcsZm4pe3ZhciBvcHQ9c3BlZWQmJnR5cGVvZiBzcGVlZD09PSJvYmplY3QiP2pRdWVyeS5leHRlbmQoe30sc3BlZWQpOntjb21wbGV0ZTpmbnx8IWZuJiZlYXNpbmd8fGlzRnVuY3Rpb24oc3BlZWQpJiZzcGVlZCxkdXJhdGlvbjpzcGVlZCxlYXNpbmc6Zm4mJmVhc2luZ3x8ZWFzaW5nJiYhaXNGdW5jdGlvbihlYXNpbmcpJiZlYXNpbmd9O2lmKGpRdWVyeS5meC5vZmYpe29wdC5kdXJhdGlvbj0wO31lbHNle2lmKHR5cGVvZiBvcHQuZHVyYXRpb24hPT0ibnVtYmVyIil7aWYob3B0LmR1cmF0aW9uIGluIGpRdWVyeS5meC5zcGVlZHMpe29wdC5kdXJhdGlvbj1qUXVlcnkuZnguc3BlZWRzW29wdC5kdXJhdGlvbl07fWVsc2V7b3B0LmR1cmF0aW9uPWpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7fX19CmlmKG9wdC5xdWV1ZT09bnVsbHx8b3B0LnF1ZXVlPT09dHJ1ZSl7b3B0LnF1ZXVlPSJmeCI7fQpvcHQub2xkPW9wdC5jb21wbGV0ZTtvcHQuY29tcGxldGU9ZnVuY3Rpb24oKXtpZihpc0Z1bmN0aW9uKG9wdC5vbGQpKXtvcHQub2xkLmNhbGwodGhpcyk7fQppZihvcHQucXVldWUpe2pRdWVyeS5kZXF1ZXVlKHRoaXMsb3B0LnF1ZXVlKTt9fTtyZXR1cm4gb3B0O307alF1ZXJ5LmZuLmV4dGVuZCh7ZmFkZVRvOmZ1bmN0aW9uKHNwZWVkLHRvLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHRoaXMuZmlsdGVyKGlzSGlkZGVuV2l0aGluVHJlZSkuY3NzKCJvcGFjaXR5IiwwKS5zaG93KCkuZW5kKCkuYW5pbWF0ZSh7b3BhY2l0eTp0b30sc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9LGFuaW1hdGU6ZnVuY3Rpb24ocHJvcCxzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3ZhciBlbXB0eT1qUXVlcnkuaXNFbXB0eU9iamVjdChwcm9wKSxvcHRhbGw9alF1ZXJ5LnNwZWVkKHNwZWVkLGVhc2luZyxjYWxsYmFjayksZG9BbmltYXRpb249ZnVuY3Rpb24oKXt2YXIgYW5pbT1BbmltYXRpb24odGhpcyxqUXVlcnkuZXh0ZW5kKHt9LHByb3ApLG9wdGFsbCk7aWYoZW1wdHl8fGRhdGFQcml2LmdldCh0aGlzLCJmaW5pc2giKSl7YW5pbS5zdG9wKHRydWUpO319O2RvQW5pbWF0aW9uLmZpbmlzaD1kb0FuaW1hdGlvbjtyZXR1cm4gZW1wdHl8fG9wdGFsbC5xdWV1ZT09PWZhbHNlP3RoaXMuZWFjaChkb0FuaW1hdGlvbik6dGhpcy5xdWV1ZShvcHRhbGwucXVldWUsZG9BbmltYXRpb24pO30sc3RvcDpmdW5jdGlvbih0eXBlLGNsZWFyUXVldWUsZ290b0VuZCl7dmFyIHN0b3BRdWV1ZT1mdW5jdGlvbihob29rcyl7dmFyIHN0b3A9aG9va3Muc3RvcDtkZWxldGUgaG9va3Muc3RvcDtzdG9wKGdvdG9FbmQpO307aWYodHlwZW9mIHR5cGUhPT0ic3RyaW5nIil7Z290b0VuZD1jbGVhclF1ZXVlO2NsZWFyUXVldWU9dHlwZTt0eXBlPXVuZGVmaW5lZDt9CmlmKGNsZWFyUXVldWUpe3RoaXMucXVldWUodHlwZXx8ImZ4IixbXSk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGRlcXVldWU9dHJ1ZSxpbmRleD10eXBlIT1udWxsJiZ0eXBlKyJxdWV1ZUhvb2tzIix0aW1lcnM9alF1ZXJ5LnRpbWVycyxkYXRhPWRhdGFQcml2LmdldCh0aGlzKTtpZihpbmRleCl7aWYoZGF0YVtpbmRleF0mJmRhdGFbaW5kZXhdLnN0b3Ape3N0b3BRdWV1ZShkYXRhW2luZGV4XSk7fX1lbHNle2ZvcihpbmRleCBpbiBkYXRhKXtpZihkYXRhW2luZGV4XSYmZGF0YVtpbmRleF0uc3RvcCYmcnJ1bi50ZXN0KGluZGV4KSl7c3RvcFF1ZXVlKGRhdGFbaW5kZXhdKTt9fX0KZm9yKGluZGV4PXRpbWVycy5sZW5ndGg7aW5kZXgtLTspe2lmKHRpbWVyc1tpbmRleF0uZWxlbT09PXRoaXMmJih0eXBlPT1udWxsfHx0aW1lcnNbaW5kZXhdLnF1ZXVlPT09dHlwZSkpe3RpbWVyc1tpbmRleF0uYW5pbS5zdG9wKGdvdG9FbmQpO2RlcXVldWU9ZmFsc2U7dGltZXJzLnNwbGljZShpbmRleCwxKTt9fQppZihkZXF1ZXVlfHwhZ290b0VuZCl7alF1ZXJ5LmRlcXVldWUodGhpcyx0eXBlKTt9fSk7fSxmaW5pc2g6ZnVuY3Rpb24odHlwZSl7aWYodHlwZSE9PWZhbHNlKXt0eXBlPXR5cGV8fCJmeCI7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGluZGV4LGRhdGE9ZGF0YVByaXYuZ2V0KHRoaXMpLHF1ZXVlPWRhdGFbdHlwZSsicXVldWUiXSxob29rcz1kYXRhW3R5cGUrInF1ZXVlSG9va3MiXSx0aW1lcnM9alF1ZXJ5LnRpbWVycyxsZW5ndGg9cXVldWU/cXVldWUubGVuZ3RoOjA7ZGF0YS5maW5pc2g9dHJ1ZTtqUXVlcnkucXVldWUodGhpcyx0eXBlLFtdKTtpZihob29rcyYmaG9va3Muc3RvcCl7aG9va3Muc3RvcC5jYWxsKHRoaXMsdHJ1ZSk7fQpmb3IoaW5kZXg9dGltZXJzLmxlbmd0aDtpbmRleC0tOyl7aWYodGltZXJzW2luZGV4XS5lbGVtPT09dGhpcyYmdGltZXJzW2luZGV4XS5xdWV1ZT09PXR5cGUpe3RpbWVyc1tpbmRleF0uYW5pbS5zdG9wKHRydWUpO3RpbWVycy5zcGxpY2UoaW5kZXgsMSk7fX0KZm9yKGluZGV4PTA7aW5kZXg8bGVuZ3RoO2luZGV4Kyspe2lmKHF1ZXVlW2luZGV4XSYmcXVldWVbaW5kZXhdLmZpbmlzaCl7cXVldWVbaW5kZXhdLmZpbmlzaC5jYWxsKHRoaXMpO319CmRlbGV0ZSBkYXRhLmZpbmlzaDt9KTt9fSk7alF1ZXJ5LmVhY2goWyJ0b2dnbGUiLCJzaG93IiwiaGlkZSJdLGZ1bmN0aW9uKF9pLG5hbWUpe3ZhciBjc3NGbj1qUXVlcnkuZm5bbmFtZV07alF1ZXJ5LmZuW25hbWVdPWZ1bmN0aW9uKHNwZWVkLGVhc2luZyxjYWxsYmFjayl7cmV0dXJuIHNwZWVkPT1udWxsfHx0eXBlb2Ygc3BlZWQ9PT0iYm9vbGVhbiI/Y3NzRm4uYXBwbHkodGhpcyxhcmd1bWVudHMpOnRoaXMuYW5pbWF0ZShnZW5GeChuYW1lLHRydWUpLHNwZWVkLGVhc2luZyxjYWxsYmFjayk7fTt9KTtqUXVlcnkuZWFjaCh7c2xpZGVEb3duOmdlbkZ4KCJzaG93Iiksc2xpZGVVcDpnZW5GeCgiaGlkZSIpLHNsaWRlVG9nZ2xlOmdlbkZ4KCJ0b2dnbGUiKSxmYWRlSW46e29wYWNpdHk6InNob3cifSxmYWRlT3V0OntvcGFjaXR5OiJoaWRlIn0sZmFkZVRvZ2dsZTp7b3BhY2l0eToidG9nZ2xlIn19LGZ1bmN0aW9uKG5hbWUscHJvcHMpe2pRdWVyeS5mbltuYW1lXT1mdW5jdGlvbihzcGVlZCxlYXNpbmcsY2FsbGJhY2spe3JldHVybiB0aGlzLmFuaW1hdGUocHJvcHMsc3BlZWQsZWFzaW5nLGNhbGxiYWNrKTt9O30pO2pRdWVyeS50aW1lcnM9W107alF1ZXJ5LmZ4LnRpY2s9ZnVuY3Rpb24oKXt2YXIgdGltZXIsaT0wLHRpbWVycz1qUXVlcnkudGltZXJzO2Z4Tm93PURhdGUubm93KCk7Zm9yKDtpPHRpbWVycy5sZW5ndGg7aSsrKXt0aW1lcj10aW1lcnNbaV07aWYoIXRpbWVyKCkmJnRpbWVyc1tpXT09PXRpbWVyKXt0aW1lcnMuc3BsaWNlKGktLSwxKTt9fQppZighdGltZXJzLmxlbmd0aCl7alF1ZXJ5LmZ4LnN0b3AoKTt9CmZ4Tm93PXVuZGVmaW5lZDt9O2pRdWVyeS5meC50aW1lcj1mdW5jdGlvbih0aW1lcil7alF1ZXJ5LnRpbWVycy5wdXNoKHRpbWVyKTtqUXVlcnkuZnguc3RhcnQoKTt9O2pRdWVyeS5meC5pbnRlcnZhbD0xMztqUXVlcnkuZnguc3RhcnQ9ZnVuY3Rpb24oKXtpZihpblByb2dyZXNzKXtyZXR1cm47fQppblByb2dyZXNzPXRydWU7c2NoZWR1bGUoKTt9O2pRdWVyeS5meC5zdG9wPWZ1bmN0aW9uKCl7aW5Qcm9ncmVzcz1udWxsO307alF1ZXJ5LmZ4LnNwZWVkcz17c2xvdzo2MDAsZmFzdDoyMDAsX2RlZmF1bHQ6NDAwfTtqUXVlcnkuZm4uZGVsYXk9ZnVuY3Rpb24odGltZSx0eXBlKXt0aW1lPWpRdWVyeS5meD9qUXVlcnkuZnguc3BlZWRzW3RpbWVdfHx0aW1lOnRpbWU7dHlwZT10eXBlfHwiZngiO3JldHVybiB0aGlzLnF1ZXVlKHR5cGUsZnVuY3Rpb24obmV4dCxob29rcyl7dmFyIHRpbWVvdXQ9d2luZG93LnNldFRpbWVvdXQobmV4dCx0aW1lKTtob29rcy5zdG9wPWZ1bmN0aW9uKCl7d2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0KTt9O30pO307KGZ1bmN0aW9uKCl7dmFyIGlucHV0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImlucHV0Iiksc2VsZWN0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoInNlbGVjdCIpLG9wdD1zZWxlY3QuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgib3B0aW9uIikpO2lucHV0LnR5cGU9ImNoZWNrYm94IjtzdXBwb3J0LmNoZWNrT249aW5wdXQudmFsdWUhPT0iIjtzdXBwb3J0Lm9wdFNlbGVjdGVkPW9wdC5zZWxlY3RlZDtpbnB1dD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJpbnB1dCIpO2lucHV0LnZhbHVlPSJ0IjtpbnB1dC50eXBlPSJyYWRpbyI7c3VwcG9ydC5yYWRpb1ZhbHVlPWlucHV0LnZhbHVlPT09InQiO30pKCk7dmFyIGJvb2xIb29rLGF0dHJIYW5kbGU9alF1ZXJ5LmV4cHIuYXR0ckhhbmRsZTtqUXVlcnkuZm4uZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKG5hbWUsdmFsdWUpe3JldHVybiBhY2Nlc3ModGhpcyxqUXVlcnkuYXR0cixuYW1lLHZhbHVlLGFyZ3VtZW50cy5sZW5ndGg+MSk7fSxyZW1vdmVBdHRyOmZ1bmN0aW9uKG5hbWUpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkucmVtb3ZlQXR0cih0aGlzLG5hbWUpO30pO319KTtqUXVlcnkuZXh0ZW5kKHthdHRyOmZ1bmN0aW9uKGVsZW0sbmFtZSx2YWx1ZSl7dmFyIHJldCxob29rcyxuVHlwZT1lbGVtLm5vZGVUeXBlO2lmKG5UeXBlPT09M3x8blR5cGU9PT04fHxuVHlwZT09PTIpe3JldHVybjt9CmlmKHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZT09PSJ1bmRlZmluZWQiKXtyZXR1cm4galF1ZXJ5LnByb3AoZWxlbSxuYW1lLHZhbHVlKTt9CmlmKG5UeXBlIT09MXx8IWpRdWVyeS5pc1hNTERvYyhlbGVtKSl7aG9va3M9alF1ZXJ5LmF0dHJIb29rc1tuYW1lLnRvTG93ZXJDYXNlKCldfHwoalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC50ZXN0KG5hbWUpP2Jvb2xIb29rOnVuZGVmaW5lZCk7fQppZih2YWx1ZSE9PXVuZGVmaW5lZCl7aWYodmFsdWU9PT1udWxsKXtqUXVlcnkucmVtb3ZlQXR0cihlbGVtLG5hbWUpO3JldHVybjt9CmlmKGhvb2tzJiYic2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLnNldChlbGVtLHZhbHVlLG5hbWUpKSE9PXVuZGVmaW5lZCl7cmV0dXJuIHJldDt9CmVsZW0uc2V0QXR0cmlidXRlKG5hbWUsdmFsdWUrIiIpO3JldHVybiB2YWx1ZTt9CmlmKGhvb2tzJiYiZ2V0ImluIGhvb2tzJiYocmV0PWhvb2tzLmdldChlbGVtLG5hbWUpKSE9PW51bGwpe3JldHVybiByZXQ7fQpyZXQ9alF1ZXJ5LmZpbmQuYXR0cihlbGVtLG5hbWUpO3JldHVybiByZXQ9PW51bGw/dW5kZWZpbmVkOnJldDt9LGF0dHJIb29rczp7dHlwZTp7c2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUpe2lmKCFzdXBwb3J0LnJhZGlvVmFsdWUmJnZhbHVlPT09InJhZGlvIiYmbm9kZU5hbWUoZWxlbSwiaW5wdXQiKSl7dmFyIHZhbD1lbGVtLnZhbHVlO2VsZW0uc2V0QXR0cmlidXRlKCJ0eXBlIix2YWx1ZSk7aWYodmFsKXtlbGVtLnZhbHVlPXZhbDt9CnJldHVybiB2YWx1ZTt9fX19LHJlbW92ZUF0dHI6ZnVuY3Rpb24oZWxlbSx2YWx1ZSl7dmFyIG5hbWUsaT0wLGF0dHJOYW1lcz12YWx1ZSYmdmFsdWUubWF0Y2gocm5vdGh0bWx3aGl0ZSk7aWYoYXR0ck5hbWVzJiZlbGVtLm5vZGVUeXBlPT09MSl7d2hpbGUoKG5hbWU9YXR0ck5hbWVzW2krK10pKXtlbGVtLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTt9fX19KTtib29sSG9vaz17c2V0OmZ1bmN0aW9uKGVsZW0sdmFsdWUsbmFtZSl7aWYodmFsdWU9PT1mYWxzZSl7alF1ZXJ5LnJlbW92ZUF0dHIoZWxlbSxuYW1lKTt9ZWxzZXtlbGVtLnNldEF0dHJpYnV0ZShuYW1lLG5hbWUpO30KcmV0dXJuIG5hbWU7fX07alF1ZXJ5LmVhY2goalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goL1x3Ky9nKSxmdW5jdGlvbihfaSxuYW1lKXt2YXIgZ2V0dGVyPWF0dHJIYW5kbGVbbmFtZV18fGpRdWVyeS5maW5kLmF0dHI7YXR0ckhhbmRsZVtuYW1lXT1mdW5jdGlvbihlbGVtLG5hbWUsaXNYTUwpe3ZhciByZXQsaGFuZGxlLGxvd2VyY2FzZU5hbWU9bmFtZS50b0xvd2VyQ2FzZSgpO2lmKCFpc1hNTCl7aGFuZGxlPWF0dHJIYW5kbGVbbG93ZXJjYXNlTmFtZV07YXR0ckhhbmRsZVtsb3dlcmNhc2VOYW1lXT1yZXQ7cmV0PWdldHRlcihlbGVtLG5hbWUsaXNYTUwpIT1udWxsP2xvd2VyY2FzZU5hbWU6bnVsbDthdHRySGFuZGxlW2xvd2VyY2FzZU5hbWVdPWhhbmRsZTt9CnJldHVybiByZXQ7fTt9KTt2YXIgcmZvY3VzYWJsZT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLHJjbGlja2FibGU9L14oPzphfGFyZWEpJC9pO2pRdWVyeS5mbi5leHRlbmQoe3Byb3A6ZnVuY3Rpb24obmFtZSx2YWx1ZSl7cmV0dXJuIGFjY2Vzcyh0aGlzLGpRdWVyeS5wcm9wLG5hbWUsdmFsdWUsYXJndW1lbnRzLmxlbmd0aD4xKTt9LHJlbW92ZVByb3A6ZnVuY3Rpb24obmFtZSl7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe2RlbGV0ZSB0aGlzW2pRdWVyeS5wcm9wRml4W25hbWVdfHxuYW1lXTt9KTt9fSk7alF1ZXJ5LmV4dGVuZCh7cHJvcDpmdW5jdGlvbihlbGVtLG5hbWUsdmFsdWUpe3ZhciByZXQsaG9va3MsblR5cGU9ZWxlbS5ub2RlVHlwZTtpZihuVHlwZT09PTN8fG5UeXBlPT09OHx8blR5cGU9PT0yKXtyZXR1cm47fQppZihuVHlwZSE9PTF8fCFqUXVlcnkuaXNYTUxEb2MoZWxlbSkpe25hbWU9alF1ZXJ5LnByb3BGaXhbbmFtZV18fG5hbWU7aG9va3M9alF1ZXJ5LnByb3BIb29rc1tuYW1lXTt9CmlmKHZhbHVlIT09dW5kZWZpbmVkKXtpZihob29rcyYmInNldCJpbiBob29rcyYmKHJldD1ob29rcy5zZXQoZWxlbSx2YWx1ZSxuYW1lKSkhPT11bmRlZmluZWQpe3JldHVybiByZXQ7fQpyZXR1cm4oZWxlbVtuYW1lXT12YWx1ZSk7fQppZihob29rcyYmImdldCJpbiBob29rcyYmKHJldD1ob29rcy5nZXQoZWxlbSxuYW1lKSkhPT1udWxsKXtyZXR1cm4gcmV0O30KcmV0dXJuIGVsZW1bbmFtZV07fSxwcm9wSG9va3M6e3RhYkluZGV4OntnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHRhYmluZGV4PWpRdWVyeS5maW5kLmF0dHIoZWxlbSwidGFiaW5kZXgiKTtpZih0YWJpbmRleCl7cmV0dXJuIHBhcnNlSW50KHRhYmluZGV4LDEwKTt9CmlmKHJmb2N1c2FibGUudGVzdChlbGVtLm5vZGVOYW1lKXx8cmNsaWNrYWJsZS50ZXN0KGVsZW0ubm9kZU5hbWUpJiZlbGVtLmhyZWYpe3JldHVybiAwO30KcmV0dXJuLTE7fX19LHByb3BGaXg6eyJmb3IiOiJodG1sRm9yIiwiY2xhc3MiOiJjbGFzc05hbWUifX0pO2lmKCFzdXBwb3J0Lm9wdFNlbGVjdGVkKXtqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkPXtnZXQ6ZnVuY3Rpb24oZWxlbSl7dmFyIHBhcmVudD1lbGVtLnBhcmVudE5vZGU7aWYocGFyZW50JiZwYXJlbnQucGFyZW50Tm9kZSl7cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDt9CnJldHVybiBudWxsO30sc2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciBwYXJlbnQ9ZWxlbS5wYXJlbnROb2RlO2lmKHBhcmVudCl7cGFyZW50LnNlbGVjdGVkSW5kZXg7aWYocGFyZW50LnBhcmVudE5vZGUpe3BhcmVudC5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7fX19fTt9CmpRdWVyeS5lYWNoKFsidGFiSW5kZXgiLCJyZWFkT25seSIsIm1heExlbmd0aCIsImNlbGxTcGFjaW5nIiwiY2VsbFBhZGRpbmciLCJyb3dTcGFuIiwiY29sU3BhbiIsInVzZU1hcCIsImZyYW1lQm9yZGVyIiwiY29udGVudEVkaXRhYmxlIl0sZnVuY3Rpb24oKXtqUXVlcnkucHJvcEZpeFt0aGlzLnRvTG93ZXJDYXNlKCldPXRoaXM7fSk7ZnVuY3Rpb24gc3RyaXBBbmRDb2xsYXBzZSh2YWx1ZSl7dmFyIHRva2Vucz12YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107cmV0dXJuIHRva2Vucy5qb2luKCIgIik7fQpmdW5jdGlvbiBnZXRDbGFzcyhlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUmJmVsZW0uZ2V0QXR0cmlidXRlKCJjbGFzcyIpfHwiIjt9CmZ1bmN0aW9uIGNsYXNzZXNUb0FycmF5KHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuIHZhbHVlO30KaWYodHlwZW9mIHZhbHVlPT09InN0cmluZyIpe3JldHVybiB2YWx1ZS5tYXRjaChybm90aHRtbHdoaXRlKXx8W107fQpyZXR1cm5bXTt9CmpRdWVyeS5mbi5leHRlbmQoe2FkZENsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5hZGRDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KY2xhc3Nlcz1jbGFzc2VzVG9BcnJheSh2YWx1ZSk7aWYoY2xhc3Nlcy5sZW5ndGgpe3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2N1clZhbHVlPWdldENsYXNzKGVsZW0pO2N1cj1lbGVtLm5vZGVUeXBlPT09MSYmKCIgIitzdHJpcEFuZENvbGxhcHNlKGN1clZhbHVlKSsiICIpO2lmKGN1cil7aj0wO3doaWxlKChjbGF6ej1jbGFzc2VzW2orK10pKXtpZihjdXIuaW5kZXhPZigiICIrY2xhenorIiAiKTwwKXtjdXIrPWNsYXp6KyIgIjt9fQpmaW5hbFZhbHVlPXN0cmlwQW5kQ29sbGFwc2UoY3VyKTtpZihjdXJWYWx1ZSE9PWZpbmFsVmFsdWUpe2VsZW0uc2V0QXR0cmlidXRlKCJjbGFzcyIsZmluYWxWYWx1ZSk7fX19fQpyZXR1cm4gdGhpczt9LHJlbW92ZUNsYXNzOmZ1bmN0aW9uKHZhbHVlKXt2YXIgY2xhc3NlcyxlbGVtLGN1cixjdXJWYWx1ZSxjbGF6eixqLGZpbmFsVmFsdWUsaT0wO2lmKGlzRnVuY3Rpb24odmFsdWUpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGope2pRdWVyeSh0aGlzKS5yZW1vdmVDbGFzcyh2YWx1ZS5jYWxsKHRoaXMsaixnZXRDbGFzcyh0aGlzKSkpO30pO30KaWYoIWFyZ3VtZW50cy5sZW5ndGgpe3JldHVybiB0aGlzLmF0dHIoImNsYXNzIiwiIik7fQpjbGFzc2VzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTtpZihjbGFzc2VzLmxlbmd0aCl7d2hpbGUoKGVsZW09dGhpc1tpKytdKSl7Y3VyVmFsdWU9Z2V0Q2xhc3MoZWxlbSk7Y3VyPWVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoY3VyVmFsdWUpKyIgIik7aWYoY3VyKXtqPTA7d2hpbGUoKGNsYXp6PWNsYXNzZXNbaisrXSkpe3doaWxlKGN1ci5pbmRleE9mKCIgIitjbGF6eisiICIpPi0xKXtjdXI9Y3VyLnJlcGxhY2UoIiAiK2NsYXp6KyIgIiwiICIpO319CmZpbmFsVmFsdWU9c3RyaXBBbmRDb2xsYXBzZShjdXIpO2lmKGN1clZhbHVlIT09ZmluYWxWYWx1ZSl7ZWxlbS5zZXRBdHRyaWJ1dGUoImNsYXNzIixmaW5hbFZhbHVlKTt9fX19CnJldHVybiB0aGlzO30sdG9nZ2xlQ2xhc3M6ZnVuY3Rpb24odmFsdWUsc3RhdGVWYWwpe3ZhciB0eXBlPXR5cGVvZiB2YWx1ZSxpc1ZhbGlkVmFsdWU9dHlwZT09PSJzdHJpbmcifHxBcnJheS5pc0FycmF5KHZhbHVlKTtpZih0eXBlb2Ygc3RhdGVWYWw9PT0iYm9vbGVhbiImJmlzVmFsaWRWYWx1ZSl7cmV0dXJuIHN0YXRlVmFsP3RoaXMuYWRkQ2xhc3ModmFsdWUpOnRoaXMucmVtb3ZlQ2xhc3ModmFsdWUpO30KaWYoaXNGdW5jdGlvbih2YWx1ZSkpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oaSl7alF1ZXJ5KHRoaXMpLnRvZ2dsZUNsYXNzKHZhbHVlLmNhbGwodGhpcyxpLGdldENsYXNzKHRoaXMpLHN0YXRlVmFsKSxzdGF0ZVZhbCk7fSk7fQpyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGNsYXNzTmFtZSxpLHNlbGYsY2xhc3NOYW1lcztpZihpc1ZhbGlkVmFsdWUpe2k9MDtzZWxmPWpRdWVyeSh0aGlzKTtjbGFzc05hbWVzPWNsYXNzZXNUb0FycmF5KHZhbHVlKTt3aGlsZSgoY2xhc3NOYW1lPWNsYXNzTmFtZXNbaSsrXSkpe2lmKHNlbGYuaGFzQ2xhc3MoY2xhc3NOYW1lKSl7c2VsZi5yZW1vdmVDbGFzcyhjbGFzc05hbWUpO31lbHNle3NlbGYuYWRkQ2xhc3MoY2xhc3NOYW1lKTt9fX1lbHNlIGlmKHZhbHVlPT09dW5kZWZpbmVkfHx0eXBlPT09ImJvb2xlYW4iKXtjbGFzc05hbWU9Z2V0Q2xhc3ModGhpcyk7aWYoY2xhc3NOYW1lKXtkYXRhUHJpdi5zZXQodGhpcywiX19jbGFzc05hbWVfXyIsY2xhc3NOYW1lKTt9CmlmKHRoaXMuc2V0QXR0cmlidXRlKXt0aGlzLnNldEF0dHJpYnV0ZSgiY2xhc3MiLGNsYXNzTmFtZXx8dmFsdWU9PT1mYWxzZT8iIjpkYXRhUHJpdi5nZXQodGhpcywiX19jbGFzc05hbWVfXyIpfHwiIik7fX19KTt9LGhhc0NsYXNzOmZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgY2xhc3NOYW1lLGVsZW0saT0wO2NsYXNzTmFtZT0iICIrc2VsZWN0b3IrIiAiO3doaWxlKChlbGVtPXRoaXNbaSsrXSkpe2lmKGVsZW0ubm9kZVR5cGU9PT0xJiYoIiAiK3N0cmlwQW5kQ29sbGFwc2UoZ2V0Q2xhc3MoZWxlbSkpKyIgIikuaW5kZXhPZihjbGFzc05hbWUpPi0xKXtyZXR1cm4gdHJ1ZTt9fQpyZXR1cm4gZmFsc2U7fX0pO3ZhciBycmV0dXJuPS9cci9nO2pRdWVyeS5mbi5leHRlbmQoe3ZhbDpmdW5jdGlvbih2YWx1ZSl7dmFyIGhvb2tzLHJldCx2YWx1ZUlzRnVuY3Rpb24sZWxlbT10aGlzWzBdO2lmKCFhcmd1bWVudHMubGVuZ3RoKXtpZihlbGVtKXtob29rcz1qUXVlcnkudmFsSG9va3NbZWxlbS50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW2VsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoaG9va3MmJiJnZXQiaW4gaG9va3MmJihyZXQ9aG9va3MuZ2V0KGVsZW0sInZhbHVlIikpIT09dW5kZWZpbmVkKXtyZXR1cm4gcmV0O30KcmV0PWVsZW0udmFsdWU7aWYodHlwZW9mIHJldD09PSJzdHJpbmciKXtyZXR1cm4gcmV0LnJlcGxhY2UocnJldHVybiwiIik7fQpyZXR1cm4gcmV0PT1udWxsPyIiOnJldDt9CnJldHVybjt9CnZhbHVlSXNGdW5jdGlvbj1pc0Z1bmN0aW9uKHZhbHVlKTtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe3ZhciB2YWw7aWYodGhpcy5ub2RlVHlwZSE9PTEpe3JldHVybjt9CmlmKHZhbHVlSXNGdW5jdGlvbil7dmFsPXZhbHVlLmNhbGwodGhpcyxpLGpRdWVyeSh0aGlzKS52YWwoKSk7fWVsc2V7dmFsPXZhbHVlO30KaWYodmFsPT1udWxsKXt2YWw9IiI7fWVsc2UgaWYodHlwZW9mIHZhbD09PSJudW1iZXIiKXt2YWwrPSIiO31lbHNlIGlmKEFycmF5LmlzQXJyYXkodmFsKSl7dmFsPWpRdWVyeS5tYXAodmFsLGZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gdmFsdWU9PW51bGw/IiI6dmFsdWUrIiI7fSk7fQpob29rcz1qUXVlcnkudmFsSG9va3NbdGhpcy50eXBlXXx8alF1ZXJ5LnZhbEhvb2tzW3RoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKV07aWYoIWhvb2tzfHwhKCJzZXQiaW4gaG9va3MpfHxob29rcy5zZXQodGhpcyx2YWwsInZhbHVlIik9PT11bmRlZmluZWQpe3RoaXMudmFsdWU9dmFsO319KTt9fSk7alF1ZXJ5LmV4dGVuZCh7dmFsSG9va3M6e29wdGlvbjp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWw9alF1ZXJ5LmZpbmQuYXR0cihlbGVtLCJ2YWx1ZSIpO3JldHVybiB2YWwhPW51bGw/dmFsOnN0cmlwQW5kQ29sbGFwc2UoalF1ZXJ5LnRleHQoZWxlbSkpO319LHNlbGVjdDp7Z2V0OmZ1bmN0aW9uKGVsZW0pe3ZhciB2YWx1ZSxvcHRpb24saSxvcHRpb25zPWVsZW0ub3B0aW9ucyxpbmRleD1lbGVtLnNlbGVjdGVkSW5kZXgsb25lPWVsZW0udHlwZT09PSJzZWxlY3Qtb25lIix2YWx1ZXM9b25lP251bGw6W10sbWF4PW9uZT9pbmRleCsxOm9wdGlvbnMubGVuZ3RoO2lmKGluZGV4PDApe2k9bWF4O31lbHNle2k9b25lP2luZGV4OjA7fQpmb3IoO2k8bWF4O2krKyl7b3B0aW9uPW9wdGlvbnNbaV07aWYoKG9wdGlvbi5zZWxlY3RlZHx8aT09PWluZGV4KSYmIW9wdGlvbi5kaXNhYmxlZCYmKCFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZHx8IW5vZGVOYW1lKG9wdGlvbi5wYXJlbnROb2RlLCJvcHRncm91cCIpKSl7dmFsdWU9alF1ZXJ5KG9wdGlvbikudmFsKCk7aWYob25lKXtyZXR1cm4gdmFsdWU7fQp2YWx1ZXMucHVzaCh2YWx1ZSk7fX0KcmV0dXJuIHZhbHVlczt9LHNldDpmdW5jdGlvbihlbGVtLHZhbHVlKXt2YXIgb3B0aW9uU2V0LG9wdGlvbixvcHRpb25zPWVsZW0ub3B0aW9ucyx2YWx1ZXM9alF1ZXJ5Lm1ha2VBcnJheSh2YWx1ZSksaT1vcHRpb25zLmxlbmd0aDt3aGlsZShpLS0pe29wdGlvbj1vcHRpb25zW2ldO2lmKG9wdGlvbi5zZWxlY3RlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkudmFsSG9va3Mub3B0aW9uLmdldChvcHRpb24pLHZhbHVlcyk+LTEpe29wdGlvblNldD10cnVlO319CmlmKCFvcHRpb25TZXQpe2VsZW0uc2VsZWN0ZWRJbmRleD0tMTt9CnJldHVybiB2YWx1ZXM7fX19fSk7alF1ZXJ5LmVhY2goWyJyYWRpbyIsImNoZWNrYm94Il0sZnVuY3Rpb24oKXtqUXVlcnkudmFsSG9va3NbdGhpc109e3NldDpmdW5jdGlvbihlbGVtLHZhbHVlKXtpZihBcnJheS5pc0FycmF5KHZhbHVlKSl7cmV0dXJuKGVsZW0uY2hlY2tlZD1qUXVlcnkuaW5BcnJheShqUXVlcnkoZWxlbSkudmFsKCksdmFsdWUpPi0xKTt9fX07aWYoIXN1cHBvcnQuY2hlY2tPbil7alF1ZXJ5LnZhbEhvb2tzW3RoaXNdLmdldD1mdW5jdGlvbihlbGVtKXtyZXR1cm4gZWxlbS5nZXRBdHRyaWJ1dGUoInZhbHVlIik9PT1udWxsPyJvbiI6ZWxlbS52YWx1ZTt9O319KTtzdXBwb3J0LmZvY3VzaW49Im9uZm9jdXNpbiJpbiB3aW5kb3c7dmFyIHJmb2N1c01vcnBoPS9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxzdG9wUHJvcGFnYXRpb25DYWxsYmFjaz1mdW5jdGlvbihlKXtlLnN0b3BQcm9wYWdhdGlvbigpO307alF1ZXJ5LmV4dGVuZChqUXVlcnkuZXZlbnQse3RyaWdnZXI6ZnVuY3Rpb24oZXZlbnQsZGF0YSxlbGVtLG9ubHlIYW5kbGVycyl7dmFyIGksY3VyLHRtcCxidWJibGVUeXBlLG9udHlwZSxoYW5kbGUsc3BlY2lhbCxsYXN0RWxlbWVudCxldmVudFBhdGg9W2VsZW18fGRvY3VtZW50XSx0eXBlPWhhc093bi5jYWxsKGV2ZW50LCJ0eXBlIik/ZXZlbnQudHlwZTpldmVudCxuYW1lc3BhY2VzPWhhc093bi5jYWxsKGV2ZW50LCJuYW1lc3BhY2UiKT9ldmVudC5uYW1lc3BhY2Uuc3BsaXQoIi4iKTpbXTtjdXI9bGFzdEVsZW1lbnQ9dG1wPWVsZW09ZWxlbXx8ZG9jdW1lbnQ7aWYoZWxlbS5ub2RlVHlwZT09PTN8fGVsZW0ubm9kZVR5cGU9PT04KXtyZXR1cm47fQppZihyZm9jdXNNb3JwaC50ZXN0KHR5cGUralF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCkpe3JldHVybjt9CmlmKHR5cGUuaW5kZXhPZigiLiIpPi0xKXtuYW1lc3BhY2VzPXR5cGUuc3BsaXQoIi4iKTt0eXBlPW5hbWVzcGFjZXMuc2hpZnQoKTtuYW1lc3BhY2VzLnNvcnQoKTt9Cm9udHlwZT10eXBlLmluZGV4T2YoIjoiKTwwJiYib24iK3R5cGU7ZXZlbnQ9ZXZlbnRbalF1ZXJ5LmV4cGFuZG9dP2V2ZW50Om5ldyBqUXVlcnkuRXZlbnQodHlwZSx0eXBlb2YgZXZlbnQ9PT0ib2JqZWN0IiYmZXZlbnQpO2V2ZW50LmlzVHJpZ2dlcj1vbmx5SGFuZGxlcnM/MjozO2V2ZW50Lm5hbWVzcGFjZT1uYW1lc3BhY2VzLmpvaW4oIi4iKTtldmVudC5ybmFtZXNwYWNlPWV2ZW50Lm5hbWVzcGFjZT9uZXcgUmVnRXhwKCIoXnxcXC4pIituYW1lc3BhY2VzLmpvaW4oIlxcLig/Oi4qXFwufCkiKSsiKFxcLnwkKSIpOm51bGw7ZXZlbnQucmVzdWx0PXVuZGVmaW5lZDtpZighZXZlbnQudGFyZ2V0KXtldmVudC50YXJnZXQ9ZWxlbTt9CmRhdGE9ZGF0YT09bnVsbD9bZXZlbnRdOmpRdWVyeS5tYWtlQXJyYXkoZGF0YSxbZXZlbnRdKTtzcGVjaWFsPWpRdWVyeS5ldmVudC5zcGVjaWFsW3R5cGVdfHx7fTtpZighb25seUhhbmRsZXJzJiZzcGVjaWFsLnRyaWdnZXImJnNwZWNpYWwudHJpZ2dlci5hcHBseShlbGVtLGRhdGEpPT09ZmFsc2Upe3JldHVybjt9CmlmKCFvbmx5SGFuZGxlcnMmJiFzcGVjaWFsLm5vQnViYmxlJiYhaXNXaW5kb3coZWxlbSkpe2J1YmJsZVR5cGU9c3BlY2lhbC5kZWxlZ2F0ZVR5cGV8fHR5cGU7aWYoIXJmb2N1c01vcnBoLnRlc3QoYnViYmxlVHlwZSt0eXBlKSl7Y3VyPWN1ci5wYXJlbnROb2RlO30KZm9yKDtjdXI7Y3VyPWN1ci5wYXJlbnROb2RlKXtldmVudFBhdGgucHVzaChjdXIpO3RtcD1jdXI7fQppZih0bXA9PT0oZWxlbS5vd25lckRvY3VtZW50fHxkb2N1bWVudCkpe2V2ZW50UGF0aC5wdXNoKHRtcC5kZWZhdWx0Vmlld3x8dG1wLnBhcmVudFdpbmRvd3x8d2luZG93KTt9fQppPTA7d2hpbGUoKGN1cj1ldmVudFBhdGhbaSsrXSkmJiFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudD1jdXI7ZXZlbnQudHlwZT1pPjE/YnViYmxlVHlwZTpzcGVjaWFsLmJpbmRUeXBlfHx0eXBlO2hhbmRsZT0oZGF0YVByaXYuZ2V0KGN1ciwiZXZlbnRzIil8fE9iamVjdC5jcmVhdGUobnVsbCkpW2V2ZW50LnR5cGVdJiZkYXRhUHJpdi5nZXQoY3VyLCJoYW5kbGUiKTtpZihoYW5kbGUpe2hhbmRsZS5hcHBseShjdXIsZGF0YSk7fQpoYW5kbGU9b250eXBlJiZjdXJbb250eXBlXTtpZihoYW5kbGUmJmhhbmRsZS5hcHBseSYmYWNjZXB0RGF0YShjdXIpKXtldmVudC5yZXN1bHQ9aGFuZGxlLmFwcGx5KGN1cixkYXRhKTtpZihldmVudC5yZXN1bHQ9PT1mYWxzZSl7ZXZlbnQucHJldmVudERlZmF1bHQoKTt9fX0KZXZlbnQudHlwZT10eXBlO2lmKCFvbmx5SGFuZGxlcnMmJiFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSl7aWYoKCFzcGVjaWFsLl9kZWZhdWx0fHxzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KGV2ZW50UGF0aC5wb3AoKSxkYXRhKT09PWZhbHNlKSYmYWNjZXB0RGF0YShlbGVtKSl7aWYob250eXBlJiZpc0Z1bmN0aW9uKGVsZW1bdHlwZV0pJiYhaXNXaW5kb3coZWxlbSkpe3RtcD1lbGVtW29udHlwZV07aWYodG1wKXtlbGVtW29udHlwZV09bnVsbDt9CmpRdWVyeS5ldmVudC50cmlnZ2VyZWQ9dHlwZTtpZihldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpKXtsYXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKHR5cGUsc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2spO30KZWxlbVt0eXBlXSgpO2lmKGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkpe2xhc3RFbGVtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSxzdG9wUHJvcGFnYXRpb25DYWxsYmFjayk7fQpqUXVlcnkuZXZlbnQudHJpZ2dlcmVkPXVuZGVmaW5lZDtpZih0bXApe2VsZW1bb250eXBlXT10bXA7fX19fQpyZXR1cm4gZXZlbnQucmVzdWx0O30sc2ltdWxhdGU6ZnVuY3Rpb24odHlwZSxlbGVtLGV2ZW50KXt2YXIgZT1qUXVlcnkuZXh0ZW5kKG5ldyBqUXVlcnkuRXZlbnQoKSxldmVudCx7dHlwZTp0eXBlLGlzU2ltdWxhdGVkOnRydWV9KTtqUXVlcnkuZXZlbnQudHJpZ2dlcihlLG51bGwsZWxlbSk7fX0pO2pRdWVyeS5mbi5leHRlbmQoe3RyaWdnZXI6ZnVuY3Rpb24odHlwZSxkYXRhKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKCl7alF1ZXJ5LmV2ZW50LnRyaWdnZXIodHlwZSxkYXRhLHRoaXMpO30pO30sdHJpZ2dlckhhbmRsZXI6ZnVuY3Rpb24odHlwZSxkYXRhKXt2YXIgZWxlbT10aGlzWzBdO2lmKGVsZW0pe3JldHVybiBqUXVlcnkuZXZlbnQudHJpZ2dlcih0eXBlLGRhdGEsZWxlbSx0cnVlKTt9fX0pO2lmKCFzdXBwb3J0LmZvY3VzaW4pe2pRdWVyeS5lYWNoKHtmb2N1czoiZm9jdXNpbiIsYmx1cjoiZm9jdXNvdXQifSxmdW5jdGlvbihvcmlnLGZpeCl7dmFyIGhhbmRsZXI9ZnVuY3Rpb24oZXZlbnQpe2pRdWVyeS5ldmVudC5zaW11bGF0ZShmaXgsZXZlbnQudGFyZ2V0LGpRdWVyeS5ldmVudC5maXgoZXZlbnQpKTt9O2pRdWVyeS5ldmVudC5zcGVjaWFsW2ZpeF09e3NldHVwOmZ1bmN0aW9uKCl7dmFyIGRvYz10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMuZG9jdW1lbnR8fHRoaXMsYXR0YWNoZXM9ZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgpO2lmKCFhdHRhY2hlcyl7ZG9jLmFkZEV2ZW50TGlzdGVuZXIob3JpZyxoYW5kbGVyLHRydWUpO30KZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgsKGF0dGFjaGVzfHwwKSsxKTt9LHRlYXJkb3duOmZ1bmN0aW9uKCl7dmFyIGRvYz10aGlzLm93bmVyRG9jdW1lbnR8fHRoaXMuZG9jdW1lbnR8fHRoaXMsYXR0YWNoZXM9ZGF0YVByaXYuYWNjZXNzKGRvYyxmaXgpLTE7aWYoIWF0dGFjaGVzKXtkb2MucmVtb3ZlRXZlbnRMaXN0ZW5lcihvcmlnLGhhbmRsZXIsdHJ1ZSk7ZGF0YVByaXYucmVtb3ZlKGRvYyxmaXgpO31lbHNle2RhdGFQcml2LmFjY2Vzcyhkb2MsZml4LGF0dGFjaGVzKTt9fX07fSk7fQp2YXIgbG9jYXRpb249d2luZG93LmxvY2F0aW9uO3ZhciBub25jZT17Z3VpZDpEYXRlLm5vdygpfTt2YXIgcnF1ZXJ5PSgvXD8vKTtqUXVlcnkucGFyc2VYTUw9ZnVuY3Rpb24oZGF0YSl7dmFyIHhtbCxwYXJzZXJFcnJvckVsZW07aWYoIWRhdGF8fHR5cGVvZiBkYXRhIT09InN0cmluZyIpe3JldHVybiBudWxsO30KdHJ5e3htbD0obmV3IHdpbmRvdy5ET01QYXJzZXIoKSkucGFyc2VGcm9tU3RyaW5nKGRhdGEsInRleHQveG1sIik7fWNhdGNoKGUpe30KcGFyc2VyRXJyb3JFbGVtPXhtbCYmeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJwYXJzZXJlcnJvciIpWzBdO2lmKCF4bWx8fHBhcnNlckVycm9yRWxlbSl7alF1ZXJ5LmVycm9yKCJJbnZhbGlkIFhNTDogIisocGFyc2VyRXJyb3JFbGVtP2pRdWVyeS5tYXAocGFyc2VyRXJyb3JFbGVtLmNoaWxkTm9kZXMsZnVuY3Rpb24oZWwpe3JldHVybiBlbC50ZXh0Q29udGVudDt9KS5qb2luKCJcbiIpOmRhdGEpKTt9CnJldHVybiB4bWw7fTt2YXIKcmJyYWNrZXQ9L1xbXF0kLyxyQ1JMRj0vXHI/XG4vZyxyc3VibWl0dGVyVHlwZXM9L14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLHJzdWJtaXR0YWJsZT0vXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7ZnVuY3Rpb24gYnVpbGRQYXJhbXMocHJlZml4LG9iaix0cmFkaXRpb25hbCxhZGQpe3ZhciBuYW1lO2lmKEFycmF5LmlzQXJyYXkob2JqKSl7alF1ZXJ5LmVhY2gob2JqLGZ1bmN0aW9uKGksdil7aWYodHJhZGl0aW9uYWx8fHJicmFja2V0LnRlc3QocHJlZml4KSl7YWRkKHByZWZpeCx2KTt9ZWxzZXtidWlsZFBhcmFtcyhwcmVmaXgrIlsiKyh0eXBlb2Ygdj09PSJvYmplY3QiJiZ2IT1udWxsP2k6IiIpKyJdIix2LHRyYWRpdGlvbmFsLGFkZCk7fX0pO31lbHNlIGlmKCF0cmFkaXRpb25hbCYmdG9UeXBlKG9iaik9PT0ib2JqZWN0Iil7Zm9yKG5hbWUgaW4gb2JqKXtidWlsZFBhcmFtcyhwcmVmaXgrIlsiK25hbWUrIl0iLG9ialtuYW1lXSx0cmFkaXRpb25hbCxhZGQpO319ZWxzZXthZGQocHJlZml4LG9iaik7fX0KalF1ZXJ5LnBhcmFtPWZ1bmN0aW9uKGEsdHJhZGl0aW9uYWwpe3ZhciBwcmVmaXgscz1bXSxhZGQ9ZnVuY3Rpb24oa2V5LHZhbHVlT3JGdW5jdGlvbil7dmFyIHZhbHVlPWlzRnVuY3Rpb24odmFsdWVPckZ1bmN0aW9uKT92YWx1ZU9yRnVuY3Rpb24oKTp2YWx1ZU9yRnVuY3Rpb247c1tzLmxlbmd0aF09ZW5jb2RlVVJJQ29tcG9uZW50KGtleSkrIj0iKwplbmNvZGVVUklDb21wb25lbnQodmFsdWU9PW51bGw/IiI6dmFsdWUpO307aWYoYT09bnVsbCl7cmV0dXJuIiI7fQppZihBcnJheS5pc0FycmF5KGEpfHwoYS5qcXVlcnkmJiFqUXVlcnkuaXNQbGFpbk9iamVjdChhKSkpe2pRdWVyeS5lYWNoKGEsZnVuY3Rpb24oKXthZGQodGhpcy5uYW1lLHRoaXMudmFsdWUpO30pO31lbHNle2ZvcihwcmVmaXggaW4gYSl7YnVpbGRQYXJhbXMocHJlZml4LGFbcHJlZml4XSx0cmFkaXRpb25hbCxhZGQpO319CnJldHVybiBzLmpvaW4oIiYiKTt9O2pRdWVyeS5mbi5leHRlbmQoe3NlcmlhbGl6ZTpmdW5jdGlvbigpe3JldHVybiBqUXVlcnkucGFyYW0odGhpcy5zZXJpYWxpemVBcnJheSgpKTt9LHNlcmlhbGl6ZUFycmF5OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMubWFwKGZ1bmN0aW9uKCl7dmFyIGVsZW1lbnRzPWpRdWVyeS5wcm9wKHRoaXMsImVsZW1lbnRzIik7cmV0dXJuIGVsZW1lbnRzP2pRdWVyeS5tYWtlQXJyYXkoZWxlbWVudHMpOnRoaXM7fSkuZmlsdGVyKGZ1bmN0aW9uKCl7dmFyIHR5cGU9dGhpcy50eXBlO3JldHVybiB0aGlzLm5hbWUmJiFqUXVlcnkodGhpcykuaXMoIjpkaXNhYmxlZCIpJiZyc3VibWl0dGFibGUudGVzdCh0aGlzLm5vZGVOYW1lKSYmIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KHR5cGUpJiYodGhpcy5jaGVja2VkfHwhcmNoZWNrYWJsZVR5cGUudGVzdCh0eXBlKSk7fSkubWFwKGZ1bmN0aW9uKF9pLGVsZW0pe3ZhciB2YWw9alF1ZXJ5KHRoaXMpLnZhbCgpO2lmKHZhbD09bnVsbCl7cmV0dXJuIG51bGw7fQppZihBcnJheS5pc0FycmF5KHZhbCkpe3JldHVybiBqUXVlcnkubWFwKHZhbCxmdW5jdGlvbih2YWwpe3JldHVybntuYW1lOmVsZW0ubmFtZSx2YWx1ZTp2YWwucmVwbGFjZShyQ1JMRiwiXHJcbiIpfTt9KTt9CnJldHVybntuYW1lOmVsZW0ubmFtZSx2YWx1ZTp2YWwucmVwbGFjZShyQ1JMRiwiXHJcbiIpfTt9KS5nZXQoKTt9fSk7dmFyCnIyMD0vJTIwL2cscmhhc2g9LyMuKiQvLHJhbnRpQ2FjaGU9LyhbPyZdKV89W14mXSovLHJoZWFkZXJzPS9eKC4qPyk6WyBcdF0qKFteXHJcbl0qKSQvbWcscmxvY2FsUHJvdG9jb2w9L14oPzphYm91dHxhcHB8YXBwLXN0b3JhZ2V8ListZXh0ZW5zaW9ufGZpbGV8cmVzfHdpZGdldCk6JC8scm5vQ29udGVudD0vXig/OkdFVHxIRUFEKSQvLHJwcm90b2NvbD0vXlwvXC8vLHByZWZpbHRlcnM9e30sdHJhbnNwb3J0cz17fSxhbGxUeXBlcz0iKi8iLmNvbmNhdCgiKiIpLG9yaWdpbkFuY2hvcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7b3JpZ2luQW5jaG9yLmhyZWY9bG9jYXRpb24uaHJlZjtmdW5jdGlvbiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoc3RydWN0dXJlKXtyZXR1cm4gZnVuY3Rpb24oZGF0YVR5cGVFeHByZXNzaW9uLGZ1bmMpe2lmKHR5cGVvZiBkYXRhVHlwZUV4cHJlc3Npb24hPT0ic3RyaW5nIil7ZnVuYz1kYXRhVHlwZUV4cHJlc3Npb247ZGF0YVR5cGVFeHByZXNzaW9uPSIqIjt9CnZhciBkYXRhVHlwZSxpPTAsZGF0YVR5cGVzPWRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKHJub3RodG1sd2hpdGUpfHxbXTtpZihpc0Z1bmN0aW9uKGZ1bmMpKXt3aGlsZSgoZGF0YVR5cGU9ZGF0YVR5cGVzW2krK10pKXtpZihkYXRhVHlwZVswXT09PSIrIil7ZGF0YVR5cGU9ZGF0YVR5cGUuc2xpY2UoMSl8fCIqIjsoc3RydWN0dXJlW2RhdGFUeXBlXT1zdHJ1Y3R1cmVbZGF0YVR5cGVdfHxbXSkudW5zaGlmdChmdW5jKTt9ZWxzZXsoc3RydWN0dXJlW2RhdGFUeXBlXT1zdHJ1Y3R1cmVbZGF0YVR5cGVdfHxbXSkucHVzaChmdW5jKTt9fX19O30KZnVuY3Rpb24gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoc3RydWN0dXJlLG9wdGlvbnMsb3JpZ2luYWxPcHRpb25zLGpxWEhSKXt2YXIgaW5zcGVjdGVkPXt9LHNlZWtpbmdUcmFuc3BvcnQ9KHN0cnVjdHVyZT09PXRyYW5zcG9ydHMpO2Z1bmN0aW9uIGluc3BlY3QoZGF0YVR5cGUpe3ZhciBzZWxlY3RlZDtpbnNwZWN0ZWRbZGF0YVR5cGVdPXRydWU7alF1ZXJ5LmVhY2goc3RydWN0dXJlW2RhdGFUeXBlXXx8W10sZnVuY3Rpb24oXyxwcmVmaWx0ZXJPckZhY3Rvcnkpe3ZhciBkYXRhVHlwZU9yVHJhbnNwb3J0PXByZWZpbHRlck9yRmFjdG9yeShvcHRpb25zLG9yaWdpbmFsT3B0aW9ucyxqcVhIUik7aWYodHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQ9PT0ic3RyaW5nIiYmIXNlZWtpbmdUcmFuc3BvcnQmJiFpbnNwZWN0ZWRbZGF0YVR5cGVPclRyYW5zcG9ydF0pe29wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoZGF0YVR5cGVPclRyYW5zcG9ydCk7aW5zcGVjdChkYXRhVHlwZU9yVHJhbnNwb3J0KTtyZXR1cm4gZmFsc2U7fWVsc2UgaWYoc2Vla2luZ1RyYW5zcG9ydCl7cmV0dXJuIShzZWxlY3RlZD1kYXRhVHlwZU9yVHJhbnNwb3J0KTt9fSk7cmV0dXJuIHNlbGVjdGVkO30KcmV0dXJuIGluc3BlY3Qob3B0aW9ucy5kYXRhVHlwZXNbMF0pfHwhaW5zcGVjdGVkWyIqIl0mJmluc3BlY3QoIioiKTt9CmZ1bmN0aW9uIGFqYXhFeHRlbmQodGFyZ2V0LHNyYyl7dmFyIGtleSxkZWVwLGZsYXRPcHRpb25zPWpRdWVyeS5hamF4U2V0dGluZ3MuZmxhdE9wdGlvbnN8fHt9O2ZvcihrZXkgaW4gc3JjKXtpZihzcmNba2V5XSE9PXVuZGVmaW5lZCl7KGZsYXRPcHRpb25zW2tleV0/dGFyZ2V0OihkZWVwfHwoZGVlcD17fSkpKVtrZXldPXNyY1trZXldO319CmlmKGRlZXApe2pRdWVyeS5leHRlbmQodHJ1ZSx0YXJnZXQsZGVlcCk7fQpyZXR1cm4gdGFyZ2V0O30KZnVuY3Rpb24gYWpheEhhbmRsZVJlc3BvbnNlcyhzLGpxWEhSLHJlc3BvbnNlcyl7dmFyIGN0LHR5cGUsZmluYWxEYXRhVHlwZSxmaXJzdERhdGFUeXBlLGNvbnRlbnRzPXMuY29udGVudHMsZGF0YVR5cGVzPXMuZGF0YVR5cGVzO3doaWxlKGRhdGFUeXBlc1swXT09PSIqIil7ZGF0YVR5cGVzLnNoaWZ0KCk7aWYoY3Q9PT11bmRlZmluZWQpe2N0PXMubWltZVR5cGV8fGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCJDb250ZW50LVR5cGUiKTt9fQppZihjdCl7Zm9yKHR5cGUgaW4gY29udGVudHMpe2lmKGNvbnRlbnRzW3R5cGVdJiZjb250ZW50c1t0eXBlXS50ZXN0KGN0KSl7ZGF0YVR5cGVzLnVuc2hpZnQodHlwZSk7YnJlYWs7fX19CmlmKGRhdGFUeXBlc1swXWluIHJlc3BvbnNlcyl7ZmluYWxEYXRhVHlwZT1kYXRhVHlwZXNbMF07fWVsc2V7Zm9yKHR5cGUgaW4gcmVzcG9uc2VzKXtpZighZGF0YVR5cGVzWzBdfHxzLmNvbnZlcnRlcnNbdHlwZSsiICIrZGF0YVR5cGVzWzBdXSl7ZmluYWxEYXRhVHlwZT10eXBlO2JyZWFrO30KaWYoIWZpcnN0RGF0YVR5cGUpe2ZpcnN0RGF0YVR5cGU9dHlwZTt9fQpmaW5hbERhdGFUeXBlPWZpbmFsRGF0YVR5cGV8fGZpcnN0RGF0YVR5cGU7fQppZihmaW5hbERhdGFUeXBlKXtpZihmaW5hbERhdGFUeXBlIT09ZGF0YVR5cGVzWzBdKXtkYXRhVHlwZXMudW5zaGlmdChmaW5hbERhdGFUeXBlKTt9CnJldHVybiByZXNwb25zZXNbZmluYWxEYXRhVHlwZV07fX0KZnVuY3Rpb24gYWpheENvbnZlcnQocyxyZXNwb25zZSxqcVhIUixpc1N1Y2Nlc3Mpe3ZhciBjb252MixjdXJyZW50LGNvbnYsdG1wLHByZXYsY29udmVydGVycz17fSxkYXRhVHlwZXM9cy5kYXRhVHlwZXMuc2xpY2UoKTtpZihkYXRhVHlwZXNbMV0pe2Zvcihjb252IGluIHMuY29udmVydGVycyl7Y29udmVydGVyc1tjb252LnRvTG93ZXJDYXNlKCldPXMuY29udmVydGVyc1tjb252XTt9fQpjdXJyZW50PWRhdGFUeXBlcy5zaGlmdCgpO3doaWxlKGN1cnJlbnQpe2lmKHMucmVzcG9uc2VGaWVsZHNbY3VycmVudF0pe2pxWEhSW3MucmVzcG9uc2VGaWVsZHNbY3VycmVudF1dPXJlc3BvbnNlO30KaWYoIXByZXYmJmlzU3VjY2VzcyYmcy5kYXRhRmlsdGVyKXtyZXNwb25zZT1zLmRhdGFGaWx0ZXIocmVzcG9uc2Uscy5kYXRhVHlwZSk7fQpwcmV2PWN1cnJlbnQ7Y3VycmVudD1kYXRhVHlwZXMuc2hpZnQoKTtpZihjdXJyZW50KXtpZihjdXJyZW50PT09IioiKXtjdXJyZW50PXByZXY7fWVsc2UgaWYocHJldiE9PSIqIiYmcHJldiE9PWN1cnJlbnQpe2NvbnY9Y29udmVydGVyc1twcmV2KyIgIitjdXJyZW50XXx8Y29udmVydGVyc1siKiAiK2N1cnJlbnRdO2lmKCFjb252KXtmb3IoY29udjIgaW4gY29udmVydGVycyl7dG1wPWNvbnYyLnNwbGl0KCIgIik7aWYodG1wWzFdPT09Y3VycmVudCl7Y29udj1jb252ZXJ0ZXJzW3ByZXYrIiAiK3RtcFswXV18fGNvbnZlcnRlcnNbIiogIit0bXBbMF1dO2lmKGNvbnYpe2lmKGNvbnY9PT10cnVlKXtjb252PWNvbnZlcnRlcnNbY29udjJdO31lbHNlIGlmKGNvbnZlcnRlcnNbY29udjJdIT09dHJ1ZSl7Y3VycmVudD10bXBbMF07ZGF0YVR5cGVzLnVuc2hpZnQodG1wWzFdKTt9CmJyZWFrO319fX0KaWYoY29udiE9PXRydWUpe2lmKGNvbnYmJnMudGhyb3dzKXtyZXNwb25zZT1jb252KHJlc3BvbnNlKTt9ZWxzZXt0cnl7cmVzcG9uc2U9Y29udihyZXNwb25zZSk7fWNhdGNoKGUpe3JldHVybntzdGF0ZToicGFyc2VyZXJyb3IiLGVycm9yOmNvbnY/ZToiTm8gY29udmVyc2lvbiBmcm9tICIrcHJldisiIHRvICIrY3VycmVudH07fX19fX19CnJldHVybntzdGF0ZToic3VjY2VzcyIsZGF0YTpyZXNwb25zZX07fQpqUXVlcnkuZXh0ZW5kKHthY3RpdmU6MCxsYXN0TW9kaWZpZWQ6e30sZXRhZzp7fSxhamF4U2V0dGluZ3M6e3VybDpsb2NhdGlvbi5ocmVmLHR5cGU6IkdFVCIsaXNMb2NhbDpybG9jYWxQcm90b2NvbC50ZXN0KGxvY2F0aW9uLnByb3RvY29sKSxnbG9iYWw6dHJ1ZSxwcm9jZXNzRGF0YTp0cnVlLGFzeW5jOnRydWUsY29udGVudFR5cGU6ImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZDsgY2hhcnNldD1VVEYtOCIsYWNjZXB0czp7IioiOmFsbFR5cGVzLHRleHQ6InRleHQvcGxhaW4iLGh0bWw6InRleHQvaHRtbCIseG1sOiJhcHBsaWNhdGlvbi94bWwsIHRleHQveG1sIixqc29uOiJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHQifSxjb250ZW50czp7eG1sOi9cYnhtbFxiLyxodG1sOi9cYmh0bWwvLGpzb246L1xianNvblxiL30scmVzcG9uc2VGaWVsZHM6e3htbDoicmVzcG9uc2VYTUwiLHRleHQ6InJlc3BvbnNlVGV4dCIsanNvbjoicmVzcG9uc2VKU09OIn0sY29udmVydGVyczp7IiogdGV4dCI6U3RyaW5nLCJ0ZXh0IGh0bWwiOnRydWUsInRleHQganNvbiI6SlNPTi5wYXJzZSwidGV4dCB4bWwiOmpRdWVyeS5wYXJzZVhNTH0sZmxhdE9wdGlvbnM6e3VybDp0cnVlLGNvbnRleHQ6dHJ1ZX19LGFqYXhTZXR1cDpmdW5jdGlvbih0YXJnZXQsc2V0dGluZ3Mpe3JldHVybiBzZXR0aW5ncz9hamF4RXh0ZW5kKGFqYXhFeHRlbmQodGFyZ2V0LGpRdWVyeS5hamF4U2V0dGluZ3MpLHNldHRpbmdzKTphamF4RXh0ZW5kKGpRdWVyeS5hamF4U2V0dGluZ3MsdGFyZ2V0KTt9LGFqYXhQcmVmaWx0ZXI6YWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHByZWZpbHRlcnMpLGFqYXhUcmFuc3BvcnQ6YWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKHRyYW5zcG9ydHMpLGFqYXg6ZnVuY3Rpb24odXJsLG9wdGlvbnMpe2lmKHR5cGVvZiB1cmw9PT0ib2JqZWN0Iil7b3B0aW9ucz11cmw7dXJsPXVuZGVmaW5lZDt9Cm9wdGlvbnM9b3B0aW9uc3x8e307dmFyIHRyYW5zcG9ydCxjYWNoZVVSTCxyZXNwb25zZUhlYWRlcnNTdHJpbmcscmVzcG9uc2VIZWFkZXJzLHRpbWVvdXRUaW1lcix1cmxBbmNob3IsY29tcGxldGVkLGZpcmVHbG9iYWxzLGksdW5jYWNoZWQscz1qUXVlcnkuYWpheFNldHVwKHt9LG9wdGlvbnMpLGNhbGxiYWNrQ29udGV4dD1zLmNvbnRleHR8fHMsZ2xvYmFsRXZlbnRDb250ZXh0PXMuY29udGV4dCYmKGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZXx8Y2FsbGJhY2tDb250ZXh0LmpxdWVyeSk/alF1ZXJ5KGNhbGxiYWNrQ29udGV4dCk6alF1ZXJ5LmV2ZW50LGRlZmVycmVkPWpRdWVyeS5EZWZlcnJlZCgpLGNvbXBsZXRlRGVmZXJyZWQ9alF1ZXJ5LkNhbGxiYWNrcygib25jZSBtZW1vcnkiKSxzdGF0dXNDb2RlPXMuc3RhdHVzQ29kZXx8e30scmVxdWVzdEhlYWRlcnM9e30scmVxdWVzdEhlYWRlcnNOYW1lcz17fSxzdHJBYm9ydD0iY2FuY2VsZWQiLGpxWEhSPXtyZWFkeVN0YXRlOjAsZ2V0UmVzcG9uc2VIZWFkZXI6ZnVuY3Rpb24oa2V5KXt2YXIgbWF0Y2g7aWYoY29tcGxldGVkKXtpZighcmVzcG9uc2VIZWFkZXJzKXtyZXNwb25zZUhlYWRlcnM9e307d2hpbGUoKG1hdGNoPXJoZWFkZXJzLmV4ZWMocmVzcG9uc2VIZWFkZXJzU3RyaW5nKSkpe3Jlc3BvbnNlSGVhZGVyc1ttYXRjaFsxXS50b0xvd2VyQ2FzZSgpKyIgIl09KHJlc3BvbnNlSGVhZGVyc1ttYXRjaFsxXS50b0xvd2VyQ2FzZSgpKyIgIl18fFtdKS5jb25jYXQobWF0Y2hbMl0pO319Cm1hdGNoPXJlc3BvbnNlSGVhZGVyc1trZXkudG9Mb3dlckNhc2UoKSsiICJdO30KcmV0dXJuIG1hdGNoPT1udWxsP251bGw6bWF0Y2guam9pbigiLCAiKTt9LGdldEFsbFJlc3BvbnNlSGVhZGVyczpmdW5jdGlvbigpe3JldHVybiBjb21wbGV0ZWQ/cmVzcG9uc2VIZWFkZXJzU3RyaW5nOm51bGw7fSxzZXRSZXF1ZXN0SGVhZGVyOmZ1bmN0aW9uKG5hbWUsdmFsdWUpe2lmKGNvbXBsZXRlZD09bnVsbCl7bmFtZT1yZXF1ZXN0SGVhZGVyc05hbWVzW25hbWUudG9Mb3dlckNhc2UoKV09cmVxdWVzdEhlYWRlcnNOYW1lc1tuYW1lLnRvTG93ZXJDYXNlKCldfHxuYW1lO3JlcXVlc3RIZWFkZXJzW25hbWVdPXZhbHVlO30KcmV0dXJuIHRoaXM7fSxvdmVycmlkZU1pbWVUeXBlOmZ1bmN0aW9uKHR5cGUpe2lmKGNvbXBsZXRlZD09bnVsbCl7cy5taW1lVHlwZT10eXBlO30KcmV0dXJuIHRoaXM7fSxzdGF0dXNDb2RlOmZ1bmN0aW9uKG1hcCl7dmFyIGNvZGU7aWYobWFwKXtpZihjb21wbGV0ZWQpe2pxWEhSLmFsd2F5cyhtYXBbanFYSFIuc3RhdHVzXSk7fWVsc2V7Zm9yKGNvZGUgaW4gbWFwKXtzdGF0dXNDb2RlW2NvZGVdPVtzdGF0dXNDb2RlW2NvZGVdLG1hcFtjb2RlXV07fX19CnJldHVybiB0aGlzO30sYWJvcnQ6ZnVuY3Rpb24oc3RhdHVzVGV4dCl7dmFyIGZpbmFsVGV4dD1zdGF0dXNUZXh0fHxzdHJBYm9ydDtpZih0cmFuc3BvcnQpe3RyYW5zcG9ydC5hYm9ydChmaW5hbFRleHQpO30KZG9uZSgwLGZpbmFsVGV4dCk7cmV0dXJuIHRoaXM7fX07ZGVmZXJyZWQucHJvbWlzZShqcVhIUik7cy51cmw9KCh1cmx8fHMudXJsfHxsb2NhdGlvbi5ocmVmKSsiIikucmVwbGFjZShycHJvdG9jb2wsbG9jYXRpb24ucHJvdG9jb2wrIi8vIik7cy50eXBlPW9wdGlvbnMubWV0aG9kfHxvcHRpb25zLnR5cGV8fHMubWV0aG9kfHxzLnR5cGU7cy5kYXRhVHlwZXM9KHMuZGF0YVR5cGV8fCIqIikudG9Mb3dlckNhc2UoKS5tYXRjaChybm90aHRtbHdoaXRlKXx8WyIiXTtpZihzLmNyb3NzRG9tYWluPT1udWxsKXt1cmxBbmNob3I9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgiYSIpO3RyeXt1cmxBbmNob3IuaHJlZj1zLnVybDt1cmxBbmNob3IuaHJlZj11cmxBbmNob3IuaHJlZjtzLmNyb3NzRG9tYWluPW9yaWdpbkFuY2hvci5wcm90b2NvbCsiLy8iK29yaWdpbkFuY2hvci5ob3N0IT09dXJsQW5jaG9yLnByb3RvY29sKyIvLyIrdXJsQW5jaG9yLmhvc3Q7fWNhdGNoKGUpe3MuY3Jvc3NEb21haW49dHJ1ZTt9fQppZihzLmRhdGEmJnMucHJvY2Vzc0RhdGEmJnR5cGVvZiBzLmRhdGEhPT0ic3RyaW5nIil7cy5kYXRhPWpRdWVyeS5wYXJhbShzLmRhdGEscy50cmFkaXRpb25hbCk7fQppbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyhwcmVmaWx0ZXJzLHMsb3B0aW9ucyxqcVhIUik7aWYoY29tcGxldGVkKXtyZXR1cm4ganFYSFI7fQpmaXJlR2xvYmFscz1qUXVlcnkuZXZlbnQmJnMuZ2xvYmFsO2lmKGZpcmVHbG9iYWxzJiZqUXVlcnkuYWN0aXZlKys9PT0wKXtqUXVlcnkuZXZlbnQudHJpZ2dlcigiYWpheFN0YXJ0Iik7fQpzLnR5cGU9cy50eXBlLnRvVXBwZXJDYXNlKCk7cy5oYXNDb250ZW50PSFybm9Db250ZW50LnRlc3Qocy50eXBlKTtjYWNoZVVSTD1zLnVybC5yZXBsYWNlKHJoYXNoLCIiKTtpZighcy5oYXNDb250ZW50KXt1bmNhY2hlZD1zLnVybC5zbGljZShjYWNoZVVSTC5sZW5ndGgpO2lmKHMuZGF0YSYmKHMucHJvY2Vzc0RhdGF8fHR5cGVvZiBzLmRhdGE9PT0ic3RyaW5nIikpe2NhY2hlVVJMKz0ocnF1ZXJ5LnRlc3QoY2FjaGVVUkwpPyImIjoiPyIpK3MuZGF0YTtkZWxldGUgcy5kYXRhO30KaWYocy5jYWNoZT09PWZhbHNlKXtjYWNoZVVSTD1jYWNoZVVSTC5yZXBsYWNlKHJhbnRpQ2FjaGUsIiQxIik7dW5jYWNoZWQ9KHJxdWVyeS50ZXN0KGNhY2hlVVJMKT8iJiI6Ij8iKSsiXz0iKyhub25jZS5ndWlkKyspKwp1bmNhY2hlZDt9CnMudXJsPWNhY2hlVVJMK3VuY2FjaGVkO31lbHNlIGlmKHMuZGF0YSYmcy5wcm9jZXNzRGF0YSYmKHMuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKT09PTApe3MuZGF0YT1zLmRhdGEucmVwbGFjZShyMjAsIisiKTt9CmlmKHMuaWZNb2RpZmllZCl7aWYoalF1ZXJ5Lmxhc3RNb2RpZmllZFtjYWNoZVVSTF0pe2pxWEhSLnNldFJlcXVlc3RIZWFkZXIoIklmLU1vZGlmaWVkLVNpbmNlIixqUXVlcnkubGFzdE1vZGlmaWVkW2NhY2hlVVJMXSk7fQppZihqUXVlcnkuZXRhZ1tjYWNoZVVSTF0pe2pxWEhSLnNldFJlcXVlc3RIZWFkZXIoIklmLU5vbmUtTWF0Y2giLGpRdWVyeS5ldGFnW2NhY2hlVVJMXSk7fX0KaWYocy5kYXRhJiZzLmhhc0NvbnRlbnQmJnMuY29udGVudFR5cGUhPT1mYWxzZXx8b3B0aW9ucy5jb250ZW50VHlwZSl7anFYSFIuc2V0UmVxdWVzdEhlYWRlcigiQ29udGVudC1UeXBlIixzLmNvbnRlbnRUeXBlKTt9CmpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIkFjY2VwdCIscy5kYXRhVHlwZXNbMF0mJnMuYWNjZXB0c1tzLmRhdGFUeXBlc1swXV0/cy5hY2NlcHRzW3MuZGF0YVR5cGVzWzBdXSsKKHMuZGF0YVR5cGVzWzBdIT09IioiPyIsICIrYWxsVHlwZXMrIjsgcT0wLjAxIjoiIik6cy5hY2NlcHRzWyIqIl0pO2ZvcihpIGluIHMuaGVhZGVycyl7anFYSFIuc2V0UmVxdWVzdEhlYWRlcihpLHMuaGVhZGVyc1tpXSk7fQppZihzLmJlZm9yZVNlbmQmJihzLmJlZm9yZVNlbmQuY2FsbChjYWxsYmFja0NvbnRleHQsanFYSFIscyk9PT1mYWxzZXx8Y29tcGxldGVkKSl7cmV0dXJuIGpxWEhSLmFib3J0KCk7fQpzdHJBYm9ydD0iYWJvcnQiO2NvbXBsZXRlRGVmZXJyZWQuYWRkKHMuY29tcGxldGUpO2pxWEhSLmRvbmUocy5zdWNjZXNzKTtqcVhIUi5mYWlsKHMuZXJyb3IpO3RyYW5zcG9ydD1pbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyh0cmFuc3BvcnRzLHMsb3B0aW9ucyxqcVhIUik7aWYoIXRyYW5zcG9ydCl7ZG9uZSgtMSwiTm8gVHJhbnNwb3J0Iik7fWVsc2V7anFYSFIucmVhZHlTdGF0ZT0xO2lmKGZpcmVHbG9iYWxzKXtnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlcigiYWpheFNlbmQiLFtqcVhIUixzXSk7fQppZihjb21wbGV0ZWQpe3JldHVybiBqcVhIUjt9CmlmKHMuYXN5bmMmJnMudGltZW91dD4wKXt0aW1lb3V0VGltZXI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXtqcVhIUi5hYm9ydCgidGltZW91dCIpO30scy50aW1lb3V0KTt9CnRyeXtjb21wbGV0ZWQ9ZmFsc2U7dHJhbnNwb3J0LnNlbmQocmVxdWVzdEhlYWRlcnMsZG9uZSk7fWNhdGNoKGUpe2lmKGNvbXBsZXRlZCl7dGhyb3cgZTt9CmRvbmUoLTEsZSk7fX0KZnVuY3Rpb24gZG9uZShzdGF0dXMsbmF0aXZlU3RhdHVzVGV4dCxyZXNwb25zZXMsaGVhZGVycyl7dmFyIGlzU3VjY2VzcyxzdWNjZXNzLGVycm9yLHJlc3BvbnNlLG1vZGlmaWVkLHN0YXR1c1RleHQ9bmF0aXZlU3RhdHVzVGV4dDtpZihjb21wbGV0ZWQpe3JldHVybjt9CmNvbXBsZXRlZD10cnVlO2lmKHRpbWVvdXRUaW1lcil7d2luZG93LmNsZWFyVGltZW91dCh0aW1lb3V0VGltZXIpO30KdHJhbnNwb3J0PXVuZGVmaW5lZDtyZXNwb25zZUhlYWRlcnNTdHJpbmc9aGVhZGVyc3x8IiI7anFYSFIucmVhZHlTdGF0ZT1zdGF0dXM+MD80OjA7aXNTdWNjZXNzPXN0YXR1cz49MjAwJiZzdGF0dXM8MzAwfHxzdGF0dXM9PT0zMDQ7aWYocmVzcG9uc2VzKXtyZXNwb25zZT1hamF4SGFuZGxlUmVzcG9uc2VzKHMsanFYSFIscmVzcG9uc2VzKTt9CmlmKCFpc1N1Y2Nlc3MmJmpRdWVyeS5pbkFycmF5KCJzY3JpcHQiLHMuZGF0YVR5cGVzKT4tMSYmalF1ZXJ5LmluQXJyYXkoImpzb24iLHMuZGF0YVR5cGVzKTwwKXtzLmNvbnZlcnRlcnNbInRleHQgc2NyaXB0Il09ZnVuY3Rpb24oKXt9O30KcmVzcG9uc2U9YWpheENvbnZlcnQocyxyZXNwb25zZSxqcVhIUixpc1N1Y2Nlc3MpO2lmKGlzU3VjY2Vzcyl7aWYocy5pZk1vZGlmaWVkKXttb2RpZmllZD1qcVhIUi5nZXRSZXNwb25zZUhlYWRlcigiTGFzdC1Nb2RpZmllZCIpO2lmKG1vZGlmaWVkKXtqUXVlcnkubGFzdE1vZGlmaWVkW2NhY2hlVVJMXT1tb2RpZmllZDt9Cm1vZGlmaWVkPWpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCJldGFnIik7aWYobW9kaWZpZWQpe2pRdWVyeS5ldGFnW2NhY2hlVVJMXT1tb2RpZmllZDt9fQppZihzdGF0dXM9PT0yMDR8fHMudHlwZT09PSJIRUFEIil7c3RhdHVzVGV4dD0ibm9jb250ZW50Ijt9ZWxzZSBpZihzdGF0dXM9PT0zMDQpe3N0YXR1c1RleHQ9Im5vdG1vZGlmaWVkIjt9ZWxzZXtzdGF0dXNUZXh0PXJlc3BvbnNlLnN0YXRlO3N1Y2Nlc3M9cmVzcG9uc2UuZGF0YTtlcnJvcj1yZXNwb25zZS5lcnJvcjtpc1N1Y2Nlc3M9IWVycm9yO319ZWxzZXtlcnJvcj1zdGF0dXNUZXh0O2lmKHN0YXR1c3x8IXN0YXR1c1RleHQpe3N0YXR1c1RleHQ9ImVycm9yIjtpZihzdGF0dXM8MCl7c3RhdHVzPTA7fX19CmpxWEhSLnN0YXR1cz1zdGF0dXM7anFYSFIuc3RhdHVzVGV4dD0obmF0aXZlU3RhdHVzVGV4dHx8c3RhdHVzVGV4dCkrIiI7aWYoaXNTdWNjZXNzKXtkZWZlcnJlZC5yZXNvbHZlV2l0aChjYWxsYmFja0NvbnRleHQsW3N1Y2Nlc3Msc3RhdHVzVGV4dCxqcVhIUl0pO31lbHNle2RlZmVycmVkLnJlamVjdFdpdGgoY2FsbGJhY2tDb250ZXh0LFtqcVhIUixzdGF0dXNUZXh0LGVycm9yXSk7fQpqcVhIUi5zdGF0dXNDb2RlKHN0YXR1c0NvZGUpO3N0YXR1c0NvZGU9dW5kZWZpbmVkO2lmKGZpcmVHbG9iYWxzKXtnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlcihpc1N1Y2Nlc3M/ImFqYXhTdWNjZXNzIjoiYWpheEVycm9yIixbanFYSFIscyxpc1N1Y2Nlc3M/c3VjY2VzczplcnJvcl0pO30KY29tcGxldGVEZWZlcnJlZC5maXJlV2l0aChjYWxsYmFja0NvbnRleHQsW2pxWEhSLHN0YXR1c1RleHRdKTtpZihmaXJlR2xvYmFscyl7Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoImFqYXhDb21wbGV0ZSIsW2pxWEhSLHNdKTtpZighKC0talF1ZXJ5LmFjdGl2ZSkpe2pRdWVyeS5ldmVudC50cmlnZ2VyKCJhamF4U3RvcCIpO319fQpyZXR1cm4ganFYSFI7fSxnZXRKU09OOmZ1bmN0aW9uKHVybCxkYXRhLGNhbGxiYWNrKXtyZXR1cm4galF1ZXJ5LmdldCh1cmwsZGF0YSxjYWxsYmFjaywianNvbiIpO30sZ2V0U2NyaXB0OmZ1bmN0aW9uKHVybCxjYWxsYmFjayl7cmV0dXJuIGpRdWVyeS5nZXQodXJsLHVuZGVmaW5lZCxjYWxsYmFjaywic2NyaXB0Iik7fX0pO2pRdWVyeS5lYWNoKFsiZ2V0IiwicG9zdCJdLGZ1bmN0aW9uKF9pLG1ldGhvZCl7alF1ZXJ5W21ldGhvZF09ZnVuY3Rpb24odXJsLGRhdGEsY2FsbGJhY2ssdHlwZSl7aWYoaXNGdW5jdGlvbihkYXRhKSl7dHlwZT10eXBlfHxjYWxsYmFjaztjYWxsYmFjaz1kYXRhO2RhdGE9dW5kZWZpbmVkO30KcmV0dXJuIGpRdWVyeS5hamF4KGpRdWVyeS5leHRlbmQoe3VybDp1cmwsdHlwZTptZXRob2QsZGF0YVR5cGU6dHlwZSxkYXRhOmRhdGEsc3VjY2VzczpjYWxsYmFja30salF1ZXJ5LmlzUGxhaW5PYmplY3QodXJsKSYmdXJsKSk7fTt9KTtqUXVlcnkuYWpheFByZWZpbHRlcihmdW5jdGlvbihzKXt2YXIgaTtmb3IoaSBpbiBzLmhlYWRlcnMpe2lmKGkudG9Mb3dlckNhc2UoKT09PSJjb250ZW50LXR5cGUiKXtzLmNvbnRlbnRUeXBlPXMuaGVhZGVyc1tpXXx8IiI7fX19KTtqUXVlcnkuX2V2YWxVcmw9ZnVuY3Rpb24odXJsLG9wdGlvbnMsZG9jKXtyZXR1cm4galF1ZXJ5LmFqYXgoe3VybDp1cmwsdHlwZToiR0VUIixkYXRhVHlwZToic2NyaXB0IixjYWNoZTp0cnVlLGFzeW5jOmZhbHNlLGdsb2JhbDpmYWxzZSxjb252ZXJ0ZXJzOnsidGV4dCBzY3JpcHQiOmZ1bmN0aW9uKCl7fX0sZGF0YUZpbHRlcjpmdW5jdGlvbihyZXNwb25zZSl7alF1ZXJ5Lmdsb2JhbEV2YWwocmVzcG9uc2Usb3B0aW9ucyxkb2MpO319KTt9O2pRdWVyeS5mbi5leHRlbmQoe3dyYXBBbGw6ZnVuY3Rpb24oaHRtbCl7dmFyIHdyYXA7aWYodGhpc1swXSl7aWYoaXNGdW5jdGlvbihodG1sKSl7aHRtbD1odG1sLmNhbGwodGhpc1swXSk7fQp3cmFwPWpRdWVyeShodG1sLHRoaXNbMF0ub3duZXJEb2N1bWVudCkuZXEoMCkuY2xvbmUodHJ1ZSk7aWYodGhpc1swXS5wYXJlbnROb2RlKXt3cmFwLmluc2VydEJlZm9yZSh0aGlzWzBdKTt9CndyYXAubWFwKGZ1bmN0aW9uKCl7dmFyIGVsZW09dGhpczt3aGlsZShlbGVtLmZpcnN0RWxlbWVudENoaWxkKXtlbGVtPWVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7fQpyZXR1cm4gZWxlbTt9KS5hcHBlbmQodGhpcyk7fQpyZXR1cm4gdGhpczt9LHdyYXBJbm5lcjpmdW5jdGlvbihodG1sKXtpZihpc0Z1bmN0aW9uKGh0bWwpKXtyZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uKGkpe2pRdWVyeSh0aGlzKS53cmFwSW5uZXIoaHRtbC5jYWxsKHRoaXMsaSkpO30pO30KcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbigpe3ZhciBzZWxmPWpRdWVyeSh0aGlzKSxjb250ZW50cz1zZWxmLmNvbnRlbnRzKCk7aWYoY29udGVudHMubGVuZ3RoKXtjb250ZW50cy53cmFwQWxsKGh0bWwpO31lbHNle3NlbGYuYXBwZW5kKGh0bWwpO319KTt9LHdyYXA6ZnVuY3Rpb24oaHRtbCl7dmFyIGh0bWxJc0Z1bmN0aW9uPWlzRnVuY3Rpb24oaHRtbCk7cmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbihpKXtqUXVlcnkodGhpcykud3JhcEFsbChodG1sSXNGdW5jdGlvbj9odG1sLmNhbGwodGhpcyxpKTpodG1sKTt9KTt9LHVud3JhcDpmdW5jdGlvbihzZWxlY3Rvcil7dGhpcy5wYXJlbnQoc2VsZWN0b3IpLm5vdCgiYm9keSIpLmVhY2goZnVuY3Rpb24oKXtqUXVlcnkodGhpcykucmVwbGFjZVdpdGgodGhpcy5jaGlsZE5vZGVzKTt9KTtyZXR1cm4gdGhpczt9fSk7alF1ZXJ5LmV4cHIucHNldWRvcy5oaWRkZW49ZnVuY3Rpb24oZWxlbSl7cmV0dXJuIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZShlbGVtKTt9O2pRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZT1mdW5jdGlvbihlbGVtKXtyZXR1cm4hIShlbGVtLm9mZnNldFdpZHRofHxlbGVtLm9mZnNldEhlaWdodHx8ZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCk7fTtqUXVlcnkuYWpheFNldHRpbmdzLnhocj1mdW5jdGlvbigpe3RyeXtyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO31jYXRjaChlKXt9fTt2YXIgeGhyU3VjY2Vzc1N0YXR1cz17MDoyMDAsMTIyMzoyMDR9LHhoclN1cHBvcnRlZD1qUXVlcnkuYWpheFNldHRpbmdzLnhocigpO3N1cHBvcnQuY29ycz0hIXhoclN1cHBvcnRlZCYmKCJ3aXRoQ3JlZGVudGlhbHMiaW4geGhyU3VwcG9ydGVkKTtzdXBwb3J0LmFqYXg9eGhyU3VwcG9ydGVkPSEheGhyU3VwcG9ydGVkO2pRdWVyeS5hamF4VHJhbnNwb3J0KGZ1bmN0aW9uKG9wdGlvbnMpe3ZhciBjYWxsYmFjayxlcnJvckNhbGxiYWNrO2lmKHN1cHBvcnQuY29yc3x8eGhyU3VwcG9ydGVkJiYhb3B0aW9ucy5jcm9zc0RvbWFpbil7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oaGVhZGVycyxjb21wbGV0ZSl7dmFyIGkseGhyPW9wdGlvbnMueGhyKCk7eGhyLm9wZW4ob3B0aW9ucy50eXBlLG9wdGlvbnMudXJsLG9wdGlvbnMuYXN5bmMsb3B0aW9ucy51c2VybmFtZSxvcHRpb25zLnBhc3N3b3JkKTtpZihvcHRpb25zLnhockZpZWxkcyl7Zm9yKGkgaW4gb3B0aW9ucy54aHJGaWVsZHMpe3hocltpXT1vcHRpb25zLnhockZpZWxkc1tpXTt9fQppZihvcHRpb25zLm1pbWVUeXBlJiZ4aHIub3ZlcnJpZGVNaW1lVHlwZSl7eGhyLm92ZXJyaWRlTWltZVR5cGUob3B0aW9ucy5taW1lVHlwZSk7fQppZighb3B0aW9ucy5jcm9zc0RvbWFpbiYmIWhlYWRlcnNbIlgtUmVxdWVzdGVkLVdpdGgiXSl7aGVhZGVyc1siWC1SZXF1ZXN0ZWQtV2l0aCJdPSJYTUxIdHRwUmVxdWVzdCI7fQpmb3IoaSBpbiBoZWFkZXJzKXt4aHIuc2V0UmVxdWVzdEhlYWRlcihpLGhlYWRlcnNbaV0pO30KY2FsbGJhY2s9ZnVuY3Rpb24odHlwZSl7cmV0dXJuIGZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrPWVycm9yQ2FsbGJhY2s9eGhyLm9ubG9hZD14aHIub25lcnJvcj14aHIub25hYm9ydD14aHIub250aW1lb3V0PXhoci5vbnJlYWR5c3RhdGVjaGFuZ2U9bnVsbDtpZih0eXBlPT09ImFib3J0Iil7eGhyLmFib3J0KCk7fWVsc2UgaWYodHlwZT09PSJlcnJvciIpe2lmKHR5cGVvZiB4aHIuc3RhdHVzIT09Im51bWJlciIpe2NvbXBsZXRlKDAsImVycm9yIik7fWVsc2V7Y29tcGxldGUoeGhyLnN0YXR1cyx4aHIuc3RhdHVzVGV4dCk7fX1lbHNle2NvbXBsZXRlKHhoclN1Y2Nlc3NTdGF0dXNbeGhyLnN0YXR1c118fHhoci5zdGF0dXMseGhyLnN0YXR1c1RleHQsKHhoci5yZXNwb25zZVR5cGV8fCJ0ZXh0IikhPT0idGV4dCJ8fHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0IT09InN0cmluZyI/e2JpbmFyeTp4aHIucmVzcG9uc2V9Ont0ZXh0Onhoci5yZXNwb25zZVRleHR9LHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSk7fX19O307eGhyLm9ubG9hZD1jYWxsYmFjaygpO2Vycm9yQ2FsbGJhY2s9eGhyLm9uZXJyb3I9eGhyLm9udGltZW91dD1jYWxsYmFjaygiZXJyb3IiKTtpZih4aHIub25hYm9ydCE9PXVuZGVmaW5lZCl7eGhyLm9uYWJvcnQ9ZXJyb3JDYWxsYmFjazt9ZWxzZXt4aHIub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7aWYoeGhyLnJlYWR5U3RhdGU9PT00KXt3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2lmKGNhbGxiYWNrKXtlcnJvckNhbGxiYWNrKCk7fX0pO319O30KY2FsbGJhY2s9Y2FsbGJhY2soImFib3J0Iik7dHJ5e3hoci5zZW5kKG9wdGlvbnMuaGFzQ29udGVudCYmb3B0aW9ucy5kYXRhfHxudWxsKTt9Y2F0Y2goZSl7aWYoY2FsbGJhY2spe3Rocm93IGU7fX19LGFib3J0OmZ1bmN0aW9uKCl7aWYoY2FsbGJhY2spe2NhbGxiYWNrKCk7fX19O319KTtqUXVlcnkuYWpheFByZWZpbHRlcihmdW5jdGlvbihzKXtpZihzLmNyb3NzRG9tYWluKXtzLmNvbnRlbnRzLnNjcmlwdD1mYWxzZTt9fSk7alF1ZXJ5LmFqYXhTZXR1cCh7YWNjZXB0czp7c2NyaXB0OiJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsICIrImFwcGxpY2F0aW9uL2VjbWFzY3JpcHQsIGFwcGxpY2F0aW9uL3gtZWNtYXNjcmlwdCJ9LGNvbnRlbnRzOntzY3JpcHQ6L1xiKD86amF2YXxlY21hKXNjcmlwdFxiL30sY29udmVydGVyczp7InRleHQgc2NyaXB0IjpmdW5jdGlvbih0ZXh0KXtqUXVlcnkuZ2xvYmFsRXZhbCh0ZXh0KTtyZXR1cm4gdGV4dDt9fX0pO2pRdWVyeS5hamF4UHJlZmlsdGVyKCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY2FjaGU9PT11bmRlZmluZWQpe3MuY2FjaGU9ZmFsc2U7fQppZihzLmNyb3NzRG9tYWluKXtzLnR5cGU9IkdFVCI7fX0pO2pRdWVyeS5hamF4VHJhbnNwb3J0KCJzY3JpcHQiLGZ1bmN0aW9uKHMpe2lmKHMuY3Jvc3NEb21haW58fHMuc2NyaXB0QXR0cnMpe3ZhciBzY3JpcHQsY2FsbGJhY2s7cmV0dXJue3NlbmQ6ZnVuY3Rpb24oXyxjb21wbGV0ZSl7c2NyaXB0PWpRdWVyeSgiPHNjcmlwdD4iKS5hdHRyKHMuc2NyaXB0QXR0cnN8fHt9KS5wcm9wKHtjaGFyc2V0OnMuc2NyaXB0Q2hhcnNldCxzcmM6cy51cmx9KS5vbigibG9hZCBlcnJvciIsY2FsbGJhY2s9ZnVuY3Rpb24oZXZ0KXtzY3JpcHQucmVtb3ZlKCk7Y2FsbGJhY2s9bnVsbDtpZihldnQpe2NvbXBsZXRlKGV2dC50eXBlPT09ImVycm9yIj80MDQ6MjAwLGV2dC50eXBlKTt9fSk7ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChzY3JpcHRbMF0pO30sYWJvcnQ6ZnVuY3Rpb24oKXtpZihjYWxsYmFjayl7Y2FsbGJhY2soKTt9fX07fX0pO3ZhciBvbGRDYWxsYmFja3M9W10scmpzb25wPS8oPSlcPyg/PSZ8JCl8XD9cPy87alF1ZXJ5LmFqYXhTZXR1cCh7anNvbnA6ImNhbGxiYWNrIixqc29ucENhbGxiYWNrOmZ1bmN0aW9uKCl7dmFyIGNhbGxiYWNrPW9sZENhbGxiYWNrcy5wb3AoKXx8KGpRdWVyeS5leHBhbmRvKyJfIisobm9uY2UuZ3VpZCsrKSk7dGhpc1tjYWxsYmFja109dHJ1ZTtyZXR1cm4gY2FsbGJhY2s7fX0pO2pRdWVyeS5hamF4UHJlZmlsdGVyKCJqc29uIGpzb25wIixmdW5jdGlvbihzLG9yaWdpbmFsU2V0dGluZ3MsanFYSFIpe3ZhciBjYWxsYmFja05hbWUsb3ZlcndyaXR0ZW4scmVzcG9uc2VDb250YWluZXIsanNvblByb3A9cy5qc29ucCE9PWZhbHNlJiYocmpzb25wLnRlc3Qocy51cmwpPyJ1cmwiOnR5cGVvZiBzLmRhdGE9PT0ic3RyaW5nIiYmKHMuY29udGVudFR5cGV8fCIiKS5pbmRleE9mKCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQiKT09PTAmJnJqc29ucC50ZXN0KHMuZGF0YSkmJiJkYXRhIik7aWYoanNvblByb3B8fHMuZGF0YVR5cGVzWzBdPT09Impzb25wIil7Y2FsbGJhY2tOYW1lPXMuanNvbnBDYWxsYmFjaz1pc0Z1bmN0aW9uKHMuanNvbnBDYWxsYmFjayk/cy5qc29ucENhbGxiYWNrKCk6cy5qc29ucENhbGxiYWNrO2lmKGpzb25Qcm9wKXtzW2pzb25Qcm9wXT1zW2pzb25Qcm9wXS5yZXBsYWNlKHJqc29ucCwiJDEiK2NhbGxiYWNrTmFtZSk7fWVsc2UgaWYocy5qc29ucCE9PWZhbHNlKXtzLnVybCs9KHJxdWVyeS50ZXN0KHMudXJsKT8iJiI6Ij8iKStzLmpzb25wKyI9IitjYWxsYmFja05hbWU7fQpzLmNvbnZlcnRlcnNbInNjcmlwdCBqc29uIl09ZnVuY3Rpb24oKXtpZighcmVzcG9uc2VDb250YWluZXIpe2pRdWVyeS5lcnJvcihjYWxsYmFja05hbWUrIiB3YXMgbm90IGNhbGxlZCIpO30KcmV0dXJuIHJlc3BvbnNlQ29udGFpbmVyWzBdO307cy5kYXRhVHlwZXNbMF09Impzb24iO292ZXJ3cml0dGVuPXdpbmRvd1tjYWxsYmFja05hbWVdO3dpbmRvd1tjYWxsYmFja05hbWVdPWZ1bmN0aW9uKCl7cmVzcG9uc2VDb250YWluZXI9YXJndW1lbnRzO307anFYSFIuYWx3YXlzKGZ1bmN0aW9uKCl7aWYob3ZlcndyaXR0ZW49PT11bmRlZmluZWQpe2pRdWVyeSh3aW5kb3cpLnJlbW92ZVByb3AoY2FsbGJhY2tOYW1lKTt9ZWxzZXt3aW5kb3dbY2FsbGJhY2tOYW1lXT1vdmVyd3JpdHRlbjt9CmlmKHNbY2FsbGJhY2tOYW1lXSl7cy5qc29ucENhbGxiYWNrPW9yaWdpbmFsU2V0dGluZ3MuanNvbnBDYWxsYmFjaztvbGRDYWxsYmFja3MucHVzaChjYWxsYmFja05hbWUpO30KaWYocmVzcG9uc2VDb250YWluZXImJmlzRnVuY3Rpb24ob3ZlcndyaXR0ZW4pKXtvdmVyd3JpdHRlbihyZXNwb25zZUNvbnRhaW5lclswXSk7fQpyZXNwb25zZUNvbnRhaW5lcj1vdmVyd3JpdHRlbj11bmRlZmluZWQ7fSk7cmV0dXJuInNjcmlwdCI7fX0pO3N1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50PShmdW5jdGlvbigpe3ZhciBib2R5PWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCgiIikuYm9keTtib2R5LmlubmVySFRNTD0iPGZvcm0+PC9mb3JtPjxmb3JtPjwvZm9ybT4iO3JldHVybiBib2R5LmNoaWxkTm9kZXMubGVuZ3RoPT09Mjt9KSgpO2pRdWVyeS5wYXJzZUhUTUw9ZnVuY3Rpb24oZGF0YSxjb250ZXh0LGtlZXBTY3JpcHRzKXtpZih0eXBlb2YgZGF0YSE9PSJzdHJpbmciKXtyZXR1cm5bXTt9CmlmKHR5cGVvZiBjb250ZXh0PT09ImJvb2xlYW4iKXtrZWVwU2NyaXB0cz1jb250ZXh0O2NvbnRleHQ9ZmFsc2U7fQp2YXIgYmFzZSxwYXJzZWQsc2NyaXB0cztpZighY29udGV4dCl7aWYoc3VwcG9ydC5jcmVhdGVIVE1MRG9jdW1lbnQpe2NvbnRleHQ9ZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCIiKTtiYXNlPWNvbnRleHQuY3JlYXRlRWxlbWVudCgiYmFzZSIpO2Jhc2UuaHJlZj1kb2N1bWVudC5sb2NhdGlvbi5ocmVmO2NvbnRleHQuaGVhZC5hcHBlbmRDaGlsZChiYXNlKTt9ZWxzZXtjb250ZXh0PWRvY3VtZW50O319CnBhcnNlZD1yc2luZ2xlVGFnLmV4ZWMoZGF0YSk7c2NyaXB0cz0ha2VlcFNjcmlwdHMmJltdO2lmKHBhcnNlZCl7cmV0dXJuW2NvbnRleHQuY3JlYXRlRWxlbWVudChwYXJzZWRbMV0pXTt9CnBhcnNlZD1idWlsZEZyYWdtZW50KFtkYXRhXSxjb250ZXh0LHNjcmlwdHMpO2lmKHNjcmlwdHMmJnNjcmlwdHMubGVuZ3RoKXtqUXVlcnkoc2NyaXB0cykucmVtb3ZlKCk7fQpyZXR1cm4galF1ZXJ5Lm1lcmdlKFtdLHBhcnNlZC5jaGlsZE5vZGVzKTt9O2pRdWVyeS5mbi5sb2FkPWZ1bmN0aW9uKHVybCxwYXJhbXMsY2FsbGJhY2spe3ZhciBzZWxlY3Rvcix0eXBlLHJlc3BvbnNlLHNlbGY9dGhpcyxvZmY9dXJsLmluZGV4T2YoIiAiKTtpZihvZmY+LTEpe3NlbGVjdG9yPXN0cmlwQW5kQ29sbGFwc2UodXJsLnNsaWNlKG9mZikpO3VybD11cmwuc2xpY2UoMCxvZmYpO30KaWYoaXNGdW5jdGlvbihwYXJhbXMpKXtjYWxsYmFjaz1wYXJhbXM7cGFyYW1zPXVuZGVmaW5lZDt9ZWxzZSBpZihwYXJhbXMmJnR5cGVvZiBwYXJhbXM9PT0ib2JqZWN0Iil7dHlwZT0iUE9TVCI7fQppZihzZWxmLmxlbmd0aD4wKXtqUXVlcnkuYWpheCh7dXJsOnVybCx0eXBlOnR5cGV8fCJHRVQiLGRhdGFUeXBlOiJodG1sIixkYXRhOnBhcmFtc30pLmRvbmUoZnVuY3Rpb24ocmVzcG9uc2VUZXh0KXtyZXNwb25zZT1hcmd1bWVudHM7c2VsZi5odG1sKHNlbGVjdG9yP2pRdWVyeSgiPGRpdj4iKS5hcHBlbmQoalF1ZXJ5LnBhcnNlSFRNTChyZXNwb25zZVRleHQpKS5maW5kKHNlbGVjdG9yKTpyZXNwb25zZVRleHQpO30pLmFsd2F5cyhjYWxsYmFjayYmZnVuY3Rpb24oanFYSFIsc3RhdHVzKXtzZWxmLmVhY2goZnVuY3Rpb24oKXtjYWxsYmFjay5hcHBseSh0aGlzLHJlc3BvbnNlfHxbanFYSFIucmVzcG9uc2VUZXh0LHN0YXR1cyxqcVhIUl0pO30pO30pO30KcmV0dXJuIHRoaXM7fTtqUXVlcnkuZXhwci5wc2V1ZG9zLmFuaW1hdGVkPWZ1bmN0aW9uKGVsZW0pe3JldHVybiBqUXVlcnkuZ3JlcChqUXVlcnkudGltZXJzLGZ1bmN0aW9uKGZuKXtyZXR1cm4gZWxlbT09PWZuLmVsZW07fSkubGVuZ3RoO307alF1ZXJ5Lm9mZnNldD17c2V0T2Zmc2V0OmZ1bmN0aW9uKGVsZW0sb3B0aW9ucyxpKXt2YXIgY3VyUG9zaXRpb24sY3VyTGVmdCxjdXJDU1NUb3AsY3VyVG9wLGN1ck9mZnNldCxjdXJDU1NMZWZ0LGNhbGN1bGF0ZVBvc2l0aW9uLHBvc2l0aW9uPWpRdWVyeS5jc3MoZWxlbSwicG9zaXRpb24iKSxjdXJFbGVtPWpRdWVyeShlbGVtKSxwcm9wcz17fTtpZihwb3NpdGlvbj09PSJzdGF0aWMiKXtlbGVtLnN0eWxlLnBvc2l0aW9uPSJyZWxhdGl2ZSI7fQpjdXJPZmZzZXQ9Y3VyRWxlbS5vZmZzZXQoKTtjdXJDU1NUb3A9alF1ZXJ5LmNzcyhlbGVtLCJ0b3AiKTtjdXJDU1NMZWZ0PWpRdWVyeS5jc3MoZWxlbSwibGVmdCIpO2NhbGN1bGF0ZVBvc2l0aW9uPShwb3NpdGlvbj09PSJhYnNvbHV0ZSJ8fHBvc2l0aW9uPT09ImZpeGVkIikmJihjdXJDU1NUb3ArY3VyQ1NTTGVmdCkuaW5kZXhPZigiYXV0byIpPi0xO2lmKGNhbGN1bGF0ZVBvc2l0aW9uKXtjdXJQb3NpdGlvbj1jdXJFbGVtLnBvc2l0aW9uKCk7Y3VyVG9wPWN1clBvc2l0aW9uLnRvcDtjdXJMZWZ0PWN1clBvc2l0aW9uLmxlZnQ7fWVsc2V7Y3VyVG9wPXBhcnNlRmxvYXQoY3VyQ1NTVG9wKXx8MDtjdXJMZWZ0PXBhcnNlRmxvYXQoY3VyQ1NTTGVmdCl8fDA7fQppZihpc0Z1bmN0aW9uKG9wdGlvbnMpKXtvcHRpb25zPW9wdGlvbnMuY2FsbChlbGVtLGksalF1ZXJ5LmV4dGVuZCh7fSxjdXJPZmZzZXQpKTt9CmlmKG9wdGlvbnMudG9wIT1udWxsKXtwcm9wcy50b3A9KG9wdGlvbnMudG9wLWN1ck9mZnNldC50b3ApK2N1clRvcDt9CmlmKG9wdGlvbnMubGVmdCE9bnVsbCl7cHJvcHMubGVmdD0ob3B0aW9ucy5sZWZ0LWN1ck9mZnNldC5sZWZ0KStjdXJMZWZ0O30KaWYoInVzaW5nImluIG9wdGlvbnMpe29wdGlvbnMudXNpbmcuY2FsbChlbGVtLHByb3BzKTt9ZWxzZXtjdXJFbGVtLmNzcyhwcm9wcyk7fX19O2pRdWVyeS5mbi5leHRlbmQoe29mZnNldDpmdW5jdGlvbihvcHRpb25zKXtpZihhcmd1bWVudHMubGVuZ3RoKXtyZXR1cm4gb3B0aW9ucz09PXVuZGVmaW5lZD90aGlzOnRoaXMuZWFjaChmdW5jdGlvbihpKXtqUXVlcnkub2Zmc2V0LnNldE9mZnNldCh0aGlzLG9wdGlvbnMsaSk7fSk7fQp2YXIgcmVjdCx3aW4sZWxlbT10aGlzWzBdO2lmKCFlbGVtKXtyZXR1cm47fQppZighZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCl7cmV0dXJue3RvcDowLGxlZnQ6MH07fQpyZWN0PWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7d2luPWVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztyZXR1cm57dG9wOnJlY3QudG9wK3dpbi5wYWdlWU9mZnNldCxsZWZ0OnJlY3QubGVmdCt3aW4ucGFnZVhPZmZzZXR9O30scG9zaXRpb246ZnVuY3Rpb24oKXtpZighdGhpc1swXSl7cmV0dXJuO30KdmFyIG9mZnNldFBhcmVudCxvZmZzZXQsZG9jLGVsZW09dGhpc1swXSxwYXJlbnRPZmZzZXQ9e3RvcDowLGxlZnQ6MH07aWYoalF1ZXJ5LmNzcyhlbGVtLCJwb3NpdGlvbiIpPT09ImZpeGVkIil7b2Zmc2V0PWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7fWVsc2V7b2Zmc2V0PXRoaXMub2Zmc2V0KCk7ZG9jPWVsZW0ub3duZXJEb2N1bWVudDtvZmZzZXRQYXJlbnQ9ZWxlbS5vZmZzZXRQYXJlbnR8fGRvYy5kb2N1bWVudEVsZW1lbnQ7d2hpbGUob2Zmc2V0UGFyZW50JiYob2Zmc2V0UGFyZW50PT09ZG9jLmJvZHl8fG9mZnNldFBhcmVudD09PWRvYy5kb2N1bWVudEVsZW1lbnQpJiZqUXVlcnkuY3NzKG9mZnNldFBhcmVudCwicG9zaXRpb24iKT09PSJzdGF0aWMiKXtvZmZzZXRQYXJlbnQ9b2Zmc2V0UGFyZW50LnBhcmVudE5vZGU7fQppZihvZmZzZXRQYXJlbnQmJm9mZnNldFBhcmVudCE9PWVsZW0mJm9mZnNldFBhcmVudC5ub2RlVHlwZT09PTEpe3BhcmVudE9mZnNldD1qUXVlcnkob2Zmc2V0UGFyZW50KS5vZmZzZXQoKTtwYXJlbnRPZmZzZXQudG9wKz1qUXVlcnkuY3NzKG9mZnNldFBhcmVudCwiYm9yZGVyVG9wV2lkdGgiLHRydWUpO3BhcmVudE9mZnNldC5sZWZ0Kz1qUXVlcnkuY3NzKG9mZnNldFBhcmVudCwiYm9yZGVyTGVmdFdpZHRoIix0cnVlKTt9fQpyZXR1cm57dG9wOm9mZnNldC50b3AtcGFyZW50T2Zmc2V0LnRvcC1qUXVlcnkuY3NzKGVsZW0sIm1hcmdpblRvcCIsdHJ1ZSksbGVmdDpvZmZzZXQubGVmdC1wYXJlbnRPZmZzZXQubGVmdC1qUXVlcnkuY3NzKGVsZW0sIm1hcmdpbkxlZnQiLHRydWUpfTt9LG9mZnNldFBhcmVudDpmdW5jdGlvbigpe3JldHVybiB0aGlzLm1hcChmdW5jdGlvbigpe3ZhciBvZmZzZXRQYXJlbnQ9dGhpcy5vZmZzZXRQYXJlbnQ7d2hpbGUob2Zmc2V0UGFyZW50JiZqUXVlcnkuY3NzKG9mZnNldFBhcmVudCwicG9zaXRpb24iKT09PSJzdGF0aWMiKXtvZmZzZXRQYXJlbnQ9b2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDt9CnJldHVybiBvZmZzZXRQYXJlbnR8fGRvY3VtZW50RWxlbWVudDt9KTt9fSk7alF1ZXJ5LmVhY2goe3Njcm9sbExlZnQ6InBhZ2VYT2Zmc2V0IixzY3JvbGxUb3A6InBhZ2VZT2Zmc2V0In0sZnVuY3Rpb24obWV0aG9kLHByb3Ape3ZhciB0b3A9InBhZ2VZT2Zmc2V0Ij09PXByb3A7alF1ZXJ5LmZuW21ldGhvZF09ZnVuY3Rpb24odmFsKXtyZXR1cm4gYWNjZXNzKHRoaXMsZnVuY3Rpb24oZWxlbSxtZXRob2QsdmFsKXt2YXIgd2luO2lmKGlzV2luZG93KGVsZW0pKXt3aW49ZWxlbTt9ZWxzZSBpZihlbGVtLm5vZGVUeXBlPT09OSl7d2luPWVsZW0uZGVmYXVsdFZpZXc7fQppZih2YWw9PT11bmRlZmluZWQpe3JldHVybiB3aW4/d2luW3Byb3BdOmVsZW1bbWV0aG9kXTt9CmlmKHdpbil7d2luLnNjcm9sbFRvKCF0b3A/dmFsOndpbi5wYWdlWE9mZnNldCx0b3A/dmFsOndpbi5wYWdlWU9mZnNldCk7fWVsc2V7ZWxlbVttZXRob2RdPXZhbDt9fSxtZXRob2QsdmFsLGFyZ3VtZW50cy5sZW5ndGgpO307fSk7alF1ZXJ5LmVhY2goWyJ0b3AiLCJsZWZ0Il0sZnVuY3Rpb24oX2kscHJvcCl7alF1ZXJ5LmNzc0hvb2tzW3Byb3BdPWFkZEdldEhvb2tJZihzdXBwb3J0LnBpeGVsUG9zaXRpb24sZnVuY3Rpb24oZWxlbSxjb21wdXRlZCl7aWYoY29tcHV0ZWQpe2NvbXB1dGVkPWN1ckNTUyhlbGVtLHByb3ApO3JldHVybiBybnVtbm9ucHgudGVzdChjb21wdXRlZCk/alF1ZXJ5KGVsZW0pLnBvc2l0aW9uKClbcHJvcF0rInB4Ijpjb21wdXRlZDt9fSk7fSk7alF1ZXJ5LmVhY2goe0hlaWdodDoiaGVpZ2h0IixXaWR0aDoid2lkdGgifSxmdW5jdGlvbihuYW1lLHR5cGUpe2pRdWVyeS5lYWNoKHtwYWRkaW5nOiJpbm5lciIrbmFtZSxjb250ZW50OnR5cGUsIiI6Im91dGVyIituYW1lfSxmdW5jdGlvbihkZWZhdWx0RXh0cmEsZnVuY05hbWUpe2pRdWVyeS5mbltmdW5jTmFtZV09ZnVuY3Rpb24obWFyZ2luLHZhbHVlKXt2YXIgY2hhaW5hYmxlPWFyZ3VtZW50cy5sZW5ndGgmJihkZWZhdWx0RXh0cmF8fHR5cGVvZiBtYXJnaW4hPT0iYm9vbGVhbiIpLGV4dHJhPWRlZmF1bHRFeHRyYXx8KG1hcmdpbj09PXRydWV8fHZhbHVlPT09dHJ1ZT8ibWFyZ2luIjoiYm9yZGVyIik7cmV0dXJuIGFjY2Vzcyh0aGlzLGZ1bmN0aW9uKGVsZW0sdHlwZSx2YWx1ZSl7dmFyIGRvYztpZihpc1dpbmRvdyhlbGVtKSl7cmV0dXJuIGZ1bmNOYW1lLmluZGV4T2YoIm91dGVyIik9PT0wP2VsZW1bImlubmVyIituYW1lXTplbGVtLmRvY3VtZW50LmRvY3VtZW50RWxlbWVudFsiY2xpZW50IituYW1lXTt9CmlmKGVsZW0ubm9kZVR5cGU9PT05KXtkb2M9ZWxlbS5kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIE1hdGgubWF4KGVsZW0uYm9keVsic2Nyb2xsIituYW1lXSxkb2NbInNjcm9sbCIrbmFtZV0sZWxlbS5ib2R5WyJvZmZzZXQiK25hbWVdLGRvY1sib2Zmc2V0IituYW1lXSxkb2NbImNsaWVudCIrbmFtZV0pO30KcmV0dXJuIHZhbHVlPT09dW5kZWZpbmVkP2pRdWVyeS5jc3MoZWxlbSx0eXBlLGV4dHJhKTpqUXVlcnkuc3R5bGUoZWxlbSx0eXBlLHZhbHVlLGV4dHJhKTt9LHR5cGUsY2hhaW5hYmxlP21hcmdpbjp1bmRlZmluZWQsY2hhaW5hYmxlKTt9O30pO30pO2pRdWVyeS5lYWNoKFsiYWpheFN0YXJ0IiwiYWpheFN0b3AiLCJhamF4Q29tcGxldGUiLCJhamF4RXJyb3IiLCJhamF4U3VjY2VzcyIsImFqYXhTZW5kIl0sZnVuY3Rpb24oX2ksdHlwZSl7alF1ZXJ5LmZuW3R5cGVdPWZ1bmN0aW9uKGZuKXtyZXR1cm4gdGhpcy5vbih0eXBlLGZuKTt9O30pO2pRdWVyeS5mbi5leHRlbmQoe2JpbmQ6ZnVuY3Rpb24odHlwZXMsZGF0YSxmbil7cmV0dXJuIHRoaXMub24odHlwZXMsbnVsbCxkYXRhLGZuKTt9LHVuYmluZDpmdW5jdGlvbih0eXBlcyxmbil7cmV0dXJuIHRoaXMub2ZmKHR5cGVzLG51bGwsZm4pO30sZGVsZWdhdGU6ZnVuY3Rpb24oc2VsZWN0b3IsdHlwZXMsZGF0YSxmbil7cmV0dXJuIHRoaXMub24odHlwZXMsc2VsZWN0b3IsZGF0YSxmbik7fSx1bmRlbGVnYXRlOmZ1bmN0aW9uKHNlbGVjdG9yLHR5cGVzLGZuKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/dGhpcy5vZmYoc2VsZWN0b3IsIioqIik6dGhpcy5vZmYodHlwZXMsc2VsZWN0b3J8fCIqKiIsZm4pO30saG92ZXI6ZnVuY3Rpb24oZm5PdmVyLGZuT3V0KXtyZXR1cm4gdGhpcy5tb3VzZWVudGVyKGZuT3ZlcikubW91c2VsZWF2ZShmbk91dHx8Zm5PdmVyKTt9fSk7alF1ZXJ5LmVhY2goKCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayAiKyJtb3VzZWRvd24gbW91c2V1cCBtb3VzZW1vdmUgbW91c2VvdmVyIG1vdXNlb3V0IG1vdXNlZW50ZXIgbW91c2VsZWF2ZSAiKyJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51Iikuc3BsaXQoIiAiKSxmdW5jdGlvbihfaSxuYW1lKXtqUXVlcnkuZm5bbmFtZV09ZnVuY3Rpb24oZGF0YSxmbil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg+MD90aGlzLm9uKG5hbWUsbnVsbCxkYXRhLGZuKTp0aGlzLnRyaWdnZXIobmFtZSk7fTt9KTt2YXIgcnRyaW09L15bXHNcdUZFRkZceEEwXSt8W1xzXHVGRUZGXHhBMF0rJC9nO2pRdWVyeS5wcm94eT1mdW5jdGlvbihmbixjb250ZXh0KXt2YXIgdG1wLGFyZ3MscHJveHk7aWYodHlwZW9mIGNvbnRleHQ9PT0ic3RyaW5nIil7dG1wPWZuW2NvbnRleHRdO2NvbnRleHQ9Zm47Zm49dG1wO30KaWYoIWlzRnVuY3Rpb24oZm4pKXtyZXR1cm4gdW5kZWZpbmVkO30KYXJncz1zbGljZS5jYWxsKGFyZ3VtZW50cywyKTtwcm94eT1mdW5jdGlvbigpe3JldHVybiBmbi5hcHBseShjb250ZXh0fHx0aGlzLGFyZ3MuY29uY2F0KHNsaWNlLmNhbGwoYXJndW1lbnRzKSkpO307cHJveHkuZ3VpZD1mbi5ndWlkPWZuLmd1aWR8fGpRdWVyeS5ndWlkKys7cmV0dXJuIHByb3h5O307alF1ZXJ5LmhvbGRSZWFkeT1mdW5jdGlvbihob2xkKXtpZihob2xkKXtqUXVlcnkucmVhZHlXYWl0Kys7fWVsc2V7alF1ZXJ5LnJlYWR5KHRydWUpO319O2pRdWVyeS5pc0FycmF5PUFycmF5LmlzQXJyYXk7alF1ZXJ5LnBhcnNlSlNPTj1KU09OLnBhcnNlO2pRdWVyeS5ub2RlTmFtZT1ub2RlTmFtZTtqUXVlcnkuaXNGdW5jdGlvbj1pc0Z1bmN0aW9uO2pRdWVyeS5pc1dpbmRvdz1pc1dpbmRvdztqUXVlcnkuY2FtZWxDYXNlPWNhbWVsQ2FzZTtqUXVlcnkudHlwZT10b1R5cGU7alF1ZXJ5Lm5vdz1EYXRlLm5vdztqUXVlcnkuaXNOdW1lcmljPWZ1bmN0aW9uKG9iail7dmFyIHR5cGU9alF1ZXJ5LnR5cGUob2JqKTtyZXR1cm4odHlwZT09PSJudW1iZXIifHx0eXBlPT09InN0cmluZyIpJiYhaXNOYU4ob2JqLXBhcnNlRmxvYXQob2JqKSk7fTtqUXVlcnkudHJpbT1mdW5jdGlvbih0ZXh0KXtyZXR1cm4gdGV4dD09bnVsbD8iIjoodGV4dCsiIikucmVwbGFjZShydHJpbSwiIik7fTtpZih0eXBlb2YgZGVmaW5lPT09ImZ1bmN0aW9uIiYmZGVmaW5lLmFtZCl7ZGVmaW5lKCJqcXVlcnkiLFtdLGZ1bmN0aW9uKCl7cmV0dXJuIGpRdWVyeTt9KTt9CnZhcgpfalF1ZXJ5PXdpbmRvdy5qUXVlcnksXyQ9d2luZG93LiQ7alF1ZXJ5Lm5vQ29uZmxpY3Q9ZnVuY3Rpb24oZGVlcCl7aWYod2luZG93LiQ9PT1qUXVlcnkpe3dpbmRvdy4kPV8kO30KaWYoZGVlcCYmd2luZG93LmpRdWVyeT09PWpRdWVyeSl7d2luZG93LmpRdWVyeT1falF1ZXJ5O30KcmV0dXJuIGpRdWVyeTt9O2lmKHR5cGVvZiBub0dsb2JhbD09PSJ1bmRlZmluZWQiKXt3aW5kb3cualF1ZXJ5PXdpbmRvdy4kPWpRdWVyeTt9CnJldHVybiBqUXVlcnk7fSk7</ActualData>
          </HTTPData>
        </HTTPDataSet>
        <IsExternalData>false</IsExternalData>
      </HTTPBody>
      <TcpPackets>
        <PacketInfo time="94061515" offset="0" length="16384" />
        <PacketInfo time="94061531" offset="16384" length="16384" />
        <PacketInfo time="94061531" offset="32768" length="8815" />
      </TcpPackets>
    </HTTPResponse>
  </HTTPTask>
</HTTPSnapshot>