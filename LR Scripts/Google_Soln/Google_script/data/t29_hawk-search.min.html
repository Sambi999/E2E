const hawkSearchJS={minSearchLength:2,searchTimer:null,searchResults:[],currentRequestKeyword:'',lastSearchKeyword:'',currentRequest:null,fieldOverride:["suggested_retail_price","name","sku","image_full_link","full_link","url_key","meta_title","default_image"],isInit:false,customizeSearch:null,customizeSearchInputGroup:null,init:function(){this.searchElement=document.getElementById('search');this.searchLoader=document.getElementById('hot-search-loader');this.searchMenuLoader=document.getElementById('hot-search-menu-loader');this.searchClose=document.getElementsByClassName('quick-search-close-icon');this.searchOverlay=document.getElementsByClassName('hawk-search-autocomplete-overlay');this.searchAutoComplete=document.getElementById('search_autocomplete');this.globalMessage=document.getElementsByClassName('message global inside-notice');this.spinToggle=document.getElementsByClassName('spin_toggle');this.insideHolder=document.getElementById('inside_holder');this.pageHeader=document.querySelectorAll('.page-wrapper > .page-header');this.contactUs=document.getElementsByClassName('pc-contact-us-new');this.languageOption=document.getElementById('language-option');this.actionClear=document.querySelectorAll('.search > .control > .actions.clear')
this.actionClose=document.querySelectorAll('.search > .actions.close');this.quickSearchClear=document.getElementById('quick-search-clear');this.phoneText=document.querySelectorAll('.header-right > .right-top > .phone_text');this.minicartWrapper=document.getElementsByClassName('minicart-wrapper');this.searchBtn=document.querySelectorAll('.search > .control > .search-btn');this.inputGroupAddon=document.querySelectorAll('#search_mini_form > .input-group-addon');this.inputGroup=document.querySelectorAll('#search_mini_form > .search > .control > .input-group')
this.inkAutocomplete=document.getElementById('ink_autocomplete');this.searchMiniForm=document.getElementById('search_mini_form');this.supportBox=document.querySelectorAll('.search-autocomplete-right > .support-box');this.suggestionBox=document.querySelectorAll('.search-autocomplete-left > .top_suggestions_box');this.suggestionCategoryBox=document.querySelectorAll('.search-autocomplete-left > .suggested_categories_box');this.productBox=document.querySelectorAll('.search-autocomplete-right > .products-box');this.allResultBox=document.querySelectorAll('.search-autocomplete-left > .all-results');this.learnBox=document.querySelectorAll('.search-autocomplete-right > .learn-box');this.noResultMsg=document.querySelectorAll('#search_autocomplete > .no-result-message');this.hawkSearch=document.getElementsByClassName('search-autocomplete hawk-search');this.controller=new AbortController();this.signal=this.controller.signal;this.searchLoader.style.display='none';if(this.searchClose.length){this.searchClose[0].addEventListener('click',()=>{this.searchElement.value='';this.clearSearch();});}
if(this.searchOverlay.length){this.searchOverlay[0].addEventListener('click',e=>{this.searchClose[0].dispatchEvent(new Event('click'));});}
if(window.navigator.userAgent.match(/iPhone|iPad|iPod/i)){document.addEventListener('touchmove',e=>{this.searchElement.blur();});}
this.quickSearchClear.addEventListener('click',()=>{this.searchElement.value='';this.clearSearch();});let _initData=JSON.parse(decodeURIComponent(document.getElementById('hawksearch-form-script').getAttribute('data-api-init')));this.url=_initData.url;this.clientGuid=_initData.clientGuid;this.storeId=_initData.storeId;this.i18nShop=_initData.i18nShop;this.i18nTrendingProducts=_initData.i18nTrendingProducts;this.i18nExplore=_initData.i18nExplore;this.i18nSuggestion=_initData.i18nSuggestion;this.i18nSuggestedCategories=_initData.i18nSuggestedCategories;this.baseUrl=_initData.baseUrl;this.searchUrl=_initData.searchUrl;this.visitorId=_initData.visitorId;this.fieldOverride.push('price_sale_sid'+this.storeId);this.priceFormat=_initData.priceFormat;this.isInit=true;this.searchMiniForm.addEventListener('submit',(event)=>{event.preventDefault();let products=document.querySelectorAll('.search-autocomplete-right > .products-box > .items > .product_item');if(products.length===1){window.location.href=products[0].getAttribute('href');}else{event.currentTarget.submit();}});},onSearchChange:function(){if(!this.isInit){this.init();}
let value=this.searchElement.value;this.searchResults=[];if(this.phoneText.length){this.phoneText[0].style.display='none';}
if(this.searchBtn.length){this.searchBtn[0].style.display='none';}
this.languageOption?this.languageOption.style.display='none':false;if(this.inputGroupAddon.length){this.inputGroupAddon[0].classList.add('icon-clear');}
if(this._isEmpty(value)){this.actionClear.length?this.actionClear[0].style.display='none':false;}else{this.actionClear.length?this.actionClear[0].style.display='block':false;}
if(!value.length||value.length>=parseInt(this.minSearchLength,10)){console.log(value);if(this.currentRequestKeyword&&this.currentRequestKeyword.trim()===value.trim()){return;}
if(this.searchTimer){this.abortFetching();clearTimeout(this.searchTimer);}
this.searchTimer=setTimeout(()=>{this.beforeSendRequest();this.currentRequestKeyword=value;fetch(this.url,{method:'POST',signal:this.signal,headers:{'Content-Type':'application/json'},body:JSON.stringify({ClientGuid:this.clientGuid,Keyword:decodeURI(value),query:'(store_id.keyword: 0 OR store_id.keyword: '+this.storeId+')',ClientData:{"VisitorId":this.visitorId,"Custom":{"custom":websiteCode},"UserAgent":navigator.userAgent},FieldOverride:this.fieldOverride})}).then(response=>response.json()).then(response=>{this.currentRequestKeyword='';this.lastSearchKeyword=value;this.searchAutoComplete.classList.add('show');if(this.globalMessage.length){this.globalMessage[0].classList.add('hidden');}
if(this.spinToggle.length){this.spinToggle.forEach((element)=>{element.classList.add('hidden');});}
this.insideHolder?this.insideHolder.classList.add('hidden'):false;if(this.pageHeader.length){this.pageHeader[0].style.top='0px';this.pageHeader[0].classList.add('page-header-top');}
if(this.contactUs.length){this.contactUs[0].style.display='none';}
let searchFormHeight=this.searchMiniForm.clientHeight;searchFormHeight=searchFormHeight>0?searchFormHeight:102;if(this.inputGroup.length){searchFormHeight+=this.inputGroup[0].clientHeight}
if(this.searchOverlay.length){this.searchOverlay[0].style.top=searchFormHeight+'px';let newHeight=window.innerHeight-searchFormHeight;this.searchOverlay[0].style.height=newHeight+'px';this.searchOverlay[0].style.display='block'
this.searchOverlay[0].closest('.header.content').classList.add('hawk-search-open');this.toggleSearchAutoCompletePostEvent(true);this.pageHeader[0].classList.add('floating');}
if(this.searchClose.length){this.searchClose[0].style.top=0;}
document.body.style.overflow='hidden';if(this.actionClose.length){this.actionClose[0].style.display='block';}
this.searchLoader.style.display='none';this.searchMenuLoader.style.display='none';if(this.minicartWrapper.length){this.minicartWrapper[0].style.display='none';}
if(this.supportBox.length){this.supportBox[0].style.display='block';}
this.inkAutocomplete?this.inkAutocomplete.style.zIndex='auto':false;if(this._isEmpty(value)){this.actionClear.length?this.actionClear[0].style.display='none':false;}else{this.actionClear.length?this.actionClear[0].style.display='block':false;}
let data=response;this.searchResults.push({key:'default',data:data});if(this.suggestionBox.length){if(data.hasOwnProperty('Popular')&&data['Popular'].length){this.suggestionBox[0].innerHTML=this.getSuggestionHtml(data['Popular']);this.suggestionBox[0].style.display='';}else{this.suggestionBox[0].style.display='none';}}
if(this.suggestionCategoryBox.length){if(data.hasOwnProperty('Categories')&&data['Categories'].length){this.suggestionCategoryBox[0].innerHTML=this.getSuggestCategoriesHtml(data['Categories']);this.suggestionCategoryBox[0].style.display='';}else{this.suggestionCategoryBox[0].style.display='none';}}
if(data.hasOwnProperty('Products')&&data['Products'].length){this.productBox[0].innerHTML=this.getProductsHtml(data['Products']);this.productBox[0].style.display='';this.allResultBox.length?this.allResultBox[0].style.display='block':false;}else{this.productBox[0].innerHTML='';this.allResultBox.length?this.allResultBox[0].style.display='none':false;}
if(data.hasOwnProperty('Content')&&data['Content'].length){this.learnBox[0].innerHTML=this.getLearnBlockHtml(data['Content']);this.learnBox[0].style.display='block';}else{this.learnBox[0].style.display='none';}
if((!data.hasOwnProperty('Content')||!data['Content'].length)&&(!data.hasOwnProperty('Products')||!data['Products'].length)){this.noResultMsg[0].style.display='block';}
this._setAutoCompleteBackGround();this._bindSuggestMouseOver(this.searchResults);})},250);}else{this.abortFetching();clearTimeout(this.searchTimer);}},_bindSuggestMouseOver:function(searchResults){this.suggestItems=document.querySelectorAll('.search-autocomplete-left > .top_suggestions_box > .top-suggestions-items > .top-suggestions-item');this.suggestCategoryItems=document.querySelectorAll('.search-autocomplete-left > .suggested_categories_box > .suggested_categories-items > .top-suggestions-item');this.suggestItems.forEach(element=>{element.addEventListener('mouseover',(e)=>{this.activeSuggestItem(element);this.showSuggestProducts(element,searchResults);});});this.suggestCategoryItems.forEach(element=>{element.addEventListener('mouseover',(e)=>{this.activeSuggestItem(element);this.showSuggestProducts(element,searchResults);});});},showSuggestProducts:function(element,searchResults){let status=true;let searchParams,searchField,currentTarget;searchResults.forEach((_item,index)=>{if(_item.key===element.getAttribute('type')+'_'+element.getAttribute('search')){this.abortFetching();this.searchLoader.style.display='none';status=false;if(searchResults[index].data['Products'].length){this.productBox[0].innerHTML=this.getProductsHtml(searchResults[index].data['Products']);this.productBox[0].style.display='';this.allResultBox.length?this.allResultBox[0].style.display='block':false;}else{this.productBox[0].style.display='none';}
if(searchResults[index].data['Content'].length){this.learnBox[0].innerHTML=this.getLearnBlockHtml(searchResults[index].data['Content']);this.learnBox[0].style.display='block';}else{this.learnBox[0].style.display='none';}
if(this.supportBox.length){this.supportBox[0].style.display='block';}
this._setAutoCompleteBackGround();}});if(!status){return;}
searchParams={ClientGuid:this.clientGuid,Keyword:decodeURI(element.getAttribute('search')),query:'(store_id.keyword: 0 OR store_id.keyword: '+this.storeId+')',ClientData:{"VisitorId":this.visitorId,"Custom":{"custom":websiteCode},"UserAgent":navigator.userAgent},FieldOverride:this.fieldOverride};searchField=element.getAttribute('data-search-field');if(searchField){searchParams.query+=' AND '+searchField+'.text: '+element.getAttribute('search');searchParams.Keyword=self.lastSearchKeyword;}
if(this.searchTimer){this.abortFetching();clearTimeout(this.searchTimer);}
this.searchTimer=setTimeout(()=>{this.beforeSendRequest('suggest');fetch(this.url,{method:'POST',signal:this.signal,headers:{'Content-Type':'application/json'},body:JSON.stringify(searchParams)}).then(response=>response.json()).then(response=>{this.currentRequestKeyword='';let data=response;this.searchResults.push({key:element.getAttribute('type')+'_'+element.getAttribute('search'),data:data});this.searchLoader.style.display='none';if(this.supportBox.length){this.supportBox[0].style.display='block';}
if(data.hasOwnProperty('Products')&&data['Products'].length){this.productBox[0].innerHTML=this.getProductsHtml(data['Products']);this.productBox[0].style.display='';}else{this.productBox[0].style.display='none';}
if(data.hasOwnProperty('Content')&&data['Content'].length){this.learnBox[0].innerHTML=this.getLearnBlockHtml(data['Content']);this.learnBox[0].style.display='block';}else{this.learnBox[0].style.display='none';}
this._setAutoCompleteBackGround();})},250);},activeSuggestItem:function(element){this.suggestItems.forEach(item=>{item.classList.remove('active');})
this.suggestCategoryItems.forEach(item=>{item.classList.remove('active');})
element.classList.add('active');},beforeSendRequest:function(type){if(type=='suggest'){this.productBox[0].style.display='none';this.learnBox[0].style.display='none';if(this.supportBox.length){this.supportBox[0].style.display='none';}
this.searchLoader.style.display='block';let searchLeft=document.querySelector('.search-autocomplete-left');let searchRight=document.querySelector('.search-autocomplete-right');if(searchLeft&&searchRight){searchRight.style.minHeight=searchLeft.clientHeight+'px';let hoverElement=document.querySelector('.hover-left-auto-complete');if(hoverElement){hoverElement.style.minHeight=searchLeft.clientHeight*1+20+'px';}}}else{this.searchMenuLoader.style.display='block';this.searchLoader.style.display='block';this.suggestionBox[0].style.display='none';this.suggestionCategoryBox[0].style.display='none';this.productBox[0].style.display='none';this.learnBox[0].style.display='none';if(this.supportBox.length){this.supportBox[0].style.display='none';}
this.noResultMsg[0].style.display='none';this.allResultBox[0].style.display='none';}},getPriceFormat:function(_price){if(!this.priceFormat){return _price;}
let s='',precision,integerRequired,decimalSymbol,groupSymbol,groupLength,pattern,i,pad,j,re,r,am,suffix;precision=isNaN(this.priceFormat.requiredPrecision=Math.abs(this.priceFormat.requiredPrecision))?2:this.priceFormat.requiredPrecision;integerRequired=isNaN(this.priceFormat.integerRequired=Math.abs(this.priceFormat.integerRequired))?1:this.priceFormat.integerRequired;decimalSymbol=this.priceFormat.decimalSymbol===undefined?',':this.priceFormat.decimalSymbol;groupSymbol=this.priceFormat.groupSymbol===undefined?'.':this.priceFormat.groupSymbol;groupLength=this.priceFormat.groupLength===undefined?3:this.priceFormat.groupLength;pattern=this.priceFormat.pattern||'%s';suffix=this.priceFormat.suffix===undefined?'':this.priceFormat.suffix;pattern=pattern.indexOf('{sign}')<0?s+pattern:pattern.replace('{sign}',s);i=parseInt(_price=Number(Math.round(Math.abs(+_price||0)+'e+'+precision)+('e-'+precision)),10)+'';pad=i.length<integerRequired?integerRequired-i.length:0;i=this.stringPad('0',pad)+i;j=i.length>groupLength?i.length%groupLength:0;re=new RegExp('(\\d{'+groupLength+'})(?=\\d)','g');am=Number(Math.round(Math.abs(_price-i)+'e+'+precision)+('e-'+precision));r=(j?i.substr(0,j)+groupSymbol:'')+
i.substr(j).replace(re,'$1'+groupSymbol)+
(precision?decimalSymbol+am.toFixed(precision).replace(/-/,0).slice(2):'');return pattern.replace('%s',r.replace(/\s/,' ')).replace(/^\s\s*/,' ').replace(/\s\s*$/,' ').replace(/\s/,' ')+suffix;},stringPad:function(string,times){return new Array(times+1).join(string);},abortFetching:function(){console.log('Now aborting');this.controller.abort();this.controller=null;this.controller=new AbortController();this.signal=this.controller.signal;},getSuggestCategoriesHtml:function(_categories){var template=document.getElementById('suggested_categories_template').innerHTML;let html='<p class="suggested_categories-label">'+this.i18nSuggestedCategories+'</p><div class="suggested_categories-items">';_categories.forEach((_category,index)=>{let item=template;item=item.replace(/%%CATEGORY_URL%%/,this.searchUrl+'?q='+this.lastSearchKeyword+'&'+_category.FieldQSName+'='+_category.FieldQSValue);item=item.replace(/%%CATEGORY_FIELDQSVALUE%%/,_category.FieldQSValue);item=item.replace(/%%CATEGORY_FIELDQSNAME%%/,_category.FieldQSName);item=item.replace(/%%CATEGORY_VALUE%%/,_category.Value);html+=item;});html+='</div>';return html;},getSuggestionHtml:function(_popular){var template=document.getElementById('top_suggestions_template').innerHTML;let html='<p class="top-suggestions-label">'+this.i18nSuggestion+'</p><div class="top-suggestions-items">';_popular.forEach((_suggest,index)=>{let item=template;item=item.replace(/%%SUGGEST_URL%%/,this.searchUrl+'?q='+_suggest.RawValue);item=item.replace(/%%SUGGEST_RAWVALUE%%/,_suggest.RawValue);item=item.replace(/%%SUGGEST_VALUE%%/,_suggest.Value);html+=item;});html+='</div>';return html;},getLearnBlockHtml:function(_content){var template=document.getElementById('learn_block_template').innerHTML;let html='<p class="learn-label">'+this.i18nExplore+'</p><div class="items">';_content.forEach((_learn,index)=>{let item=template;item=item.replace(/%%RESULT_LENGTH%%/,_content.length);item=item.replace(/%%LEARN_URL%%/,this.baseUrl+_learn.Results.Document.url_key);item=item.replace(/%%LEARN_NAME%%/,_learn.Results.Document.name);html+=item;});html+='</div>';return html;},getProductsHtml:function(productList){let shopLabel,shopCategory;if(this.searchElement.value.length<this.minSearchLength){shopLabel=this.i18nTrendingProducts;shopCategory='Trending Products';}else{shopLabel=this.i18nShop;shopCategory='Shop'}
var template=document.getElementById('product_item_template').innerHTML;let html='<p class="shop-label" data-value="'+shopCategory+'">'+shopLabel+'</p><div class="items">';productList.forEach((product,index)=>{let item=template;item=item.replace(/%%RESULT_LENGTH%%/,productList.length);item=item.replace(/%%INDEX%%/,index);item=item.replace(/%%PRODUCT_URL%%/,this.baseUrl+product.Results.Document.url_key+'.html');item=item.replace(/%%PRODUCT_IMAGE%%/,product.Results.Document.default_image?product.Results.Document.default_image:(product.Thumb?product.Thumb.Url:''));item=item.replace(/%%PRODUCT_NAME%%/,product.ProductName);let priceHtml='';if(parseFloat(product.Results.Document.suggested_retail_price)>parseFloat(product.Results.Document['price_sale_sid'+this.storeId])){priceHtml+='<span class="suggest-retail-price">';priceHtml+='<span class="price">';priceHtml+=this.getPriceFormat(product.Results.Document.suggested_retail_price)
priceHtml+='</span>';priceHtml+='</span>';}
priceHtml+='<span class="regular-price">';priceHtml+='<span class="price">';priceHtml+=product.Results.Document.hasOwnProperty('price_sale_sid'+this.storeId)?this.getPriceFormat(product.Results.Document['price_sale_sid'+this.storeId]):''
priceHtml+='</span>';priceHtml+='</span>';item=item.replace(/%%PRODUCT_PRICE%%/,priceHtml);html+=item;});html+='</div>';return html;},_setAutoCompleteBackGround:function(){this.hawkSearch.length?this.hawkSearch[0].style.backgroundColor='#f7f7f7':false;},_isEmpty:function(value){return value===null||value.trim().length===0;},clearSearch:function(){this.searchAutoComplete.classList.remove('show');if(this.globalMessage.length){this.globalMessage[0].classList.remove('hidden');}
if(this.spinToggle.length){this.spinToggle.forEach((element)=>{element.classList.remove('hidden');});}
this.insideHolder?this.insideHolder.classList.remove('hidden'):false;if(this.pageHeader.length){this.pageHeader[0].style.top=this.globalMessage.length>0?this.globalMessage[0].clientHeight+'px':'0px';this.pageHeader[0].classList.remove('page-header-top');}
if(this.contactUs.length){this.contactUs[0].style.display='block';}
if(this.searchOverlay.length){this.searchOverlay[0].style.display='none'
this.searchOverlay[0].closest('.header.content').classList.remove('hawk-search-open');this.toggleSearchAutoCompletePostEvent();this.pageHeader[0].classList.remove('floating');}
this.languageOption?this.languageOption.style.display='block':false;if(this.searchClose.length){this.searchClose[0].style.top=0;}
document.body.style.overflow='inherit';if(this.actionClear.length){this.actionClear[0].style.display='none';}
if(this.actionClose.length){this.actionClose[0].style.display='none';}
if(this.phoneText.length){this.phoneText[0].style.display='block';}
if(this.minicartWrapper.length){this.minicartWrapper[0].style.display='block';}
if(this.searchBtn.length){this.searchBtn[0].removeAttribute('style');}
if(this.inputGroupAddon.length){this.inputGroupAddon[0].classList.remove('icon-clear');}
this.inkAutocomplete?this.inkAutocomplete.style.zIndex=9999:false;if(this.searchTimer){this.abortFetching();clearTimeout(this.searchTimer);this.searchLoader.style.display='none';this.searchMenuLoader.style.display='none';}
if(!document.getElementsByClassName('catalog-category-view').length&&!document.getElementsByClassName('catalogsearch-result-index').length){this.pageHeader[0].classList.add('floating');}},toggleSearchInput:function(){this.customizeSearchInputGroup=document.getElementById('search').parentElement;this.customizeSearch=document.getElementById('customize-search');if(!this.customizeSearchInputGroup||!this.customizeSearch){return false;}
if(window.getComputedStyle(this.customizeSearchInputGroup).display==='none'){this.initCustomizeSearchInputGroup();this.closeMiniCart();this.triggerScroll('sidebar sidebar-main');return false;}
this.initCustomizeSearchInputGroup('none');this.triggerScroll('sidebar sidebar-main');},toggleSearchAutoCompletePostEvent:function(flag=false){let isMobile=window.innerWidth<768,isPDP=!!document.querySelector('.catalog-product-view');if(isMobile&&isPDP){let compareBottom=document.querySelector('.product-info-tabs-div').clientHeight;if(flag){compareBottom-=document.querySelector('.product-info-tabs-div .button-and-price .product-info-tabs-price').clientHeight;}
document.querySelector('.category-compare-list').style.bottom=compareBottom+'px';}},triggerScroll:function(selector){let element=document.getElementsByClassName(selector);if(element.length<1){return;}
const event=new CustomEvent('scroll',{bubbles:true,cancelable:true});element[0].dispatchEvent(event);},initCustomizeSearchInputGroup:function(display='table'){if(window.innerWidth<1024){this.customizeSearchInputGroup.classList.add('border-bottom');this.customizeSearchInputGroup.style.display=display;}else{this.customizeSearchInputGroup.classList.remove('border-bottom');this.customizeSearchInputGroup.removeAttribute('style');document.getElementById('search').focus();}},closeMiniCart:function(){if(window.innerWidth<1024){let miniCartCloseIcon=document.getElementById('btn-minicart-close');if(window.getComputedStyle(miniCartCloseIcon).visibility=='visible'){miniCartCloseIcon.click();}}}}